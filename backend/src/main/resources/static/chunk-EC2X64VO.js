import{d as ue,e as ge,g as fe}from"./chunk-J6ZZYFA5.js";import{d as k}from"./chunk-IGUV3I34.js";import"./chunk-ZJVCWRNR.js";import{$ as O,Aa as ie,Ba as oe,D as h,Da as re,E as v,Ea as ae,F as c,Fa as le,Ga as de,Ha as A,Ia as T,J as j,Ja as w,K as o,L as u,La as se,M as g,N as C,Na as ce,O as N,Oa as me,Pa as pe,Q as z,R as H,S as $,W as D,X as J,Y as U,Z as W,aa as I,ba as M,da as K,ea as X,g as R,ga as Z,i as E,j as F,l as _,m as x,na as ee,o as r,p as S,pa as V,r as p,s as Y,sa as G,t as d,v as q,va as B,wa as P,x as n,xa as L,y as t,ya as te,z as y,za as ne}from"./chunk-JI6OXINY.js";function Pe(i,s){i&1&&(n(0,"div",9),y(1,"app-loading-spinner",10),t())}function Ee(i,s){if(i&1&&(n(0,"div",16)(1,"span",17),o(2,"New Batch Created:"),t(),n(3,"span",18),o(4),t()()),i&2){let e=c(2);r(4),u(e.confirmationResult.newBatchNumber)}}function Oe(i,s){if(i&1){let e=h();n(0,"button",2),v("click",function(){_(e);let a=c(2);return x(a.goToBatch(a.confirmationResult.newBatchId))}),o(1," View New Batch "),t()}}function Ie(i,s){if(i&1){let e=h();n(0,"div",11)(1,"div",12)(2,"div",13),y(3,"i",14),t(),n(4,"h2"),o(5,"Production Confirmed Successfully!"),t(),n(6,"div",15)(7,"div",16)(8,"span",17),o(9,"Confirmation ID:"),t(),n(10,"span",18),o(11),t()(),n(12,"div",16)(13,"span",17),o(14,"Quantity Produced:"),t(),n(15,"span",18),o(16),t()(),p(17,Ee,5,1,"div",19),n(18,"div",16)(19,"span",17),o(20,"Materials Consumed:"),t(),n(21,"span",18),o(22),t()(),n(23,"div",16)(24,"span",17),o(25,"Operation Status:"),t(),y(26,"app-status-badge",20),t()(),n(27,"div",21)(28,"button",22),v("click",function(){_(e);let a=c();return x(a.goBack())}),o(29,"Back to Order"),t(),p(30,Oe,2,0,"button",23),t()()()}if(i&2){let e=c();r(11),u(e.confirmationResult.confirmationId),r(5),u(e.confirmationResult.quantityProduced),r(),d("ngIf",e.confirmationResult.newBatchNumber),r(5),g("",(e.confirmationResult.materialsConsumed==null?null:e.confirmationResult.materialsConsumed.length)||0," item(s)"),r(4),d("status",e.confirmationResult.operationStatus),r(4),d("ngIf",e.confirmationResult.newBatchId)}}function Me(i,s){i&1&&(n(0,"div",67),o(1," Start time cannot be in the future "),t())}function Te(i,s){i&1&&(n(0,"div",67),o(1," End time must be after start time "),t())}function we(i,s){if(i&1&&(n(0,"tr")(1,"td"),o(2),t(),n(3,"td"),o(4),t(),n(5,"td"),o(6),t(),n(7,"td"),o(8),t(),n(9,"td")(10,"span",77),o(11),t()()()),i&2){let e=s.$implicit;q("insufficient",!e.sufficientStock),r(2),C("",e.materialName," (",e.materialId,")"),r(2),C("",e.requiredQuantity," ",e.unit,""),r(2),C("",e.availableQuantity," ",e.unit,""),r(2),u(e.yieldLossRatio),r(2),q("ok",e.sufficientStock)("low",!e.sufficientStock),r(),g(" ",e.sufficientStock?"Sufficient":"Insufficient"," ")}}function ke(i,s){i&1&&(n(0,"div",78)(1,"strong"),o(2,"Warning:"),t(),o(3," Insufficient stock for some materials. Please review before proceeding. "),t())}function qe(i,s){if(i&1){let e=h();n(0,"div",68)(1,"div",69)(2,"h4"),o(3,"BOM Suggested Consumption"),t(),n(4,"button",70),v("click",function(){_(e);let a=c(2);return x(a.applySuggestedConsumption())}),o(5," Apply Suggestions "),t()(),n(6,"div",71)(7,"span",72),o(8,"Target Quantity:"),t(),n(9,"span",73),o(10),t(),n(11,"span",72),o(12,"Total Required:"),t(),n(13,"span",73),o(14),t()(),n(15,"table",74)(16,"thead")(17,"tr")(18,"th"),o(19,"Material"),t(),n(20,"th"),o(21,"Required Qty"),t(),n(22,"th"),o(23,"Available"),t(),n(24,"th"),o(25,"Yield Ratio"),t(),n(26,"th"),o(27,"Stock Status"),t()()(),n(28,"tbody"),p(29,we,12,14,"tr",75),t()(),p(30,ke,4,0,"div",76),t()}if(i&2){let e=c(2);r(4),d("disabled",!e.hasSufficientStock()),r(6),g("",e.suggestedConsumption.targetQuantity," T"),r(4),g("",e.suggestedConsumption.totalRequiredQuantity," T"),r(15),d("ngForOf",e.suggestedConsumption.suggestedMaterials),r(),d("ngIf",!e.hasSufficientStock())}}function Ne(i,s){if(i&1){let e=h();n(0,"tr")(1,"td"),o(2),t(),n(3,"td"),o(4),t(),n(5,"td"),o(6),t(),n(7,"td"),y(8,"app-status-badge",20),t(),n(9,"td")(10,"button",81),v("click",function(){let a=_(e).$implicit,m=c(3);return x(m.addMaterial(a))}),o(11," Add "),t()()()}if(i&2){let e=s.$implicit;r(2),u(e.batchNumber),r(2),u(e.materialId),r(2),C("",e.quantity," ",e.unit,""),r(2),d("status",e.state)}}function Re(i,s){if(i&1&&(n(0,"table",79)(1,"thead")(2,"tr")(3,"th"),o(4,"Batch #"),t(),n(5,"th"),o(6,"Material ID"),t(),n(7,"th"),o(8,"Available Qty"),t(),n(9,"th"),o(10,"State"),t(),n(11,"th"),o(12,"Action"),t()()(),n(13,"tbody"),p(14,Ne,12,5,"tr",80),t()()),i&2){let e=c(2);r(14),d("ngForOf",e.availableInventory)}}function Fe(i,s){i&1&&(n(0,"p",82),o(1,"No available inventory"),t())}function De(i,s){if(i&1){let e=h();n(0,"tr")(1,"td"),o(2),t(),n(3,"td"),o(4),t(),n(5,"td"),o(6),t(),n(7,"td")(8,"input",84),v("change",function(a){let m=_(e).index,f=c(3);return x(f.updateMaterialQuantity(m,a.target.valueAsNumber))}),t()(),n(9,"td")(10,"button",85),v("click",function(){let a=_(e).index,m=c(3);return x(m.removeMaterial(a))}),o(11," Remove "),t()()()}if(i&2){let e=s.$implicit;r(2),u(e.batchNumber),r(2),u(e.materialId),r(2),u(e.availableQuantity),r(2),d("value",e.quantityToConsume)("min",0)("max",e.availableQuantity)}}function Ve(i,s){if(i&1&&(n(0,"div",83)(1,"h4"),o(2,"Selected Materials"),t(),n(3,"table",79)(4,"thead")(5,"tr")(6,"th"),o(7,"Batch #"),t(),n(8,"th"),o(9,"Material ID"),t(),n(10,"th"),o(11,"Available"),t(),n(12,"th"),o(13,"Qty to Consume"),t(),n(14,"th"),o(15,"Action"),t()()(),n(16,"tbody"),p(17,De,12,6,"tr",80),t()()()),i&2){let e=c(2);r(17),d("ngForOf",e.selectedMaterials)}}function Be(i,s){if(i&1&&(n(0,"tr",89)(1,"td"),o(2),t(),n(3,"td"),o(4),t(),n(5,"td"),o(6),t(),n(7,"td")(8,"span",90),o(9),D(10,"uppercase"),t()()()),i&2){let e=s.$implicit,l=c(3);d("ngClass","bom-"+l.getRequirementStatus(e)),r(2),C("",e.materialName," (",e.materialId,")"),r(2),C("",e.quantityRequired," ",e.unit,""),r(2),C("",l.getTotalSelectedByMaterial(e.materialId)," ",e.unit,""),r(2),d("ngClass",l.getRequirementStatus(e)),r(),g(" ",J(10,9,l.getRequirementStatus(e))," ")}}function Le(i,s){if(i&1&&(n(0,"div",86)(1,"h4"),o(2,"BOM Requirements"),t(),n(3,"table",87)(4,"thead")(5,"tr")(6,"th"),o(7,"Material"),t(),n(8,"th"),o(9,"Required Qty"),t(),n(10,"th"),o(11,"Selected Qty"),t(),n(12,"th"),o(13,"Status"),t()()(),n(14,"tbody"),p(15,Be,11,11,"tr",88),t()()()),i&2){let e=c(2);r(15),d("ngForOf",e.bomRequirements)}}function Ae(i,s){if(i&1&&(n(0,"li"),o(1),t()),i&2){let e=s.$implicit;r(),u(e)}}function Qe(i,s){if(i&1&&(n(0,"div",78)(1,"strong"),o(2,"Warnings:"),t(),n(3,"ul"),p(4,Ae,2,1,"li",80),t()()),i&2){let e=c(3);r(4),d("ngForOf",e.bomValidationResult.warnings)}}function je(i,s){if(i&1&&(n(0,"li"),o(1),t()),i&2){let e=s.$implicit;r(),u(e)}}function ze(i,s){if(i&1&&(n(0,"div",92)(1,"strong"),o(2,"Errors:"),t(),n(3,"ul"),p(4,je,2,1,"li",80),t()()),i&2){let e=c(3);r(4),d("ngForOf",e.bomValidationResult.errors)}}function He(i,s){if(i&1&&(n(0,"div",91),p(1,Qe,5,1,"div",76)(2,ze,5,1,"div",62),t()),i&2){let e=c(2);r(),d("ngIf",(e.bomValidationResult.warnings==null?null:e.bomValidationResult.warnings.length)>0),r(),d("ngIf",(e.bomValidationResult.errors==null?null:e.bomValidationResult.errors.length)>0)}}function $e(i,s){if(i&1){let e=h();n(0,"div",93)(1,"label",94)(2,"input",95),v("change",function(){let a=_(e).index,m=c(2);return x(m.toggleEquipment(a))}),t(),n(3,"span",96),o(4),t()()()}if(i&2){let e=s.$implicit;r(2),d("checked",e.selected),r(2),C("",e.equipmentName," (",e.equipmentCode,")")}}function We(i,s){i&1&&(n(0,"p",97),o(1,"No equipment available"),t())}function Ge(i,s){if(i&1){let e=h();n(0,"div",93)(1,"label",94)(2,"input",95),v("change",function(){let a=_(e).index,m=c(2);return x(m.toggleOperator(a))}),t(),n(3,"span",96),o(4),t()()()}if(i&2){let e=s.$implicit;r(2),d("checked",e.selected),r(2),C("",e.operatorName," (",e.operatorCode,")")}}function Ye(i,s){i&1&&(n(0,"p",97),o(1,"No operators available"),t())}function Je(i,s){i&1&&(n(0,"span",98),o(1,"*"),t())}function Ue(i,s){if(i&1&&(n(0,"option",99),o(1),t()),i&2){let e=s.$implicit;d("value",e.reason_code),r(),g(" ",e.reason_description," ")}}function Ke(i,s){i&1&&(n(0,"div",67),o(1," Delay reason is required when delay duration is entered "),t())}function Xe(i,s){i&1&&(n(0,"span",98),o(1,"*"),t())}function Ze(i,s){if(i&1&&(n(0,"span",105),o(1),t()),i&2){let e=c().$implicit;r(),g("(",e.unit,")")}}function et(i,s){if(i&1&&(n(0,"span",105),o(1),t()),i&2){let e=c().$implicit;r(),C(" [",e.min_value||"..."," - ",e.max_value||"...","] ")}}function tt(i,s){if(i&1&&(n(0,"div",67),o(1),t()),i&2){let e=c().$implicit;r(),g(" ",e.parameter_name," is required ")}}function nt(i,s){if(i&1&&(n(0,"div",67),o(1),t()),i&2){let e=c().$implicit;r(),N(" ",e.parameter_name," must be at least ",e.min_value," ",e.unit||""," ")}}function it(i,s){if(i&1&&(n(0,"div",67),o(1),t()),i&2){let e=c().$implicit;r(),N(" ",e.parameter_name," must not exceed ",e.max_value," ",e.unit||""," ")}}function ot(i,s){if(i&1&&(n(0,"div",33)(1,"div",102)(2,"label"),o(3),p(4,Xe,2,0,"span",57)(5,Ze,2,1,"span",103)(6,et,2,2,"span",103),t(),y(7,"input",104),p(8,tt,2,1,"div",36)(9,nt,2,3,"div",36)(10,it,2,3,"div",36),t()()),i&2){let e,l,a,m=s.$implicit,f=s.index,b=c(3);r(),d("formGroupName",f),r(2),g("",m.parameter_name," "),r(),d("ngIf",m.is_required),r(),d("ngIf",m.unit),r(),d("ngIf",m.min_value!==null||m.max_value!==null),r(),d("placeholder",m.default_value||""),Y("min",m.min_value)("max",m.max_value),r(),d("ngIf",((e=b.processParamsFormArray.at(f).get("parameterValue"))==null||e.errors==null?null:e.errors.required)&&((e=b.processParamsFormArray.at(f).get("parameterValue"))==null?null:e.touched)),r(),d("ngIf",(l=b.processParamsFormArray.at(f).get("parameterValue"))==null||l.errors==null?null:l.errors.min),r(),d("ngIf",(a=b.processParamsFormArray.at(f).get("parameterValue"))==null||a.errors==null?null:a.errors.max)}}function rt(i,s){if(i&1&&(n(0,"div",24)(1,"div",25),o(2,"Process Parameters"),t(),n(3,"div",100),p(4,ot,11,11,"div",101),t()()),i&2){let e=c(2);r(4),d("ngForOf",e.processParameters)}}function at(i,s){if(i&1&&(n(0,"div",92),o(1),t()),i&2){let e=c(2);r(),g(" ",e.error," ")}}function lt(i,s){i&1&&(n(0,"span"),o(1,"Confirm Production"),t())}function dt(i,s){i&1&&y(0,"span",106)}function st(i,s){if(i&1){let e=h();n(0,"div")(1,"div",24)(2,"div",25),o(3,"Operation Details"),t(),n(4,"div",26)(5,"div",27)(6,"span",28),o(7,"Operation"),t(),n(8,"span",29),o(9),t()(),n(10,"div",27)(11,"span",28),o(12,"Type"),t(),n(13,"span",29),o(14),t()(),n(15,"div",27)(16,"span",28),o(17,"Status"),t(),y(18,"app-status-badge",20),t(),n(19,"div",27)(20,"span",28),o(21,"Product"),t(),n(22,"span",29),o(23),t()(),n(24,"div",27)(25,"span",28),o(26,"Order Quantity"),t(),n(27,"span",29),o(28),t()(),n(29,"div",27)(30,"span",28),o(31,"Stage"),t(),n(32,"span",29),o(33),t()()()(),n(34,"form",30),v("ngSubmit",function(){_(e);let a=c();return x(a.onSubmit())}),n(35,"div",24)(36,"div",25),o(37,"Production Time"),t(),n(38,"div",31)(39,"div",32)(40,"div",33)(41,"label",34),o(42,"Start Time *"),t(),y(43,"input",35),p(44,Me,2,0,"div",36),t()(),n(45,"div",32)(46,"div",33)(47,"label",37),o(48,"End Time *"),t(),y(49,"input",38),t()()(),p(50,Te,2,0,"div",36),t(),n(51,"div",24)(52,"div",25),o(53,"Production Quantities"),t(),n(54,"div",31)(55,"div",32)(56,"div",33)(57,"label",39),o(58,"Quantity Produced *"),t(),y(59,"input",40),t()(),n(60,"div",32)(61,"div",33)(62,"label",41),o(63,"Quantity Scrapped"),t(),y(64,"input",42),t()()()(),n(65,"div",24)(66,"div",25),o(67,"Material Consumption"),t(),p(68,qe,31,5,"div",43),n(69,"div",44)(70,"h4"),o(71,"Available Inventory"),t(),p(72,Re,15,1,"table",45)(73,Fe,2,0,"p",46),t(),p(74,Ve,18,1,"div",47)(75,Le,16,1,"div",48)(76,He,3,2,"div",49),t(),n(77,"div",24)(78,"div",25),o(79,"Equipment & Operator"),t(),n(80,"div",31)(81,"div",32)(82,"div",33)(83,"label"),o(84,"Equipment * "),n(85,"span",50),o(86),t()(),n(87,"div",51),p(88,$e,5,3,"div",52)(89,We,2,0,"p",53),t()()(),n(90,"div",32)(91,"div",33)(92,"label"),o(93,"Operator * "),n(94,"span",50),o(95),t()(),n(96,"div",51),p(97,Ge,5,3,"div",52)(98,Ye,2,0,"p",53),t()()()()(),n(99,"div",24)(100,"div",25),o(101,"Delay Tracking"),t(),n(102,"div",31)(103,"div",32)(104,"div",33)(105,"label",54),o(106,"Delay Duration (minutes)"),t(),y(107,"input",55),t()(),n(108,"div",32)(109,"div",33)(110,"label",56),o(111," Delay Reason "),p(112,Je,2,0,"span",57),t(),n(113,"select",58)(114,"option",59),o(115,"-- Select Reason --"),t(),p(116,Ue,2,2,"option",60),t(),p(117,Ke,2,0,"div",36),t()()()(),p(118,rt,5,1,"div",8),n(119,"div",24)(120,"div",25),o(121,"Notes"),t(),n(122,"div",33),y(123,"textarea",61),t()(),p(124,at,2,1,"div",62),n(125,"div",63)(126,"button",64),v("click",function(){_(e);let a=c();return x(a.goBack())}),o(127,"Cancel"),t(),n(128,"button",65),p(129,lt,2,0,"span",7)(130,dt,1,0,"span",66),t()()()()}if(i&2){let e,l,a=c();r(9),C("",a.operation.operationName," (",a.operation.operationCode,")"),r(5),u(a.operation.operationType),r(4),d("status",a.operation.status),r(5),C("",a.operation.order==null?null:a.operation.order.productName," (",a.operation.order==null?null:a.operation.order.productSku,")"),r(5),u(a.operation.order==null?null:a.operation.order.quantity),r(5),u(a.operation.process==null?null:a.operation.process.stageName),r(),d("formGroup",a.confirmForm),r(10),d("ngIf",(e=a.confirmForm.get("startTime"))==null||e.errors==null?null:e.errors.futureStartTime),r(6),d("ngIf",a.confirmForm.errors==null?null:a.confirmForm.errors.invalidTimeRange),r(18),d("ngIf",a.showSuggestions&&a.suggestedConsumption),r(4),d("ngIf",a.availableInventory.length>0),r(),d("ngIf",a.availableInventory.length===0),r(),d("ngIf",a.selectedMaterials.length>0),r(),d("ngIf",a.bomRequirements.length>0),r(),d("ngIf",a.bomValidationResult),r(10),g("(",a.getSelectedEquipmentCount()," selected)"),r(2),d("ngForOf",a.availableEquipment),r(),d("ngIf",a.availableEquipment.length===0),r(6),g("(",a.getSelectedOperatorCount()," selected)"),r(2),d("ngForOf",a.activeOperators),r(),d("ngIf",a.activeOperators.length===0),r(14),d("ngIf",a.isDelayReasonRequired()),r(4),d("ngForOf",a.delayReasons),r(),d("ngIf",a.isDelayReasonRequired()&&!((l=a.confirmForm.get("delayReason"))!=null&&l.value)),r(),d("ngIf",a.processParameters.length>0),r(6),d("ngIf",a.error),r(4),d("disabled",a.confirmForm.invalid||a.submitting),r(),d("ngIf",!a.submitting),r(),d("ngIf",a.submitting)}}function ct(i,s){if(i&1&&(n(0,"div",24)(1,"p",82),o(2),t()()),i&2){let e=c();r(2),u(e.error||"Operation not found")}}var Ce=(()=>{class i{constructor(e,l,a,m){this.route=e,this.router=l,this.fb=a,this.apiService=m,this.operation=null,this.loading=!0,this.submitting=!1,this.success=!1,this.error="",this.availableInventory=[],this.availableEquipment=[],this.activeOperators=[],this.processParameters=[],this.delayReasons=[],this.selectedMaterials=[],this.confirmationResult=null,this.bomRequirements=[],this.bomValidationResult=null,this.showBomWarning=!1,this.suggestedConsumption=null,this.loadingSuggestions=!1,this.showSuggestions=!1}ngOnInit(){this.operationId=Number(this.route.snapshot.paramMap.get("operationId")),this.initForm(),this.loadData()}initForm(){let e=new Date,l=this.formatDateTimeLocal(e);this.confirmForm=this.fb.group({operationId:[this.operationId],startTime:[l,[P.required,this.startTimeValidator()]],endTime:[l,[P.required]],quantityProduced:[0,[P.required,P.min(1)]],quantityScrapped:[0,[P.min(0)]],delayMinutes:[0,[P.min(0)]],delayReason:[""],notes:[""],processParameters:this.fb.array([])},{validators:this.timeRangeValidator()})}startTimeValidator(){return e=>e.value&&new Date(e.value)>new Date?{futureStartTime:!0}:null}timeRangeValidator(){return e=>{let l=e.get("startTime")?.value,a=e.get("endTime")?.value;if(l&&a){let m=new Date(l);if(new Date(a)<=m)return{invalidTimeRange:!0}}return null}}formatDateTimeLocal(e){let l=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),m=String(e.getDate()).padStart(2,"0"),f=String(e.getHours()).padStart(2,"0"),b=String(e.getMinutes()).padStart(2,"0");return`${l}-${a}-${m}T${f}:${b}`}get processParamsFormArray(){return this.confirmForm.get("processParameters")}loadData(){this.loading=!0,this.apiService.getOperationDetails(this.operationId).subscribe({next:e=>{this.operation=e,this.loadMasterData()},error:e=>{console.error("Error loading operation:",e),this.error="Failed to load operation details",this.loading=!1}})}loadMasterData(){this.apiService.getAvailableEquipment().subscribe({next:e=>{this.availableEquipment=e.map(l=>({equipmentId:l.equipmentId,equipmentCode:l.equipmentCode,equipmentName:l.equipmentName,selected:!1}))},error:e=>console.error("Error loading equipment:",e)}),this.apiService.getActiveOperators().subscribe({next:e=>{this.activeOperators=e.map(l=>({operatorId:l.operatorId,operatorCode:l.operatorCode,operatorName:l.operatorName,selected:!1}))},error:e=>console.error("Error loading operators:",e)}),this.apiService.getDelayReasons().subscribe({next:e=>{this.delayReasons=e},error:e=>console.error("Error loading delay reasons:",e)}),this.apiService.getAvailableInventory().subscribe({next:e=>{this.availableInventory=e,this.loading=!1},error:e=>{console.error("Error loading inventory:",e),this.loading=!1}}),this.operation?.operationType&&this.apiService.getProcessParameters(this.operation.operationType,this.operation.order?.productSku).subscribe({next:e=>{this.processParameters=e,this.initProcessParams()},error:e=>console.error("Error loading process parameters:",e)}),this.operation?.order?.productSku&&this.apiService.getBomRequirements(this.operation.order.productSku).subscribe({next:e=>{this.bomRequirements=e.requirements||[]},error:e=>console.error("Error loading BOM requirements:",e)}),this.loadSuggestedConsumption()}loadSuggestedConsumption(){this.loadingSuggestions=!0,this.apiService.getSuggestedConsumption(this.operationId).subscribe({next:e=>{this.suggestedConsumption=e,this.loadingSuggestions=!1,this.showSuggestions=e.suggestedMaterials?.length>0,e.targetQuantity&&!this.confirmForm.get("quantityProduced")?.value&&this.confirmForm.patchValue({quantityProduced:e.targetQuantity})},error:e=>{console.error("Error loading suggested consumption:",e),this.loadingSuggestions=!1}})}applySuggestedConsumption(){if(this.suggestedConsumption){this.selectedMaterials=[];for(let e of this.suggestedConsumption.suggestedMaterials)for(let l of e.availableBatches)l.suggestedConsumption>0&&this.selectedMaterials.push({inventoryId:l.inventoryId,batchId:l.batchId||0,batchNumber:l.batchNumber||"",materialId:e.materialId,availableQuantity:l.availableQuantity,quantityToConsume:l.suggestedConsumption});this.validateBom()}}getTotalSuggestedQuantity(){return this.suggestedConsumption?this.suggestedConsumption.suggestedMaterials.reduce((e,l)=>e+l.requiredQuantity,0):0}hasSufficientStock(){return this.suggestedConsumption?this.suggestedConsumption.suggestedMaterials.every(e=>e.sufficientStock):!0}initProcessParams(){this.processParamsFormArray.clear(),this.processParameters.forEach(e=>{let l=[];e.is_required&&l.push(P.required),e.min_value!==null&&e.min_value!==void 0&&l.push(P.min(e.min_value)),e.max_value!==null&&e.max_value!==void 0&&l.push(P.max(e.max_value)),this.processParamsFormArray.push(this.fb.group({parameterName:[e.parameter_name],parameterValue:[e.default_value||"",l]}))})}addMaterial(e){this.selectedMaterials.find(a=>a.inventoryId===e.inventoryId)||(this.selectedMaterials.push({inventoryId:e.inventoryId,batchId:e.batchId,batchNumber:e.batchNumber,materialId:e.materialId,availableQuantity:e.quantity,quantityToConsume:0}),this.validateBom())}removeMaterial(e){this.selectedMaterials.splice(e,1)}updateMaterialQuantity(e,l){l>=0&&l<=this.selectedMaterials[e].availableQuantity&&(this.selectedMaterials[e].quantityToConsume=l,this.validateBom())}toggleEquipment(e){this.availableEquipment[e].selected=!this.availableEquipment[e].selected}getSelectedEquipmentIds(){return this.availableEquipment.filter(e=>e.selected).map(e=>e.equipmentId)}getSelectedEquipmentCount(){return this.availableEquipment.filter(e=>e.selected).length}toggleOperator(e){this.activeOperators[e].selected=!this.activeOperators[e].selected}getSelectedOperatorIds(){return this.activeOperators.filter(e=>e.selected).map(e=>e.operatorId)}getSelectedOperatorCount(){return this.activeOperators.filter(e=>e.selected).length}isDelayReasonRequired(){let e=this.confirmForm.get("delayMinutes")?.value;return e&&e>0}validateBom(){if(!this.operation?.order?.productSku||this.selectedMaterials.length===0){this.bomValidationResult=null;return}let e={productSku:this.operation.order.productSku,targetQuantity:this.confirmForm.get("quantityProduced")?.value||0,materialsConsumed:this.selectedMaterials.filter(l=>l.quantityToConsume>0).map(l=>({materialId:l.materialId,quantity:l.quantityToConsume}))};this.apiService.validateBomConsumption(e).subscribe({next:l=>{this.bomValidationResult=l,this.showBomWarning=l.warnings?.length>0||l.errors?.length>0},error:l=>console.error("Error validating BOM:",l)})}getTotalSelectedByMaterial(e){return this.selectedMaterials.filter(l=>l.materialId===e).reduce((l,a)=>l+a.quantityToConsume,0)}getRequirementStatus(e){let l=this.getTotalSelectedByMaterial(e.materialId);return l>=e.quantityRequired?"met":l>0?"partial":"missing"}onSubmit(){if(this.confirmForm.invalid){this.error="Please fill in all required fields correctly.";return}if(this.getSelectedEquipmentCount()===0){this.error="Please select at least one equipment.";return}if(this.getSelectedOperatorCount()===0){this.error="Please select at least one operator.";return}let e=this.confirmForm.value;if(e.delayMinutes>0&&!e.delayReason){this.error="Please select a delay reason when delay duration is greater than 0.";return}this.submitting=!0,this.error="";let l={operationId:this.operationId,producedQty:e.quantityProduced,scrapQty:e.quantityScrapped||0,startTime:new Date(e.startTime).toISOString(),endTime:new Date(e.endTime).toISOString(),equipmentIds:this.getSelectedEquipmentIds(),operatorIds:this.getSelectedOperatorIds(),materialsConsumed:this.selectedMaterials.filter(a=>a.quantityToConsume>0).map(a=>({batchId:a.batchId,inventoryId:a.inventoryId,quantity:a.quantityToConsume})),processParameters:e.processParameters.filter(a=>a.parameterValue).reduce((a,m)=>(a[m.parameterName]=m.parameterValue,a),{}),delayMinutes:e.delayMinutes||0,delayReason:e.delayReason||null,notes:e.notes};this.apiService.confirmProduction(l).subscribe({next:a=>{this.confirmationResult=a,this.success=!0,this.submitting=!1},error:a=>{console.error("Error confirming production:",a),this.error=a.error?.message||"Failed to confirm production",this.submitting=!1}})}goBack(){this.operation?.order?.orderId?this.router.navigate(["/orders",this.operation.order.orderId]):this.router.navigate(["/orders"])}goToBatch(e){this.router.navigate(["/batches",e])}static{this.\u0275fac=function(l){return new(l||i)(S(ee),S(V),S(ce),S(k))}}static{this.\u0275cmp=E({type:i,selectors:[["app-production-confirm"]],decls:11,vars:4,consts:[[1,"container"],[1,"page-header"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-arrow-left"],[1,"page-title"],["class","text-center",4,"ngIf"],["class","success-container",4,"ngIf"],[4,"ngIf"],["class","card",4,"ngIf"],[1,"text-center"],["message","Loading operation details..."],[1,"success-container"],[1,"card","success-card"],[1,"success-icon"],[1,"fas","fa-circle-check"],[1,"result-summary"],[1,"result-row"],[1,"result-label"],[1,"result-value"],["class","result-row",4,"ngIf"],[3,"status"],[1,"success-actions"],[1,"btn","btn-primary",3,"click"],["class","btn btn-secondary",3,"click",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"operation-info-grid"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-6"],[1,"form-group"],["for","startTime"],["type","datetime-local","id","startTime","formControlName","startTime",1,"form-control"],["class","field-error",4,"ngIf"],["for","endTime"],["type","datetime-local","id","endTime","formControlName","endTime",1,"form-control"],["for","quantityProduced"],["type","number","id","quantityProduced","formControlName","quantityProduced","min","0",1,"form-control"],["for","quantityScrapped"],["type","number","id","quantityScrapped","formControlName","quantityScrapped","min","0",1,"form-control"],["class","suggested-consumption",4,"ngIf"],[1,"available-materials"],["class","table",4,"ngIf"],["class","no-data",4,"ngIf"],["class","selected-materials",4,"ngIf"],["class","bom-requirements",4,"ngIf"],["class","bom-validation",4,"ngIf"],[1,"selection-count"],[1,"checkbox-group"],["class","checkbox-item",4,"ngFor","ngForOf"],["class","no-data-small",4,"ngIf"],["for","delayMinutes"],["type","number","id","delayMinutes","formControlName","delayMinutes","min","0","placeholder","0",1,"form-control"],["for","delayReason"],["class","required",4,"ngIf"],["id","delayReason","formControlName","delayReason",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","notes","formControlName","notes","rows","3","placeholder","Add any notes about this production confirmation...",1,"form-control"],["class","alert alert-error",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-success",3,"disabled"],["class","spinner",4,"ngIf"],[1,"field-error"],[1,"suggested-consumption"],[1,"suggestion-header"],["type","button",1,"btn","btn-primary","btn-sm",3,"click","disabled"],[1,"suggestion-info"],[1,"suggestion-label"],[1,"suggestion-value"],[1,"table","suggestion-table"],[3,"insufficient",4,"ngFor","ngForOf"],["class","alert alert-warning",4,"ngIf"],[1,"stock-status"],[1,"alert","alert-warning"],[1,"table"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"no-data"],[1,"selected-materials"],["type","number",1,"form-control","consume-qty",3,"change","value","min","max"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"bom-requirements"],[1,"table","bom-table"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"bom-status",3,"ngClass"],[1,"bom-validation"],[1,"alert","alert-error"],[1,"checkbox-item"],[1,"checkbox-label"],["type","checkbox",3,"change","checked"],[1,"checkbox-text"],[1,"no-data-small"],[1,"required"],[3,"value"],["formArrayName","processParameters"],["class","form-group",4,"ngFor","ngForOf"],[3,"formGroupName"],["class","param-hint",4,"ngIf"],["type","number","formControlName","parameterValue","step","any",1,"form-control",3,"placeholder"],[1,"param-hint"],[1,"spinner"]],template:function(l,a){l&1&&(n(0,"div",0)(1,"div",1)(2,"button",2),v("click",function(){return a.goBack()}),y(3,"i",3),o(4," Back to Order"),t(),n(5,"h1",4),o(6,"Production Confirmation"),t()(),p(7,Pe,2,0,"div",5)(8,Ie,31,6,"div",6)(9,st,131,31,"div",7)(10,ct,3,1,"div",8),t()),l&2&&(r(7),d("ngIf",a.loading),r(),d("ngIf",a.success&&a.confirmationResult),r(),d("ngIf",!a.loading&&!a.success&&a.operation),r(),d("ngIf",!a.loading&&!a.operation&&!a.success))},dependencies:[O,I,M,ie,T,w,B,oe,A,L,te,se,re,de,ae,le,ue,ge,K],styles:[".page-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:24px;margin-bottom:24px}.operation-info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:20px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.info-label[_ngcontent-%COMP%]{font-size:12px;color:#888;text-transform:uppercase}.info-value[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.available-materials[_ngcontent-%COMP%]{margin-bottom:24px}.available-materials[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .selected-materials[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px;font-weight:500;margin-bottom:12px;color:#555}.consume-qty[_ngcontent-%COMP%]{width:100px;padding:6px 8px}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:13px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px;margin-bottom:40px}.no-data[_ngcontent-%COMP%]{color:#888;text-align:center;padding:20px}.required[_ngcontent-%COMP%]{color:#d32f2f}.param-hint[_ngcontent-%COMP%]{font-size:12px;color:#888;font-weight:400}.success-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px 0}.success-card[_ngcontent-%COMP%]{text-align:center;max-width:500px;width:100%}.success-icon[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background:#4caf50;color:#fff;font-size:40px;display:flex;align-items:center;justify-content:center;margin:0 auto 24px}.success-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2e7d32;margin-bottom:24px}.result-summary[_ngcontent-%COMP%]{background:#f5f5f5;border-radius:8px;padding:20px;margin-bottom:24px}.result-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #eee}.result-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.result-label[_ngcontent-%COMP%]{color:#666}.result-value[_ngcontent-%COMP%]{font-weight:500}.success-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center}.spinner[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.bom-requirements[_ngcontent-%COMP%]{margin-top:24px;padding-top:24px;border-top:1px solid #e0e0e0}.bom-requirements[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px;font-weight:500;margin-bottom:12px;color:#555}.bom-table[_ngcontent-%COMP%]   tr.bom-met[_ngcontent-%COMP%]{background-color:#e8f5e9}.bom-table[_ngcontent-%COMP%]   tr.bom-partial[_ngcontent-%COMP%]{background-color:#fff3e0}.bom-table[_ngcontent-%COMP%]   tr.bom-missing[_ngcontent-%COMP%]{background-color:#ffebee}.bom-status[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500}.bom-status.met[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.bom-status.partial[_ngcontent-%COMP%]{background-color:#ff9800;color:#fff}.bom-status.missing[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.bom-validation[_ngcontent-%COMP%]{margin-top:16px}.bom-validation[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:8px 0 0 20px;padding:0}.alert-warning[_ngcontent-%COMP%]{background-color:#fff3e0;color:#e65100;border:1px solid #ffcc80;padding:12px 16px;border-radius:4px;margin-bottom:12px}.checkbox-group[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;border:1px solid #e0e0e0;border-radius:4px;padding:12px;background:#fafafa}.checkbox-item[_ngcontent-%COMP%]{margin-bottom:8px}.checkbox-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;padding:6px 8px;border-radius:4px;transition:background-color .2s}.checkbox-label[_ngcontent-%COMP%]:hover{background-color:#e3f2fd}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:10px;width:18px;height:18px;cursor:pointer}.checkbox-text[_ngcontent-%COMP%]{font-size:14px;color:#333}.selection-count[_ngcontent-%COMP%]{font-size:12px;color:#666;font-weight:400}.no-data-small[_ngcontent-%COMP%]{color:#888;font-size:13px;margin:0}.field-error[_ngcontent-%COMP%]{color:#d32f2f;font-size:12px;margin-top:4px}input[type=datetime-local][_ngcontent-%COMP%]{padding:8px 12px}.suggested-consumption[_ngcontent-%COMP%]{background:#e3f2fd;border:1px solid #90caf9;border-radius:8px;padding:16px;margin-bottom:24px}.suggestion-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.suggestion-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#1565c0;font-size:14px}.suggestion-info[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:12px;font-size:14px}.suggestion-label[_ngcontent-%COMP%]{color:#666}.suggestion-value[_ngcontent-%COMP%]{font-weight:600;color:#1565c0}.suggestion-table[_ngcontent-%COMP%]{background:#fff;margin-bottom:12px}.suggestion-table[_ngcontent-%COMP%]   tr.insufficient[_ngcontent-%COMP%]{background-color:#ffebee}.stock-status[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500}.stock-status.ok[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.stock-status.low[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}@media (max-width: 768px){.operation-info-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.row[_ngcontent-%COMP%]{flex-direction:column}.col-6[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%}.checkbox-group[_ngcontent-%COMP%]{max-height:150px}}"]})}}return i})();function mt(i,s){if(i&1&&(n(0,"option",17),o(1),t()),i&2){let e=s.$implicit;d("value",e),r(),u(e)}}function pt(i,s){if(i&1&&(n(0,"div",18)(1,"div",19)(2,"span",20),o(3),t(),n(4,"span",21),o(5,"Total"),t()(),n(6,"div",22)(7,"span",20),o(8),t(),n(9,"span",21),o(10,"Confirmed"),t()(),n(11,"div",23)(12,"span",20),o(13),t(),n(14,"span",21),o(15,"Pending Review"),t()(),n(16,"div",24)(17,"span",20),o(18),t(),n(19,"span",21),o(20,"Rejected"),t()()()),i&2){let e=c();r(3),u(e.allConfirmations.length),r(5),u(e.countByStatus("CONFIRMED")),r(5),u(e.countByStatus("PENDING_REVIEW")),r(5),u(e.countByStatus("REJECTED"))}}function ut(i,s){if(i&1){let e=h();n(0,"tr",30),v("click",function(){let a=_(e).$implicit,m=c(3);return x(m.toggleDetail(a))}),n(1,"td"),o(2),t(),n(3,"td"),o(4),t(),n(5,"td"),o(6),t(),n(7,"td"),o(8),t(),n(9,"td"),o(10),t(),n(11,"td"),o(12),t(),n(13,"td")(14,"span",31),o(15),t()(),n(16,"td"),o(17),t()()}if(i&2){let e=s.$implicit,l=c(3);q("selected",l.selectedConfirmation===e)("rejected-row",e.status==="REJECTED"),r(2),u(e.confirmationId),r(2),u(e.operationName||"-"),r(2),u((e.outputBatch==null?null:e.outputBatch.batchNumber)||"-"),r(2),u(e.producedQty),r(2),u(e.scrapQty||0),r(2),u(l.getDuration(e.startTime,e.endTime)),r(2),d("ngClass",l.getStatusClass(e.status)),r(),g(" ",e.status," "),r(2),u(l.formatDateTime(e.createdOn))}}function gt(i,s){if(i&1&&(n(0,"table",28)(1,"thead")(2,"tr")(3,"th"),o(4,"ID"),t(),n(5,"th"),o(6,"Operation"),t(),n(7,"th"),o(8,"Output Batch"),t(),n(9,"th"),o(10,"Produced Qty"),t(),n(11,"th"),o(12,"Scrap Qty"),t(),n(13,"th"),o(14,"Duration"),t(),n(15,"th"),o(16,"Status"),t(),n(17,"th"),o(18,"Created"),t()()(),n(19,"tbody"),p(20,ut,18,13,"tr",29),t()()),i&2){let e=c(2);r(20),d("ngForOf",e.confirmations)}}function ft(i,s){i&1&&(n(0,"div",32)(1,"p"),o(2,"No production confirmations found."),t()())}function _t(i,s){if(i&1&&(n(0,"div",33),o(1),t()),i&2){let e=c(2);r(),C(" Showing ",e.confirmations.length," of ",e.allConfirmations.length," confirmations ")}}function xt(i,s){if(i&1&&(n(0,"div",25),p(1,gt,21,1,"table",26)(2,ft,3,0,"ng-template",null,1,W)(4,_t,2,2,"div",27),t()),i&2){let e=j(3),l=c();r(),d("ngIf",l.confirmations.length>0)("ngIfElse",e),r(3),d("ngIf",l.confirmations.length>0)}}function vt(i,s){i&1&&(n(0,"div",34),o(1,"Loading production history..."),t())}function Ct(i,s){if(i&1&&(n(0,"span"),o(1),t()),i&2){let e=c(3);r(),g(" - ",e.selectedConfirmation.delayReason,"")}}function ht(i,s){if(i&1&&(n(0,"div",40)(1,"span",41),o(2,"Delay:"),t(),o(3),p(4,Ct,2,1,"span",45),t()),i&2){let e=c(2);r(3),g(" ",e.selectedConfirmation.delayMinutes,"min "),r(),d("ngIf",e.selectedConfirmation.delayReason)}}function bt(i,s){if(i&1&&(n(0,"div",40)(1,"span",41),o(2,"Notes:"),t(),o(3),t()),i&2){let e=c(2);r(3),g(" ",e.selectedConfirmation.notes," ")}}function yt(i,s){if(i&1&&(n(0,"div",39)(1,"h4"),o(2,"Output Batch"),t(),n(3,"div",40)(4,"span",41),o(5,"Batch:"),t(),o(6),t(),n(7,"div",40)(8,"span",41),o(9,"Material:"),t(),o(10),t(),n(11,"div",40)(12,"span",41),o(13,"Quantity:"),t(),o(14),t()()),i&2){let e=c(2);r(6),g(" ",e.selectedConfirmation.outputBatch.batchNumber,""),r(4),g(" ",e.selectedConfirmation.outputBatch.materialName,""),r(4),C(" ",e.selectedConfirmation.outputBatch.quantity," ",e.selectedConfirmation.outputBatch.unit,"")}}function St(i,s){if(i&1&&(n(0,"div",40),o(1),t()),i&2){let e=s.$implicit;r(),C(" ",e.name," (",e.equipmentCode,") ")}}function Pt(i,s){if(i&1&&(n(0,"div",39)(1,"h4"),o(2,"Equipment"),t(),p(3,St,2,2,"div",46),t()),i&2){let e=c(2);r(3),d("ngForOf",e.selectedConfirmation.equipment)}}function Et(i,s){if(i&1&&(n(0,"div",40),o(1),t()),i&2){let e=s.$implicit;r(),C(" ",e.name," (",e.operatorCode,") ")}}function Ot(i,s){if(i&1&&(n(0,"div",39)(1,"h4"),o(2,"Operators"),t(),p(3,Et,2,2,"div",46),t()),i&2){let e=c(2);r(3),d("ngForOf",e.selectedConfirmation.operators)}}function It(i,s){if(i&1&&(n(0,"div",40),o(1),t()),i&2){let e=s.$implicit;r(),N(" ",e.materialId," - Batch ",e.batchNumber," (",e.quantityConsumed,") ")}}function Mt(i,s){if(i&1&&(n(0,"div",39)(1,"h4"),o(2,"Materials Consumed"),t(),p(3,It,2,3,"div",46),t()),i&2){let e=c(2);r(3),d("ngForOf",e.selectedConfirmation.materialsConsumed)}}function Tt(i,s){if(i&1&&(n(0,"div",47)(1,"h4"),o(2,"Rejection"),t(),n(3,"div",40)(4,"span",41),o(5,"Reason:"),t(),o(6),t(),n(7,"div",40)(8,"span",41),o(9,"Rejected By:"),t(),o(10),t(),n(11,"div",40)(12,"span",41),o(13,"Rejected On:"),t(),o(14),t()()),i&2){let e=c(2);r(6),g(" ",e.selectedConfirmation.rejectionReason,""),r(4),g(" ",e.selectedConfirmation.rejectedBy,""),r(4),g(" ",e.formatDateTime(e.selectedConfirmation.rejectedOn),"")}}function wt(i,s){if(i&1){let e=h();n(0,"div",35)(1,"div",36)(2,"h3"),o(3),t(),n(4,"button",37),v("click",function(){_(e);let a=c();return x(a.selectedConfirmation=null)}),o(5,"Close"),t()(),n(6,"div",38)(7,"div",39)(8,"h4"),o(9,"Production Details"),t(),n(10,"div",40)(11,"span",41),o(12,"Operation:"),t(),o(13),t(),n(14,"div",40)(15,"span",41),o(16,"Produced Qty:"),t(),o(17),t(),n(18,"div",40)(19,"span",41),o(20,"Scrap Qty:"),t(),o(21),t(),n(22,"div",40)(23,"span",41),o(24,"Start:"),t(),o(25),t(),n(26,"div",40)(27,"span",41),o(28,"End:"),t(),o(29),t(),p(30,ht,5,2,"div",42)(31,bt,4,1,"div",42),t(),p(32,yt,15,4,"div",43)(33,Pt,4,1,"div",43)(34,Ot,4,1,"div",43)(35,Mt,4,1,"div",43)(36,Tt,15,3,"div",44),t()()}if(i&2){let e=c();r(3),g("Confirmation #",e.selectedConfirmation.confirmationId,""),r(10),g(" ",e.selectedConfirmation.operationName,""),r(4),g(" ",e.selectedConfirmation.producedQty,""),r(4),g(" ",e.selectedConfirmation.scrapQty||0,""),r(4),g(" ",e.formatDateTime(e.selectedConfirmation.startTime),""),r(4),g(" ",e.formatDateTime(e.selectedConfirmation.endTime),""),r(),d("ngIf",e.selectedConfirmation.delayMinutes),r(),d("ngIf",e.selectedConfirmation.notes),r(),d("ngIf",e.selectedConfirmation.outputBatch),r(),d("ngIf",e.selectedConfirmation.equipment==null?null:e.selectedConfirmation.equipment.length),r(),d("ngIf",e.selectedConfirmation.operators==null?null:e.selectedConfirmation.operators.length),r(),d("ngIf",e.selectedConfirmation.materialsConsumed==null?null:e.selectedConfirmation.materialsConsumed.length),r(),d("ngIf",e.selectedConfirmation.rejectionReason)}}var he=(()=>{class i{constructor(e){this.apiService=e,this.allConfirmations=[],this.confirmations=[],this.loading=!0,this.error="",this.filterStatus="all",this.searchTerm="",this.statuses=["CONFIRMED","PENDING_REVIEW","PARTIALLY_CONFIRMED","REJECTED"],this.selectedConfirmation=null}ngOnInit(){this.loadConfirmations()}loadConfirmations(){this.loading=!0,this.error="",this.allConfirmations=[];let e=0,l=this.statuses.length;this.statuses.forEach(a=>{this.apiService.getConfirmationsByStatus(a).subscribe({next:m=>{this.allConfirmations.push(...m),e++,e===l&&(this.allConfirmations.sort((f,b)=>(b.confirmationId||0)-(f.confirmationId||0)),this.applyFilters(),this.loading=!1)},error:()=>{e++,e===l&&(this.applyFilters(),this.loading=!1)}})})}applyFilters(){let e=[...this.allConfirmations];if(this.filterStatus&&this.filterStatus!=="all"&&(e=e.filter(l=>l.status===this.filterStatus)),this.searchTerm){let l=this.searchTerm.toLowerCase();e=e.filter(a=>a.operationName?.toLowerCase().includes(l)||a.outputBatch?.batchNumber?.toLowerCase().includes(l)||String(a.confirmationId).includes(l)||a.notes?.toLowerCase().includes(l))}this.confirmations=e}onFilterStatusChange(e){this.filterStatus=e,this.applyFilters()}onSearchChange(e){this.searchTerm=e,this.applyFilters()}getStatusClass(e){return e?.toLowerCase().replace(/_/g,"-")||""}countByStatus(e){return this.allConfirmations.filter(l=>l.status===e).length}formatDateTime(e){return e?new Date(e).toLocaleString():"-"}getDuration(e,l){if(!e||!l)return"-";let a=new Date(l).getTime()-new Date(e).getTime(),m=Math.round(a/6e4);return m<60?`${m}m`:`${Math.floor(m/60)}h ${m%60}m`}toggleDetail(e){this.selectedConfirmation=this.selectedConfirmation===e?null:e}static{this.\u0275fac=function(l){return new(l||i)(S(k))}}static{this.\u0275cmp=E({type:i,selectors:[["app-production-history"]],decls:22,vars:7,consts:[["loadingTpl",""],["emptyTpl",""],[1,"production-history-page"],[1,"page-header"],[1,"card"],[1,"filters"],[1,"filter-group"],["for","status-filter"],["id","status-filter",3,"ngModelChange","change","ngModel"],["value","all"],[3,"value",4,"ngFor","ngForOf"],[1,"filter-group","search-group"],["for","search"],["type","text","id","search","placeholder","Search by operation, batch, notes...",3,"ngModelChange","input","ngModel"],["class","summary-cards",4,"ngIf"],["class","table-container",4,"ngIf","ngIfElse"],["class","detail-panel card",4,"ngIf"],[3,"value"],[1,"summary-cards"],[1,"summary-card"],[1,"count"],[1,"label"],[1,"summary-card","confirmed"],[1,"summary-card","pending"],[1,"summary-card","rejected"],[1,"table-container"],["class","data-table",4,"ngIf","ngIfElse"],["class","result-count",4,"ngIf"],[1,"data-table"],["class","clickable-row",3,"selected","rejected-row","click",4,"ngFor","ngForOf"],[1,"clickable-row",3,"click"],[1,"status-badge",3,"ngClass"],[1,"empty-state"],[1,"result-count"],[1,"loading"],[1,"detail-panel","card"],[1,"detail-header"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"detail-grid"],[1,"detail-section"],[1,"detail-row"],[1,"detail-label"],["class","detail-row",4,"ngIf"],["class","detail-section",4,"ngIf"],["class","detail-section rejection",4,"ngIf"],[4,"ngIf"],["class","detail-row",4,"ngFor","ngForOf"],[1,"detail-section","rejection"]],template:function(l,a){if(l&1){let m=h();n(0,"div",2)(1,"div",3)(2,"h1"),o(3,"Production History"),t()(),n(4,"div",4)(5,"div",5)(6,"div",6)(7,"label",7),o(8,"Status:"),t(),n(9,"select",8),$("ngModelChange",function(b){return _(m),H(a.filterStatus,b)||(a.filterStatus=b),x(b)}),v("change",function(){return _(m),x(a.onFilterStatusChange(a.filterStatus))}),n(10,"option",9),o(11,"All Statuses"),t(),p(12,mt,2,2,"option",10),t()(),n(13,"div",11)(14,"label",12),o(15,"Search:"),t(),n(16,"input",13),$("ngModelChange",function(b){return _(m),H(a.searchTerm,b)||(a.searchTerm=b),x(b)}),v("input",function(){return _(m),x(a.onSearchChange(a.searchTerm))}),t()()()(),p(17,pt,21,4,"div",14)(18,xt,5,3,"div",15)(19,vt,2,0,"ng-template",null,0,W)(21,wt,37,13,"div",16),t()}if(l&2){let m=j(20);r(9),z("ngModel",a.filterStatus),r(3),d("ngForOf",a.statuses),r(4),z("ngModel",a.searchTerm),r(),d("ngIf",!a.loading),r(),d("ngIf",!a.loading)("ngIfElse",m),r(3),d("ngIf",a.selectedConfirmation)}},dependencies:[O,I,M,T,w,B,A,L,ne],styles:[".production-history-page[_ngcontent-%COMP%]{padding:20px}.error-banner[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:12px 16px;border-radius:4px;margin-bottom:16px}.summary-cards[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:20px;flex-wrap:wrap}.summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px 24px;box-shadow:0 1px 3px #0000001a;text-align:center;min-width:120px;border-top:3px solid #dee2e6}.summary-card[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{display:block;font-size:24px;font-weight:700;color:#333}.summary-card[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:#666;text-transform:uppercase}.summary-card.confirmed[_ngcontent-%COMP%]{border-top-color:#388e3c}.summary-card.pending[_ngcontent-%COMP%]{border-top-color:#f57c00}.summary-card.rejected[_ngcontent-%COMP%]{border-top-color:#d32f2f}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 1px 3px #0000001a;overflow:hidden}.clickable-row[_ngcontent-%COMP%]{cursor:pointer;transition:background .15s}.clickable-row[_ngcontent-%COMP%]:hover{background:#f8f9fa}.clickable-row.selected[_ngcontent-%COMP%]{background:#e3f2fd}.rejected-row[_ngcontent-%COMP%]{background:#fff5f5}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500;text-transform:uppercase}.status-badge.confirmed[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-badge.pending-review[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.status-badge.partially-confirmed[_ngcontent-%COMP%]{background:#cce5ff;color:#004085}.status-badge.rejected[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.result-count[_ngcontent-%COMP%]{padding:12px 16px;border-top:1px solid #eee;font-size:13px;color:#666}.empty-state[_ngcontent-%COMP%], .loading[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.detail-panel[_ngcontent-%COMP%]{margin-top:20px}.detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.detail-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px}.detail-section[_ngcontent-%COMP%]{padding:12px;background:#f8f9fa;border-radius:6px}.detail-section.rejection[_ngcontent-%COMP%]{background:#fff5f5;border:1px solid #f8d7da}.detail-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;font-size:14px;color:#555;text-transform:uppercase;letter-spacing:.03em}.detail-row[_ngcontent-%COMP%]{padding:4px 0;font-size:14px}.detail-label[_ngcontent-%COMP%]{font-weight:500;color:#555}"]})}}return i})();function kt(i,s){i&1&&(n(0,"div",6),o(1,"Loading available orders..."),t())}function qt(i,s){if(i&1&&(n(0,"div",7),o(1),t()),i&2){let e=c();r(),u(e.error)}}function Nt(i,s){if(i&1&&(n(0,"option",21),o(1),t()),i&2){let e=s.$implicit;d("value",e.orderId),r(),C(" ",e.orderNumber," - ",e.customerName||e.customerId," ")}}function Rt(i,s){i&1&&(n(0,"span",22),o(1," No orders with ready operations available "),t())}function Ft(i,s){if(i&1&&(n(0,"option",21),o(1),t()),i&2){let e=s.$implicit;d("value",e.operationId),r(),C(" ",e.operationName," (",e.operationType||"Unknown Type",") ")}}function Dt(i,s){i&1&&(n(0,"span",22),o(1," No READY operations found for this order "),t())}function Vt(i,s){if(i&1){let e=h();n(0,"div",10)(1,"label",23),o(2,"Operation"),t(),n(3,"select",24),v("change",function(a){_(e);let m=c(2);return x(m.onOperationSelect(a))}),n(4,"option",13),o(5,"-- Select an Operation --"),t(),p(6,Ft,2,3,"option",14),t(),p(7,Dt,2,0,"span",15),t()}if(i&2){let e=c(2);r(6),d("ngForOf",e.readyOperations),r(),d("ngIf",e.readyOperations.length===0)}}function Bt(i,s){if(i&1){let e=h();n(0,"div",25)(1,"button",26),v("click",function(){_(e);let a=c(2);return x(a.startConfirmation())}),o(2," Start Production Confirmation "),t()()}}function Lt(i,s){if(i&1&&(n(0,"div",31)(1,"span",32),o(2),t(),n(3,"span",33),o(4),t()()),i&2){let e=s.$implicit;r(2),u(e.label),r(2),u(e.value)}}function At(i,s){if(i&1&&(n(0,"tr")(1,"td"),o(2),t(),n(3,"td"),o(4),t(),n(5,"td"),o(6),D(7,"date"),t(),n(8,"td")(9,"span",37),o(10),t()()()),i&2){let e=s.$implicit;r(2),u(e.productName||e.productSku),r(2),C("",e.quantity," ",e.unit,""),r(2),u(U(7,6,e.deliveryDate,"shortDate")),r(3),d("ngClass","status-"+(e.status==null?null:e.status.toLowerCase())),r(),g(" ",e.status," ")}}function Qt(i,s){if(i&1&&(n(0,"div",34)(1,"h4"),o(2,"Line Items"),t(),n(3,"table",35)(4,"thead")(5,"tr")(6,"th"),o(7,"Product"),t(),n(8,"th"),o(9,"Quantity"),t(),n(10,"th"),o(11,"Delivery Date"),t(),n(12,"th"),o(13,"Status"),t()()(),n(14,"tbody"),p(15,At,11,9,"tr",36),t()()()),i&2){let e=c(3);r(15),d("ngForOf",e.selectedOrder.lineItems)}}function jt(i,s){if(i&1&&(n(0,"div",27)(1,"h3"),o(2,"Order Details"),t(),n(3,"div",28),p(4,Lt,5,2,"div",29),t(),p(5,Qt,16,1,"div",30),t()),i&2){let e=c(2);r(4),d("ngForOf",e.orderContext),r(),d("ngIf",e.selectedOrder==null||e.selectedOrder.lineItems==null?null:e.selectedOrder.lineItems.length)}}function zt(i,s){if(i&1&&(n(0,"div",40)(1,"span",41),o(2,"Operation Type"),t(),n(3,"span",42),o(4),t()()),i&2){let e=c(3);r(4),u(e.selectedOperationDetails.operationType)}}function Ht(i,s){if(i&1&&(n(0,"div",40)(1,"span",41),o(2,"Operation Code"),t(),n(3,"span",42),o(4),t()()),i&2){let e=c(3);r(4),u(e.selectedOperationDetails.operationCode)}}function $t(i,s){if(i&1&&(n(0,"div",38)(1,"h3"),o(2,"Selected Operation"),t(),n(3,"div",39)(4,"div",40)(5,"span",41),o(6,"Operation Name"),t(),n(7,"span",42),o(8),t()(),p(9,zt,5,1,"div",43)(10,Ht,5,1,"div",43),n(11,"div",40)(12,"span",41),o(13,"Sequence"),t(),n(14,"span",42),o(15),t()(),n(16,"div",40)(17,"span",41),o(18,"Status"),t(),n(19,"span",44),o(20,"READY"),t()()()()),i&2){let e=c(2);r(8),u(e.selectedOperationDetails.operationName),r(),d("ngIf",e.selectedOperationDetails.operationType),r(),d("ngIf",e.selectedOperationDetails.operationCode),r(5),g("#",e.selectedOperationDetails.sequenceNumber,"")}}function Wt(i,s){if(i&1&&(n(0,"div",45)(1,"h3"),o(2,"Available for Production"),t(),n(3,"div",46)(4,"div",47)(5,"span",48),o(6),t(),n(7,"span",49),o(8,"Orders"),t()(),n(9,"div",47)(10,"span",48),o(11),t(),n(12,"span",49),o(13,"Ready Operations"),t()()()()),i&2){let e=c(2);r(6),u(e.availableOrders.length),r(5),u(e.getTotalReadyOperations())}}function Gt(i,s){if(i&1){let e=h();n(0,"div",8)(1,"div",9)(2,"h2"),o(3,"Select Order & Operation"),t(),n(4,"div",10)(5,"label",11),o(6,"Order"),t(),n(7,"select",12),v("change",function(a){_(e);let m=c();return x(m.onOrderSelect(a))}),n(8,"option",13),o(9,"-- Select an Order --"),t(),p(10,Nt,2,3,"option",14),t(),p(11,Rt,2,0,"span",15),t(),p(12,Vt,8,2,"div",16)(13,Bt,3,0,"div",17),t(),p(14,jt,6,2,"div",18)(15,$t,21,4,"div",19)(16,Wt,14,2,"div",20),t()}if(i&2){let e=c();r(10),d("ngForOf",e.availableOrders),r(),d("ngIf",e.availableOrders.length===0),r(),d("ngIf",e.selectedOrder),r(),d("ngIf",e.selectedOperationId),r(),d("ngIf",e.selectedOrder),r(),d("ngIf",e.selectedOperationDetails),r(),d("ngIf",!e.selectedOrder)}}var be=(()=>{class i{constructor(e,l){this.apiService=e,this.router=l,this.availableOrders=[],this.selectedOrder=null,this.readyOperations=[],this.selectedOperationId=null,this.loading=!0,this.error=""}ngOnInit(){this.loadAvailableOrders()}loadAvailableOrders(){this.loading=!0,this.apiService.getAvailableOrders().subscribe({next:e=>{this.availableOrders=e,this.loading=!1},error:e=>{this.error="Failed to load available orders",this.loading=!1,console.error("Error loading orders:",e)}})}onOrderSelect(e){let l=e.target.value;if(this.selectedOperationId=null,this.readyOperations=[],!l){this.selectedOrder=null;return}this.selectedOrder=this.availableOrders.find(a=>a.orderId===+l)||null,this.selectedOrder&&(this.readyOperations=this.extractReadyOperations(this.selectedOrder))}extractReadyOperations(e){let l=[];for(let a of e.lineItems||[])for(let m of a.processes||[])for(let f of m.operations||[])f.status==="READY"&&l.push({operationId:f.operationId,operationName:`${m.stageName} - ${f.operationName}`,operationCode:f.operationCode,operationType:f.operationType,sequenceNumber:f.sequenceNumber,status:f.status});return l}onOperationSelect(e){let l=e.target.value;this.selectedOperationId=l?+l:null}startConfirmation(){this.selectedOperationId&&this.router.navigate(["/production/confirm",this.selectedOperationId])}goToHistory(){this.router.navigate(["/production/history"])}get orderContext(){if(!this.selectedOrder)return[];let e=[{label:"Customer",value:this.selectedOrder.customerName||this.selectedOrder.customerId||"N/A"},{label:"Order Date",value:this.selectedOrder.orderDate?new Date(this.selectedOrder.orderDate).toLocaleDateString():"N/A"},{label:"Status",value:this.selectedOrder.status||"N/A"}],l=this.selectedOrder.lineItems||[];if(l.length>0){let a=l[0];e.push({label:"Product",value:a.productName||a.productSku||"N/A"},{label:"Quantity",value:`${a.quantity||0} ${a.unit||""}`}),a.deliveryDate&&e.push({label:"Due Date",value:new Date(a.deliveryDate).toLocaleDateString()})}return e}get selectedOperationDetails(){return this.selectedOperationId&&this.readyOperations.find(e=>e.operationId===this.selectedOperationId)||null}getTotalReadyOperations(){let e=0;for(let l of this.availableOrders)e+=this.extractReadyOperations(l).length;return e}static{this.\u0275fac=function(l){return new(l||i)(S(k),S(V))}}static{this.\u0275cmp=E({type:i,selectors:[["app-production-landing"]],decls:9,vars:3,consts:[[1,"production-landing-page"],[1,"page-header"],[1,"btn","btn-secondary",3,"click"],["class","loading",4,"ngIf"],["class","error-banner",4,"ngIf"],["class","content",4,"ngIf"],[1,"loading"],[1,"error-banner"],[1,"content"],[1,"selection-section"],[1,"form-group"],["for","orderSelect"],["id","orderSelect",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","help-text",4,"ngIf"],["class","form-group",4,"ngIf"],["class","form-actions",4,"ngIf"],["class","context-panel",4,"ngIf"],["class","operation-panel",4,"ngIf"],["class","stats-panel",4,"ngIf"],[3,"value"],[1,"help-text"],["for","operationSelect"],["id","operationSelect",3,"change"],[1,"form-actions"],[1,"btn","btn-primary",3,"click"],[1,"context-panel"],[1,"context-grid"],["class","context-item",4,"ngFor","ngForOf"],["class","line-items-summary",4,"ngIf"],[1,"context-item"],[1,"context-label"],[1,"context-value"],[1,"line-items-summary"],[1,"summary-table"],[4,"ngFor","ngForOf"],[1,"status-badge",3,"ngClass"],[1,"operation-panel"],[1,"operation-details"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],["class","detail-row",4,"ngIf"],[1,"status-badge","status-ready"],[1,"stats-panel"],[1,"stat-cards"],[1,"stat-card"],[1,"stat-value"],[1,"stat-label"]],template:function(l,a){l&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),o(3,"Production Confirmation"),t(),n(4,"button",2),v("click",function(){return a.goToHistory()}),o(5," View History "),t()(),p(6,kt,2,0,"div",3)(7,qt,2,1,"div",4)(8,Gt,17,7,"div",5),t()),l&2&&(r(6),d("ngIf",a.loading),r(),d("ngIf",a.error),r(),d("ngIf",!a.loading&&!a.error))},dependencies:[O,I,M,T,w,X],styles:[".production-landing-page[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;color:#333}.loading[_ngcontent-%COMP%], .error-banner[_ngcontent-%COMP%]{text-align:center;padding:40px 20px}.error-banner[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border-radius:8px}.content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:24px}.selection-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 1px 3px #0000001a;padding:24px}.selection-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 20px;font-size:18px;color:#333;padding-bottom:12px;border-bottom:1px solid #eee}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500;color:#555}.form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #ddd;border-radius:4px;font-size:14px;background:#fff;cursor:pointer}.form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#1976d2}.help-text[_ngcontent-%COMP%]{display:block;margin-top:6px;font-size:12px;color:#666;font-style:italic}.form-actions[_ngcontent-%COMP%]{margin-top:24px;padding-top:16px;border-top:1px solid #eee}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;font-size:14px;font-weight:500;transition:background .2s}.btn-primary[_ngcontent-%COMP%]{background:#1976d2;color:#fff;width:100%}.btn-primary[_ngcontent-%COMP%]:hover{background:#1565c0}.btn-secondary[_ngcontent-%COMP%]{background:#757575;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background:#616161}.context-panel[_ngcontent-%COMP%], .operation-panel[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 1px 3px #0000001a;padding:24px}.context-panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .operation-panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;color:#333;padding-bottom:12px;border-bottom:1px solid #eee}.context-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.context-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.context-label[_ngcontent-%COMP%]{font-size:12px;color:#666;text-transform:uppercase;letter-spacing:.5px}.context-value[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500}.line-items-summary[_ngcontent-%COMP%]{margin-top:20px;padding-top:16px;border-top:1px solid #eee}.line-items-summary[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:14px;color:#555}.summary-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:13px}.summary-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .summary-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 10px;text-align:left;border-bottom:1px solid #eee}.summary-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#fafafa;font-weight:600;color:#555}.operation-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.detail-label[_ngcontent-%COMP%]{font-size:13px;color:#666}.detail-value[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;border-radius:4px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.status-ready[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.status-in_progress[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.status-completed[_ngcontent-%COMP%]{background:#f3e5f5;color:#7b1fa2}.status-created[_ngcontent-%COMP%]{background:#fff3e0;color:#ef6c00}.stats-panel[_ngcontent-%COMP%]{grid-column:2;background:#fff;border-radius:8px;box-shadow:0 1px 3px #0000001a;padding:24px}.stats-panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;color:#333}.stat-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.stat-card[_ngcontent-%COMP%]{background:#f5f5f5;border-radius:8px;padding:20px;text-align:center}.stat-value[_ngcontent-%COMP%]{display:block;font-size:32px;font-weight:700;color:#1976d2}.stat-label[_ngcontent-%COMP%]{display:block;font-size:13px;color:#666;margin-top:4px}@media (max-width: 768px){.content[_ngcontent-%COMP%], .context-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.stats-panel[_ngcontent-%COMP%]{grid-column:1}}"]})}}return i})();var Yt=[{path:"",component:be},{path:"confirm/:operationId",component:Ce},{path:"history",component:he}],ye=(()=>{class i{static{this.\u0275fac=function(l){return new(l||i)}}static{this.\u0275mod=F({type:i})}static{this.\u0275inj=R({imports:[G.forChild(Yt),G]})}}return i})();var xn=(()=>{class i{static{this.\u0275fac=function(l){return new(l||i)}}static{this.\u0275mod=F({type:i})}static{this.\u0275inj=R({imports:[Z,me,pe,ye,fe]})}}return i})();export{xn as ProductionModule};

import{d as k,e as ee,f as te,g as ne}from"./chunk-SQLROUBB.js";import{d as w}from"./chunk-IGUV3I34.js";import"./chunk-ZJVCWRNR.js";import{$ as O,Aa as G,D as v,Da as Q,E as u,F as d,Ga as W,Ha as Z,Ia as J,Ja as K,K as i,L as _,M as f,N as L,Na as X,Q as V,R as D,S as A,W as b,Y as E,aa as F,ba as M,ea as T,g as S,ga as B,i as H,j as I,l as m,m as g,na as z,o as l,p as y,pa as $,r as h,sa as N,t as s,va as j,wa as P,x as n,xa as q,y as t,ya as U,z as x,za as Y}from"./chunk-JI6OXINY.js";function ce(o,c){if(o&1&&(n(0,"div",9),i(1),t()),o&2){let e=d();l(),_(e.error)}}function pe(o,c){if(o&1&&(n(0,"div",10),i(1),t()),o&2){let e=d();l(),_(e.success)}}function me(o,c){o&1&&(n(0,"div",11),x(1,"app-loading-spinner",12),t())}function ge(o,c){if(o&1){let e=v();n(0,"button",37),u("click",function(){m(e);let r=d().$implicit,p=d(3);return g(p.openReleaseHoldModal(r))}),i(1," Release "),t()}}function ue(o,c){o&1&&(n(0,"span",38),i(1,"-"),t())}function he(o,c){if(o&1&&(n(0,"tr")(1,"td")(2,"span",33),i(3),t()(),n(4,"td"),i(5),t(),n(6,"td"),i(7),t(),n(8,"td"),x(9,"app-status-badge",34),t(),n(10,"td"),i(11),t(),n(12,"td"),i(13),b(14,"date"),t(),n(15,"td"),i(16),t(),n(17,"td"),h(18,ge,2,0,"button",35)(19,ue,2,0,"span",36),t()()),o&2){let e=c.$implicit,a=d(3);l(2),s("ngClass",e.entityType.toLowerCase()),l(),f(" ",e.entityType," "),l(2),_(e.entityName),l(2),_(e.reason),l(2),s("status",e.status),l(2),_(e.appliedBy),l(2),_(E(14,10,e.appliedOn,"short")),l(3),_(a.formatDuration(e.durationMinutes)),l(2),s("ngIf",e.status==="ACTIVE"),l(),s("ngIf",e.status!=="ACTIVE")}}function _e(o,c){if(o&1&&(n(0,"table",31)(1,"thead")(2,"tr")(3,"th"),i(4,"Entity Type"),t(),n(5,"th"),i(6,"Entity"),t(),n(7,"th"),i(8,"Reason"),t(),n(9,"th"),i(10,"Status"),t(),n(11,"th"),i(12,"Applied By"),t(),n(13,"th"),i(14,"Applied On"),t(),n(15,"th"),i(16,"Duration"),t(),n(17,"th"),i(18,"Actions"),t()()(),n(19,"tbody"),h(20,he,20,13,"tr",32),t()()),o&2){let e=d(2);l(20),s("ngForOf",e.holds)}}function fe(o,c){o&1&&(n(0,"p",39),i(1," No holds found matching the selected filters. "),t())}function xe(o,c){if(o&1){let e=v();n(0,"app-pagination",40),u("pageChange",function(r){m(e);let p=d(2);return g(p.onPageChange(r))})("sizeChange",function(r){m(e);let p=d(2);return g(p.onSizeChange(r))}),t()}if(o&2){let e=d(2);s("page",e.page)("size",e.size)("totalElements",e.totalElements)("totalPages",e.totalPages)("hasNext",e.hasNext)("hasPrevious",e.hasPrevious)}}function ve(o,c){if(o&1){let e=v();n(0,"div")(1,"div",13)(2,"div",14)(3,"div",15)(4,"label"),i(5,"Status:"),t(),n(6,"select",16),u("change",function(r){m(e);let p=d();return g(p.onFilterStatusChange(r.target.value))}),n(7,"option",17),i(8,"All Statuses"),t(),n(9,"option",18),i(10,"Active"),t(),n(11,"option",19),i(12,"Released"),t()()(),n(13,"div",15)(14,"label"),i(15,"Entity Type:"),t(),n(16,"select",16),u("change",function(r){m(e);let p=d();return g(p.onFilterEntityTypeChange(r.target.value))}),n(17,"option",17),i(18,"All Types"),t(),n(19,"option",20),i(20,"Operation"),t(),n(21,"option",21),i(22,"Process"),t(),n(23,"option",22),i(24,"Order Line"),t(),n(25,"option",23),i(26,"Inventory"),t(),n(27,"option",24),i(28,"Batch"),t(),n(29,"option",25),i(30,"Equipment"),t()()(),n(31,"div",26)(32,"label"),i(33,"Search:"),t(),n(34,"input",27),u("input",function(r){m(e);let p=d();return g(p.onSearchChange(r.target.value))}),t()()()(),n(35,"div",13),h(36,_e,21,1,"table",28)(37,fe,2,0,"p",29)(38,xe,1,6,"app-pagination",30),t()()}if(o&2){let e=d();l(6),s("value",e.filterStatus||"all"),l(10),s("value",e.filterEntityType||"all"),l(18),s("value",e.searchTerm),l(2),s("ngIf",e.holds.length>0),l(),s("ngIf",e.holds.length===0),l(),s("ngIf",e.holds.length>0)}}function ye(o,c){if(o&1&&(n(0,"option",61),i(1),t()),o&2){let e=c.$implicit;s("value",e.value),l(),f(" ",e.label," ")}}function Ce(o,c){if(o&1&&(n(0,"option",61),i(1),t()),o&2){let e=c.$implicit;s("value",e.id),l(),f(" ",e.name," ")}}function be(o,c){if(o&1&&(n(0,"div",48)(1,"label",62),i(2,"Entity *"),t(),n(3,"select",63)(4,"option",51),i(5,"Select entity"),t(),h(6,Ce,2,2,"option",52),t()()),o&2){let e=d(2);l(6),s("ngForOf",e.getEntityOptions())}}function Ee(o,c){if(o&1&&(n(0,"option",61),i(1),t()),o&2){let e=c.$implicit;s("value",e.reasonCode),l(),f(" ",e.reasonDescription," ")}}function Se(o,c){if(o&1){let e=v();n(0,"div",41),u("click",function(){m(e);let r=d();return g(r.closeApplyHoldModal())}),n(1,"div",42),u("click",function(r){return m(e),g(r.stopPropagation())}),n(2,"div",43)(3,"h3"),i(4,"Apply Hold"),t(),n(5,"button",44),u("click",function(){m(e);let r=d();return g(r.closeApplyHoldModal())}),x(6,"i",45),t()(),n(7,"form",46),u("ngSubmit",function(){m(e);let r=d();return g(r.applyHold())}),n(8,"div",47)(9,"div",48)(10,"label",49),i(11,"Entity Type *"),t(),n(12,"select",50)(13,"option",51),i(14,"Select entity type"),t(),h(15,ye,2,2,"option",52),t()(),h(16,be,7,1,"div",53),n(17,"div",48)(18,"label",54),i(19,"Reason *"),t(),n(20,"select",55)(21,"option",51),i(22,"Select reason"),t(),h(23,Ee,2,2,"option",52),t()(),n(24,"div",48)(25,"label",56),i(26,"Comments"),t(),x(27,"textarea",57),t()(),n(28,"div",58)(29,"button",59),u("click",function(){m(e);let r=d();return g(r.closeApplyHoldModal())}),i(30,"Cancel"),t(),n(31,"button",60),i(32," Apply Hold "),t()()()()()}if(o&2){let e,a=d();l(7),s("formGroup",a.applyHoldForm),l(8),s("ngForOf",a.entityTypes),l(),s("ngIf",(e=a.applyHoldForm.get("entityType"))==null?null:e.value),l(7),s("ngForOf",a.holdReasons),l(8),s("disabled",a.applyHoldForm.invalid||a.loading)}}function He(o,c){if(o&1&&(n(0,"div",68)(1,"p")(2,"strong"),i(3,"Entity:"),t(),i(4),t(),n(5,"p")(6,"strong"),i(7,"Reason:"),t(),i(8),t(),n(9,"p")(10,"strong"),i(11,"Applied By:"),t(),i(12),t(),n(13,"p")(14,"strong"),i(15,"Duration:"),t(),i(16),t()()),o&2){let e=d(2);l(4),L(" ",e.selectedHold.entityType," - ",e.selectedHold.entityName,""),l(4),f(" ",e.selectedHold.reason,""),l(4),f(" ",e.selectedHold.appliedBy,""),l(4),f(" ",e.formatDuration(e.selectedHold.durationMinutes),"")}}function Ie(o,c){if(o&1){let e=v();n(0,"div",41),u("click",function(){m(e);let r=d();return g(r.closeReleaseHoldModal())}),n(1,"div",42),u("click",function(r){return m(e),g(r.stopPropagation())}),n(2,"div",43)(3,"h3"),i(4,"Release Hold"),t(),n(5,"button",44),u("click",function(){m(e);let r=d();return g(r.closeReleaseHoldModal())}),x(6,"i",45),t()(),n(7,"div",47),h(8,He,17,5,"div",64),n(9,"div",48)(10,"label",65),i(11,"Release Comments"),t(),n(12,"textarea",66),A("ngModelChange",function(r){m(e);let p=d();return D(p.releaseComments,r)||(p.releaseComments=r),g(r)}),t()()(),n(13,"div",58)(14,"button",59),u("click",function(){m(e);let r=d();return g(r.closeReleaseHoldModal())}),i(15,"Cancel"),t(),n(16,"button",67),u("click",function(){m(e);let r=d();return g(r.releaseHold())}),i(17," Release Hold "),t()()()()}if(o&2){let e=d();l(8),s("ngIf",e.selectedHold),l(4),V("ngModel",e.releaseComments),l(4),s("disabled",e.loading)}}var ie=(()=>{class o{constructor(e,a){this.apiService=e,this.fb=a,this.holds=[],this.holdReasons=[],this.loading=!1,this.error="",this.success="",this.page=0,this.size=20,this.totalElements=0,this.totalPages=0,this.hasNext=!1,this.hasPrevious=!1,this.filterStatus="",this.filterEntityType="",this.searchTerm="",this.showApplyHoldModal=!1,this.showReleaseHoldModal=!1,this.selectedHold=null,this.releaseComments="",this.entityTypes=[{value:"OPERATION",label:"Operation"},{value:"PROCESS",label:"Process"},{value:"ORDER_LINE",label:"Order Line"},{value:"INVENTORY",label:"Inventory"},{value:"BATCH",label:"Batch"}],this.operations=[],this.processes=[],this.inventory=[],this.batches=[],this.applyHoldForm=this.fb.group({entityType:["",P.required],entityId:["",P.required],reason:["",P.required],comments:[""]})}ngOnInit(){this.loadHolds(),this.loadHoldReasons(),this.loadEntities()}loadHolds(){this.loading=!0;let e={page:this.page,size:this.size,sortBy:"appliedOn",sortDirection:"DESC",status:this.filterStatus||void 0,type:this.filterEntityType||void 0,search:this.searchTerm||void 0};this.apiService.getHoldsPaged(e).subscribe({next:a=>{this.holds=a.content,this.page=a.page,this.size=a.size,this.totalElements=a.totalElements,this.totalPages=a.totalPages,this.hasNext=a.hasNext,this.hasPrevious=a.hasPrevious,this.loading=!1},error:a=>{console.error("Error loading holds:",a),this.error="Failed to load holds",this.loading=!1}})}onPageChange(e){this.page=e,this.loadHolds()}onSizeChange(e){this.size=e,this.page=0,this.loadHolds()}onFilterStatusChange(e){this.filterStatus=e==="all"?"":e,this.page=0,this.loadHolds()}onFilterEntityTypeChange(e){this.filterEntityType=e==="all"?"":e,this.page=0,this.loadHolds()}onSearchChange(e){this.searchTerm=e,this.page=0,this.loadHolds()}loadHoldReasons(){this.apiService.getHoldReasons().subscribe({next:e=>{this.holdReasons=e},error:e=>console.error("Error loading hold reasons:",e)})}loadEntities(){this.apiService.getAvailableOrders().subscribe({next:e=>{this.operations=[],e.forEach(a=>{a.lineItems?.forEach(r=>{r.processes?.forEach(p=>{p.operations?.forEach(C=>{C.status!=="ON_HOLD"&&C.status!=="CONFIRMED"&&this.operations.push({id:C.operationId,name:`${C.operationName} (Order: ${a.orderId})`})}),p.status!=="ON_HOLD"&&p.status!=="COMPLETED"&&this.processes.push({id:p.processId,name:`${p.stageName} (Order: ${a.orderId})`})})})})},error:e=>console.error("Error loading operations:",e)}),this.apiService.getAllInventory().subscribe({next:e=>{this.inventory=e.filter(a=>a.state!=="ON_HOLD"&&a.state!=="CONSUMED").map(a=>({id:a.inventoryId,name:`${a.materialId} - ${a.materialName} (${a.quantity} ${a.unit})`}))},error:e=>console.error("Error loading inventory:",e)}),this.apiService.getAllBatches().subscribe({next:e=>{this.batches=e.filter(a=>a.status!=="ON_HOLD"&&a.status!=="CONSUMED").map(a=>({id:a.batchId,name:`${a.batchNumber} - ${a.materialName}`}))},error:e=>console.error("Error loading batches:",e)})}getEntityOptions(){switch(this.applyHoldForm.get("entityType")?.value){case"OPERATION":return this.operations;case"PROCESS":return this.processes;case"INVENTORY":return this.inventory;case"BATCH":return this.batches;default:return[]}}openApplyHoldModal(){this.applyHoldForm.reset(),this.showApplyHoldModal=!0,this.error="",this.success=""}closeApplyHoldModal(){this.showApplyHoldModal=!1}openReleaseHoldModal(e){this.selectedHold=e,this.releaseComments="",this.showReleaseHoldModal=!0,this.error="",this.success=""}closeReleaseHoldModal(){this.showReleaseHoldModal=!1,this.selectedHold=null}applyHold(){if(this.applyHoldForm.invalid)return;let e=this.applyHoldForm.value;this.loading=!0,this.error="",this.apiService.applyHold(e).subscribe({next:()=>{this.success="Hold applied successfully",this.closeApplyHoldModal(),this.loadHolds(),this.loadEntities(),this.loading=!1},error:a=>{console.error("Error applying hold:",a),this.error=a.error?.message||"Failed to apply hold",this.loading=!1}})}releaseHold(){this.selectedHold&&(this.loading=!0,this.error="",this.apiService.releaseHold(this.selectedHold.holdId,this.releaseComments).subscribe({next:()=>{this.success="Hold released successfully",this.closeReleaseHoldModal(),this.loadHolds(),this.loadEntities(),this.loading=!1},error:e=>{console.error("Error releasing hold:",e),this.error=e.error?.message||"Failed to release hold",this.loading=!1}}))}formatDuration(e){if(!e)return"-";let a=Math.floor(e/60),r=e%60;return a>0?`${a}h ${r}m`:`${r}m`}static{this.\u0275fac=function(a){return new(a||o)(y(w),y(X))}}static{this.\u0275cmp=H({type:o,selectors:[["app-hold-list"]],decls:12,vars:6,consts:[[1,"container"],[1,"page-header"],[1,"page-title"],[1,"btn","btn-primary",3,"click"],["class","alert alert-error",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["class","text-center",4,"ngIf"],[4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"alert","alert-error"],[1,"alert","alert-success"],[1,"text-center"],["message","Loading holds..."],[1,"card"],[1,"filters"],[1,"filter-group"],[3,"change","value"],["value","all"],["value","ACTIVE"],["value","RELEASED"],["value","OPERATION"],["value","PROCESS"],["value","ORDER_LINE"],["value","INVENTORY"],["value","BATCH"],["value","EQUIPMENT"],[1,"filter-group","search-group"],["type","text","placeholder","Search by reason or comments...",3,"input","value"],["class","table",4,"ngIf"],["class","no-data",4,"ngIf"],[3,"page","size","totalElements","totalPages","hasNext","hasPrevious","pageChange","sizeChange",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],[1,"entity-type-badge",3,"ngClass"],[3,"status"],["class","btn btn-sm btn-success",3,"click",4,"ngIf"],["class","text-muted",4,"ngIf"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"text-muted"],[1,"no-data"],[3,"pageChange","sizeChange","page","size","totalElements","totalPages","hasNext","hasPrevious"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-xmark"],[3,"ngSubmit","formGroup"],[1,"modal-body"],[1,"form-group"],["for","entityType"],["id","entityType","formControlName","entityType"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],["for","reason"],["id","reason","formControlName","reason"],["for","comments"],["id","comments","formControlName","comments","rows","3"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-warning",3,"disabled"],[3,"value"],["for","entityId"],["id","entityId","formControlName","entityId"],["class","hold-details",4,"ngIf"],["for","releaseComments"],["id","releaseComments","rows","3",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-success",3,"click","disabled"],[1,"hold-details"]],template:function(a,r){a&1&&(n(0,"div",0)(1,"div",1)(2,"h1",2),i(3,"Hold Management"),t(),n(4,"button",3),u("click",function(){return r.openApplyHoldModal()}),i(5," Apply Hold "),t()(),h(6,ce,2,1,"div",4)(7,pe,2,1,"div",5)(8,me,2,0,"div",6)(9,ve,39,6,"div",7),t(),h(10,Se,33,5,"div",8)(11,Ie,18,3,"div",8)),a&2&&(l(6),s("ngIf",r.error),l(),s("ngIf",r.success),l(),s("ngIf",r.loading),l(),s("ngIf",!r.loading),l(),s("ngIf",r.showApplyHoldModal),l(),s("ngIf",r.showReleaseHoldModal))},dependencies:[O,F,M,G,J,K,j,Z,q,U,Y,Q,W,k,ee,te,T],styles:[".hold-list-container[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#333}.holds-table[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;overflow:hidden}.holds-table[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.holds-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .holds-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #e0e0e0}.holds-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f5f5f5;font-weight:600;color:#333}.holds-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#fafafa}.entity-type-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500;text-transform:uppercase}.entity-type-badge.operation[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}.entity-type-badge.process[_ngcontent-%COMP%]{background-color:#f3e5f5;color:#7b1fa2}.entity-type-badge.order_line[_ngcontent-%COMP%]{background-color:#fff3e0;color:#f57c00}.entity-type-badge.inventory[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#388e3c}.entity-type-badge.batch[_ngcontent-%COMP%]{background-color:#fce4ec;color:#c2185b}.entity-type-badge.equipment[_ngcontent-%COMP%]{background-color:#e0f2f1;color:#00796b}.hold-details[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:16px;border-radius:4px;margin-bottom:16px}.hold-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px}"]})}}return o})();function Oe(o,c){if(o&1){let e=v();n(0,"div",9)(1,"button",10),u("click",function(){m(e);let r=d();return g(r.releaseHold())}),x(2,"i",11),i(3),t()()}if(o&2){let e=d();l(),s("disabled",e.releasing),l(2),f(" ",e.releasing?"Releasing...":"Release Hold"," ")}}function Me(o,c){o&1&&(n(0,"div",12),x(1,"app-loading-spinner",13),t())}function Te(o,c){if(o&1&&(n(0,"div",14),i(1),t()),o&2){let e=d();l(),f(" ",e.error," ")}}function Pe(o,c){if(o&1&&(n(0,"div",23)(1,"span",24),i(2,"Entity Name"),t(),n(3,"span",25),i(4),t()()),o&2){let e=d(2);l(4),_(e.hold.entityName)}}function we(o,c){if(o&1&&(n(0,"div",23)(1,"span",24),i(2,"Duration"),t(),n(3,"span",25),i(4),t()()),o&2){let e=d(2);l(4),_(e.formatDuration(e.hold.durationMinutes))}}function ke(o,c){if(o&1&&(n(0,"div",31)(1,"span",32),i(2,"Comments:"),t(),i(3),t()),o&2){let e=d(2);l(3),f(" ",e.hold.comments," ")}}function Ne(o,c){if(o&1&&(n(0,"div",34)(1,"span",32),i(2,"Release Comments:"),t(),i(3),t()),o&2){let e=d(3);l(3),f(" ",e.hold.releaseComments," ")}}function Re(o,c){if(o&1&&(n(0,"div",22)(1,"h3"),i(2,"Release Information"),t(),n(3,"div",23)(4,"span",24),i(5,"Released By"),t(),n(6,"span",25),i(7),t()(),n(8,"div",23)(9,"span",24),i(10,"Released On"),t(),n(11,"span",25),i(12),b(13,"date"),t()(),h(14,Ne,4,1,"div",33),t()),o&2){let e=d(2);l(7),_(e.hold.releasedBy),l(5),_(E(13,3,e.hold.releasedOn,"medium")),l(2),s("ngIf",e.hold.releaseComments)}}function Le(o,c){if(o&1){let e=v();n(0,"div",15)(1,"div",16)(2,"div",17)(3,"div",18)(4,"h2"),i(5),t(),n(6,"span",19),i(7),t()(),n(8,"span",20),i(9),t()(),n(10,"div",21)(11,"div",22)(12,"h3"),i(13,"Hold Information"),t(),n(14,"div",23)(15,"span",24),i(16,"Hold ID"),t(),n(17,"span",25),i(18),t()(),n(19,"div",23)(20,"span",24),i(21,"Entity Type"),t(),n(22,"span",25),i(23),t()(),n(24,"div",23)(25,"span",24),i(26,"Entity ID"),t(),n(27,"span",26),u("click",function(){m(e);let r=d();return g(r.navigateToEntity())}),i(28),t()(),h(29,Pe,5,1,"div",27)(30,we,5,1,"div",27),t(),n(31,"div",22)(32,"h3"),i(33,"Reason"),t(),n(34,"div",28),i(35),t(),h(36,ke,4,1,"div",29),t(),n(37,"div",22)(38,"h3"),i(39,"Applied By"),t(),n(40,"div",23)(41,"span",24),i(42,"Applied By"),t(),n(43,"span",25),i(44),t()(),n(45,"div",23)(46,"span",24),i(47,"Applied On"),t(),n(48,"span",25),i(49),b(50,"date"),t()()(),h(51,Re,15,6,"div",30),t()()()}if(o&2){let e=d();l(5),f("Hold #",e.hold.holdId,""),l(),s("ngClass",e.getEntityTypeClass(e.hold.entityType)),l(),f(" ",e.getEntityTypeLabel(e.hold.entityType)," "),l(),s("ngClass",e.getStatusClass(e.hold.status)),l(),f(" ",e.hold.status," "),l(9),_(e.hold.holdId),l(5),_(e.getEntityTypeLabel(e.hold.entityType)),l(5),_(e.hold.entityId),l(),s("ngIf",e.hold.entityName),l(),s("ngIf",e.hold.durationMinutes),l(5),f(" ",e.hold.reason," "),l(),s("ngIf",e.hold.comments),l(8),_(e.hold.appliedBy),l(5),_(E(50,15,e.hold.appliedOn,"medium")),l(2),s("ngIf",e.hold.status==="RELEASED")}}var oe=(()=>{class o{constructor(e,a,r){this.route=e,this.router=a,this.apiService=r,this.hold=null,this.loading=!0,this.error=null,this.releasing=!1,this.entityTypeLabels={ORDER:"Order",OPERATION:"Operation",BATCH:"Batch",INVENTORY:"Inventory",EQUIPMENT:"Equipment"}}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e?this.loadHold(+e):(this.error="No hold ID provided",this.loading=!1)}loadHold(e){this.loading=!0,this.error=null,this.apiService.getHoldById(e).subscribe({next:a=>{this.hold=a,this.loading=!1},error:a=>{console.error("Error loading hold:",a),this.error="Failed to load hold",this.loading=!1}})}goBack(){this.router.navigate(["/holds"])}getStatusClass(e){switch(e?.toUpperCase()){case"ACTIVE":return"status-active";case"RELEASED":return"status-released";default:return""}}getEntityTypeLabel(e){return this.entityTypeLabels[e]||e}getEntityTypeClass(e){switch(e?.toUpperCase()){case"ORDER":return"entity-order";case"OPERATION":return"entity-operation";case"BATCH":return"entity-batch";case"INVENTORY":return"entity-inventory";case"EQUIPMENT":return"entity-equipment";default:return""}}navigateToEntity(){if(this.hold)switch(this.hold.entityType){case"ORDER":this.router.navigate(["/orders",this.hold.entityId]);break;case"BATCH":this.router.navigate(["/batches",this.hold.entityId]);break;case"INVENTORY":this.router.navigate(["/inventory",this.hold.entityId]);break;case"EQUIPMENT":this.router.navigate(["/equipment",this.hold.entityId]);break}}releaseHold(){if(!this.hold||this.hold.status!=="ACTIVE")return;let e=prompt("Enter release comments (optional):");this.releasing=!0,this.apiService.releaseHold(this.hold.holdId,e||void 0).subscribe({next:()=>{this.releasing=!1,this.loadHold(this.hold.holdId)},error:a=>{this.releasing=!1,console.error("Error releasing hold:",a),this.error="Failed to release hold"}})}formatDuration(e){if(!e)return"-";if(e<60)return`${e} min`;let a=Math.floor(e/60),r=e%60;if(a<24)return`${a}h ${r}m`;let p=Math.floor(a/24),C=a%24;return`${p}d ${C}h`}static{this.\u0275fac=function(a){return new(a||o)(y(z),y($),y(w))}}static{this.\u0275cmp=H({type:o,selectors:[["app-hold-detail"]],decls:12,vars:4,consts:[[1,"detail-container"],[1,"page-header"],[1,"header-left"],[1,"btn","btn-back",3,"click"],[1,"fas","fa-arrow-left"],["class","header-actions",4,"ngIf"],["class","loading",4,"ngIf"],["class","error-message",4,"ngIf"],["class","detail-content",4,"ngIf"],[1,"header-actions"],[1,"btn","btn-success",3,"click","disabled"],[1,"fas","fa-unlock"],[1,"loading"],["message","Loading hold..."],[1,"error-message"],[1,"detail-content"],[1,"detail-card"],[1,"card-header"],[1,"header-title"],[1,"entity-badge",3,"ngClass"],[1,"status-badge",3,"ngClass"],[1,"detail-grid"],[1,"detail-section"],[1,"detail-row"],[1,"label"],[1,"value"],[1,"value","link",3,"click"],["class","detail-row",4,"ngIf"],[1,"reason-box"],["class","comments-box",4,"ngIf"],["class","detail-section",4,"ngIf"],[1,"comments-box"],[1,"comments-label"],["class","release-comments",4,"ngIf"],[1,"release-comments"]],template:function(a,r){a&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),u("click",function(){return r.goBack()}),x(4,"i",4),i(5," Back "),t(),n(6,"h1"),i(7,"Hold Details"),t()(),h(8,Oe,4,2,"div",5),t(),h(9,Me,2,0,"div",6)(10,Te,2,1,"div",7)(11,Le,52,18,"div",8),t()),a&2&&(l(8),s("ngIf",r.hold&&r.hold.status==="ACTIVE"),l(),s("ngIf",r.loading),l(),s("ngIf",r.error),l(),s("ngIf",!r.loading&&r.hold))},dependencies:[O,M,k,T],styles:[".detail-container[_ngcontent-%COMP%]{padding:24px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;color:#1e293b}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:48px}.error-message[_ngcontent-%COMP%]{background:#fef2f2;border:1px solid #fecaca;color:#dc2626;padding:12px 16px;border-radius:8px;margin-bottom:16px}.detail-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.detail-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:8px;overflow:hidden}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;background:#f8fafc;border-bottom:1px solid #e2e8f0}.header-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:#1e293b}.detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:24px;padding:24px}.detail-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.detail-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;font-weight:600;color:#64748b;text-transform:uppercase;letter-spacing:.05em}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #f1f5f9}.detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.label[_ngcontent-%COMP%]{color:#64748b;font-size:14px}.value[_ngcontent-%COMP%]{color:#1e293b;font-weight:500;font-size:14px}.value.link[_ngcontent-%COMP%]{color:#3b82f6;cursor:pointer}.value.link[_ngcontent-%COMP%]:hover{text-decoration:underline}.reason-box[_ngcontent-%COMP%]{padding:16px;background:#fef3c7;border:1px solid #fcd34d;border-radius:8px;color:#92400e;font-size:14px;line-height:1.6}.comments-box[_ngcontent-%COMP%], .release-comments[_ngcontent-%COMP%]{padding:12px;background:#f8fafc;border-radius:6px;font-size:14px;color:#475569;margin-top:8px}.comments-label[_ngcontent-%COMP%]{font-weight:600;color:#64748b;display:block;margin-bottom:4px}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500;text-transform:uppercase}.status-active[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626}.status-released[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.entity-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:6px;font-size:12px;font-weight:500}.entity-order[_ngcontent-%COMP%]{background:#dbeafe;color:#1d4ed8}.entity-operation[_ngcontent-%COMP%]{background:#f3e8ff;color:#7c3aed}.entity-batch[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.entity-inventory[_ngcontent-%COMP%]{background:#fef3c7;color:#b45309}.entity-equipment[_ngcontent-%COMP%]{background:#f1f5f9;color:#475569}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .2s}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-back[_ngcontent-%COMP%]{background:transparent;color:#64748b;padding:8px 12px}.btn-back[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:#1e293b}.btn-success[_ngcontent-%COMP%]{background:#dcfce7;color:#166534;border:1px solid #bbf7d0}.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background:#bbf7d0}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.detail-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return o})();var Ve=[{path:"",component:ie},{path:":id",component:oe}],ae=(()=>{class o{static{this.\u0275fac=function(a){return new(a||o)}}static{this.\u0275mod=I({type:o})}static{this.\u0275inj=S({imports:[N.forChild(Ve),N]})}}return o})();var nt=(()=>{class o{static{this.\u0275fac=function(a){return new(a||o)}}static{this.\u0275mod=I({type:o})}static{this.\u0275inj=S({imports:[B,ae,ne]})}}return o})();export{nt as HoldsModule};

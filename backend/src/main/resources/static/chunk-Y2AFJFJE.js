import{h as S,i as U,k as ne,n as re}from"./chunk-LMWWBC6Z.js";import{$ as T,$a as ie,Aa as I,B as d,D as G,Da as $,F as i,G as t,H as x,Ha as D,Ia as E,Ja as z,Ka as Q,L as v,La as R,M as p,Ma as X,N as c,Pa as Y,Sa as Z,T as a,Ta as j,U as _,Ua as B,V as C,Va as q,Z as O,Za as ee,_ as k,_a as te,da as P,fa as y,ia as N,ja as J,ka as M,m as V,o as w,oa as A,p as F,qa as K,r as u,s as g,w as s,x as h,ya as L,z as f}from"./chunk-SXRLIX2W.js";function ue(n,m){if(n&1&&(i(0,"div",17),a(1),t()),n&2){let e=c();s(),C(" ",e.error," ")}}function ge(n,m){n&1&&(i(0,"div",18),x(1,"app-loading-spinner",19),t())}function fe(n,m){n&1&&(i(0,"div",20)(1,"p"),a(2,"No users found."),t()())}function _e(n,m){if(n&1){let e=v();i(0,"button",32),p("click",function(){u(e);let r=c().$implicit,l=c(2);return g(l.deleteUser(r))}),a(1," Deactivate "),t()}}function xe(n,m){if(n&1){let e=v();i(0,"button",33),p("click",function(){u(e);let r=c().$implicit,l=c(2);return g(l.activateUser(r))}),a(1," Activate "),t()}}function he(n,m){if(n&1){let e=v();i(0,"tr")(1,"td"),a(2),t(),i(3,"td")(4,"a",25),p("click",function(){let r=u(e).$implicit,l=c(2);return g(l.viewUser(r.userId))}),a(5),t()(),i(6,"td"),a(7),t(),i(8,"td"),a(9),t(),i(10,"td")(11,"span",26),a(12),t()(),i(13,"td"),a(14),P(15,"date"),t(),i(16,"td",27)(17,"button",28),p("click",function(){let r=u(e).$implicit,l=c(2);return g(l.viewUser(r.userId))}),a(18," View "),t(),i(19,"button",29),p("click",function(){let r=u(e).$implicit,l=c(2);return g(l.editUser(r.userId))}),a(20," Edit "),t(),f(21,_e,2,0,"button",30)(22,xe,2,0,"button",31),t()()}if(n&2){let e=m.$implicit,o=c(2);s(2),_(e.userId),s(3),_(e.name),s(2),_(e.email),s(2),_(e.employeeId||"-"),s(2),d("ngClass",o.getStatusClass(e.status)),s(),C(" ",e.status," "),s(2),_(y(15,9,e.createdOn,"short")),s(7),d("ngIf",e.status==="ACTIVE"),s(),d("ngIf",e.status==="INACTIVE")}}function ve(n,m){if(n&1){let e=v();i(0,"app-pagination",34),p("pageChange",function(r){u(e);let l=c(2);return g(l.onPageChange(r))})("sizeChange",function(r){u(e);let l=c(2);return g(l.onSizeChange(r))}),t()}if(n&2){let e=c(2);d("page",e.page)("size",e.size)("totalElements",e.totalElements)("totalPages",e.totalPages)("hasNext",e.hasNext)("hasPrevious",e.hasPrevious)}}function Ce(n,m){if(n&1&&(i(0,"div",21)(1,"table",22)(2,"thead")(3,"tr")(4,"th"),a(5,"ID"),t(),i(6,"th"),a(7,"Name"),t(),i(8,"th"),a(9,"Email"),t(),i(10,"th"),a(11,"Employee ID"),t(),i(12,"th"),a(13,"Status"),t(),i(14,"th"),a(15,"Created"),t(),i(16,"th"),a(17,"Actions"),t()()(),i(18,"tbody"),f(19,he,23,12,"tr",23),t()(),f(20,ve,1,6,"app-pagination",24),t()),n&2){let e=c();s(19),d("ngForOf",e.users),s(),d("ngIf",e.users.length>0)}}var de=(()=>{class n{constructor(e,o){this.apiService=e,this.router=o,this.users=[],this.loading=!0,this.error=null,this.page=0,this.size=20,this.totalElements=0,this.totalPages=0,this.hasNext=!1,this.hasPrevious=!1,this.searchTerm="",this.statusFilter=""}ngOnInit(){this.loadUsers()}loadUsers(){this.loading=!0,this.error=null;let e={page:this.page,size:this.size,sortBy:"userId",sortDirection:"ASC"};this.searchTerm&&(e.search=this.searchTerm),this.statusFilter&&(e.status=this.statusFilter),this.apiService.getUsersPaged(e).subscribe({next:o=>{this.users=o.content,this.totalElements=o.totalElements,this.totalPages=o.totalPages,this.hasNext=!o.last,this.hasPrevious=!o.first,this.loading=!1},error:o=>{console.error("Error loading users:",o),this.error="Failed to load users",this.loading=!1}})}onSearch(){this.page=0,this.loadUsers()}onFilterChange(){this.page=0,this.loadUsers()}onPageChange(e){this.page=e,this.loadUsers()}onSizeChange(e){this.size=e,this.page=0,this.loadUsers()}viewUser(e){this.router.navigate(["/manage/users",e])}editUser(e){this.router.navigate(["/manage/users",e,"edit"])}createUser(){this.router.navigate(["/manage/users","new"])}deleteUser(e){confirm(`Are you sure you want to deactivate user "${e.name}"?`)&&this.apiService.deleteUser(e.userId).subscribe({next:()=>{this.loadUsers()},error:o=>{console.error("Error deleting user:",o),this.error="Failed to deactivate user"}})}activateUser(e){this.apiService.activateUser(e.userId).subscribe({next:()=>{this.loadUsers()},error:o=>{console.error("Error activating user:",o),this.error="Failed to activate user"}})}getStatusClass(e){switch(e?.toUpperCase()){case"ACTIVE":return"status-active";case"INACTIVE":return"status-inactive";default:return""}}static{this.\u0275fac=function(o){return new(o||n)(h(S),h(I))}}static{this.\u0275cmp=w({type:n,selectors:[["app-user-list"]],decls:26,vars:10,consts:[[1,"user-list-page"],[1,"page-header"],[1,"page-title"],[1,"btn","btn-primary",3,"click"],[1,"card"],[1,"filters"],[1,"filter-group"],[3,"ngModelChange","change","ngModel"],["value",""],["value","ACTIVE"],["value","INACTIVE"],[1,"filter-group","search-group"],["type","text","placeholder","Search by name or email...",3,"ngModelChange","input","ngModel"],["class","error-message",4,"ngIf"],["class","loading",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","table-container",4,"ngIf"],[1,"error-message"],[1,"loading"],["message","Loading users..."],[1,"empty-state"],[1,"table-container"],[1,"data-table"],[4,"ngFor","ngForOf"],[3,"page","size","totalElements","totalPages","hasNext","hasPrevious","pageChange","sizeChange",4,"ngIf"],[1,"link",3,"click"],[1,"status-badge",3,"ngClass"],[1,"actions"],["title","View",1,"btn","btn-sm","btn-secondary",3,"click"],["title","Edit",1,"btn","btn-sm","btn-secondary",3,"click"],["class","btn btn-sm btn-danger","title","Deactivate",3,"click",4,"ngIf"],["class","btn btn-sm btn-success","title","Activate",3,"click",4,"ngIf"],["title","Deactivate",1,"btn","btn-sm","btn-danger",3,"click"],["title","Activate",1,"btn","btn-sm","btn-success",3,"click"],[3,"pageChange","sizeChange","page","size","totalElements","totalPages","hasNext","hasPrevious"]],template:function(o,r){o&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),a(3,"User Management"),t(),i(4,"button",3),p("click",function(){return r.createUser()}),a(5," + Add User "),t()(),i(6,"div",4)(7,"div",5)(8,"div",6)(9,"label"),a(10,"Status:"),t(),i(11,"select",7),T("ngModelChange",function(b){return k(r.statusFilter,b)||(r.statusFilter=b),b}),p("change",function(){return r.onFilterChange()}),i(12,"option",8),a(13,"All"),t(),i(14,"option",9),a(15,"Active"),t(),i(16,"option",10),a(17,"Inactive"),t()()(),i(18,"div",11)(19,"label"),a(20,"Search:"),t(),i(21,"input",12),T("ngModelChange",function(b){return k(r.searchTerm,b)||(r.searchTerm=b),b}),p("input",function(){return r.onSearch()}),t()()()(),f(22,ue,2,1,"div",13)(23,ge,2,0,"div",14)(24,fe,3,0,"div",15)(25,Ce,21,2,"div",16),t()),o&2&&(s(8),G("filter-active",r.statusFilter),s(3),G("filter-active",r.statusFilter),O("ngModel",r.statusFilter),s(10),O("ngModel",r.searchTerm),s(),d("ngIf",r.error),s(),d("ngIf",r.loading),s(),d("ngIf",!r.loading&&r.users.length===0),s(),d("ngIf",!r.loading&&r.users.length>0))},dependencies:[N,J,M,B,q,D,j,z,R,U,ne,A],styles:[".user-list-page[_ngcontent-%COMP%]{padding:20px}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;overflow:hidden}.status-active[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.status-inactive[_ngcontent-%COMP%]{background:#f5f5f5;color:#757575}.actions[_ngcontent-%COMP%]{white-space:nowrap}.actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:4px}.actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:last-child{margin-right:0}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666;background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a}.loading[_ngcontent-%COMP%]{text-align:center;padding:60px 20px}.error-message[_ngcontent-%COMP%]{background:#ffebee;color:#c62828;padding:12px 16px;border-radius:4px;margin-bottom:16px;border:1px solid #ef9a9a}.link[_ngcontent-%COMP%]{color:#1976d2;cursor:pointer}.link[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}}return n})();function be(n,m){n&1&&(i(0,"div",7),x(1,"app-loading-spinner",8),t())}function we(n,m){if(n&1&&(i(0,"div",9),a(1),t()),n&2){let e=c();s(),C(" ",e.error," ")}}function Pe(n,m){n&1&&(i(0,"div",26),a(1," Email is required "),t())}function ye(n,m){n&1&&(i(0,"div",26),a(1," Please enter a valid email "),t())}function Me(n,m){n&1&&(i(0,"div",26),a(1," Password is required "),t())}function Ie(n,m){n&1&&(i(0,"div",26),a(1," Password must be at least 6 characters "),t())}function Ee(n,m){if(n&1&&(i(0,"div",13)(1,"label",27),a(2,"Password *"),t(),x(3,"input",28),f(4,Me,2,0,"div",16)(5,Ie,2,0,"div",16),t()),n&2){let e,o,r=c(2);s(4),d("ngIf",((e=r.form.get("password"))==null?null:e.touched)&&((e=r.form.get("password"))==null||e.errors==null?null:e.errors.required)),s(),d("ngIf",((o=r.form.get("password"))==null?null:o.touched)&&((o=r.form.get("password"))==null||o.errors==null?null:o.errors.minlength))}}function Se(n,m){n&1&&(i(0,"div",26),a(1," Name is required "),t())}function Ue(n,m){if(n&1){let e=v();i(0,"div",12)(1,"div",13)(2,"label",29),a(3,"Status"),t(),i(4,"select",30)(5,"option",31),a(6,"Active"),t(),i(7,"option",32),a(8,"Inactive"),t()()(),i(9,"div",13)(10,"label"),a(11,"Password"),t(),i(12,"button",24),p("click",function(){u(e);let r=c(2);return g(r.openResetPasswordModal())}),x(13,"i",33),a(14," Reset Password "),t()()()}}function Oe(n,m){if(n&1){let e=v();i(0,"form",10),p("ngSubmit",function(){u(e);let r=c();return g(r.onSubmit())}),i(1,"div",11)(2,"h3"),a(3,"Account Information"),t(),i(4,"div",12)(5,"div",13)(6,"label",14),a(7,"Email *"),t(),x(8,"input",15),f(9,Pe,2,0,"div",16)(10,ye,2,0,"div",16),t(),f(11,Ee,6,2,"div",17),t()(),i(12,"div",11)(13,"h3"),a(14,"Profile Information"),t(),i(15,"div",12)(16,"div",13)(17,"label",18),a(18,"Name *"),t(),x(19,"input",19),f(20,Se,2,0,"div",16),t(),i(21,"div",13)(22,"label",20),a(23,"Employee ID"),t(),x(24,"input",21),t()(),f(25,Ue,15,0,"div",22),t(),i(26,"div",23)(27,"button",24),p("click",function(){u(e);let r=c();return g(r.cancel())}),a(28,"Cancel"),t(),i(29,"button",25),a(30),t()()()}if(n&2){let e,o,r,l=c();d("formGroup",l.form),s(8),d("readonly",l.isEditMode),s(),d("ngIf",((e=l.form.get("email"))==null?null:e.touched)&&((e=l.form.get("email"))==null||e.errors==null?null:e.errors.required)),s(),d("ngIf",((o=l.form.get("email"))==null?null:o.touched)&&((o=l.form.get("email"))==null||o.errors==null?null:o.errors.email)),s(),d("ngIf",!l.isEditMode),s(9),d("ngIf",((r=l.form.get("name"))==null?null:r.touched)&&((r=l.form.get("name"))==null||r.errors==null?null:r.errors.required)),s(5),d("ngIf",l.isEditMode),s(4),d("disabled",l.saving||l.form.invalid),s(),C(" ",l.saving?"Saving...":l.isEditMode?"Update User":"Create User"," ")}}function ke(n,m){if(n&1){let e=v();i(0,"div",34),p("click",function(){u(e);let r=c();return g(r.closeResetPasswordModal())}),i(1,"div",35),p("click",function(r){return u(e),g(r.stopPropagation())}),i(2,"h3"),a(3,"Reset Password"),t(),i(4,"p"),a(5,"Enter a new password for this user."),t(),i(6,"div",13)(7,"label",36),a(8,"New Password"),t(),i(9,"input",37),T("ngModelChange",function(r){u(e);let l=c();return k(l.newPassword,r)||(l.newPassword=r),g(r)}),t()(),i(10,"div",38)(11,"button",39),p("click",function(){u(e);let r=c();return g(r.closeResetPasswordModal())}),a(12," Cancel "),t(),i(13,"button",40),p("click",function(){u(e);let r=c();return g(r.resetPassword())}),a(14),t()()()()}if(n&2){let e=c();s(9),O("ngModel",e.newPassword),s(2),d("disabled",e.resettingPassword),s(2),d("disabled",e.resettingPassword||e.newPassword.length<6),s(),C(" ",e.resettingPassword?"Resetting...":"Reset Password"," ")}}var H=(()=>{class n{constructor(e,o,r,l){this.fb=e,this.route=o,this.router=r,this.apiService=l,this.userId=null,this.isEditMode=!1,this.loading=!1,this.saving=!1,this.error=null,this.showResetPasswordModal=!1,this.newPassword="",this.resettingPassword=!1,this.form=this.fb.group({email:["",[E.required,E.email]],name:["",[E.required]],password:["",[E.required,E.minLength(6)]],employeeId:[""],status:["ACTIVE"]})}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&e!=="new"&&(this.userId=+e,this.isEditMode=!0,this.form.get("password")?.clearValidators(),this.form.get("password")?.updateValueAndValidity(),this.loadUser())}loadUser(){this.userId&&(this.loading=!0,this.apiService.getUserById(this.userId).subscribe({next:e=>{this.form.patchValue({email:e.email,name:e.name,employeeId:e.employeeId||"",status:e.status}),this.loading=!1},error:e=>{console.error("Error loading user:",e),this.error="Failed to load user",this.loading=!1}}))}onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.saving=!0,this.error=null,this.isEditMode&&this.userId?this.updateUser():this.createUser()}createUser(){let e={email:this.form.value.email,name:this.form.value.name,password:this.form.value.password,employeeId:this.form.value.employeeId||void 0};this.apiService.createUser(e).subscribe({next:()=>{this.saving=!1,this.router.navigate(["/manage/users"])},error:o=>{this.saving=!1,this.error=o.error?.message||"Failed to create user",console.error("Error creating user:",o)}})}updateUser(){if(!this.userId)return;let e={name:this.form.value.name,employeeId:this.form.value.employeeId||void 0,status:this.form.value.status};this.apiService.updateUser(this.userId,e).subscribe({next:()=>{this.saving=!1,this.router.navigate(["/manage/users"])},error:o=>{this.saving=!1,this.error=o.error?.message||"Failed to update user",console.error("Error updating user:",o)}})}cancel(){this.router.navigate(["/manage/users"])}openResetPasswordModal(){this.showResetPasswordModal=!0,this.newPassword=""}closeResetPasswordModal(){this.showResetPasswordModal=!1,this.newPassword=""}resetPassword(){!this.userId||!this.newPassword||this.newPassword.length<6||(this.resettingPassword=!0,this.apiService.resetPassword(this.userId,{newPassword:this.newPassword}).subscribe({next:()=>{this.resettingPassword=!1,this.showResetPasswordModal=!1,this.newPassword="",alert("Password reset successfully")},error:e=>{this.resettingPassword=!1,console.error("Error resetting password:",e),alert("Failed to reset password")}}))}get title(){return this.isEditMode?"Edit User":"Create User"}static{this.\u0275fac=function(o){return new(o||n)(h(ee),h(L),h(I),h(S))}}static{this.\u0275cmp=w({type:n,selectors:[["app-user-form"]],decls:8,vars:5,consts:[[1,"user-form-container"],[1,"page-header"],[1,"page-title"],["class","loading",4,"ngIf"],["class","error-message",4,"ngIf"],["class","form-card",3,"formGroup","ngSubmit",4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"loading"],["message","Loading user..."],[1,"error-message"],[1,"form-card",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"form-row"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email","placeholder","user@example.com",1,"form-control",3,"readonly"],["class","error",4,"ngIf"],["class","form-group",4,"ngIf"],["for","name"],["type","text","id","name","formControlName","name","placeholder","Full name",1,"form-control"],["for","employeeId"],["type","text","id","employeeId","formControlName","employeeId","placeholder","e.g., EMP001",1,"form-control"],["class","form-row",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"error"],["for","password"],["type","password","id","password","formControlName","password","placeholder","Minimum 6 characters",1,"form-control"],["for","status"],["id","status","formControlName","status",1,"form-control"],["value","ACTIVE"],["value","INACTIVE"],[1,"fas","fa-key"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],["for","newPassword"],["type","password","id","newPassword","placeholder","Minimum 6 characters",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-actions"],[1,"btn","btn-secondary",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"]],template:function(o,r){o&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),a(3),t()(),f(4,be,2,0,"div",3)(5,we,2,1,"div",4)(6,Oe,31,9,"form",5),t(),f(7,ke,15,4,"div",6)),o&2&&(s(3),_(r.title),s(),d("ngIf",r.loading),s(),d("ngIf",r.error),s(),d("ngIf",!r.loading),s(),d("ngIf",r.showResetPasswordModal))},dependencies:[M,X,B,q,D,j,z,Q,R,Y,Z,U],styles:[".user-form-container[_ngcontent-%COMP%]{padding:24px;max-width:800px}.page-header[_ngcontent-%COMP%]{margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;color:#1e293b}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:48px}.error-message[_ngcontent-%COMP%]{background:#fef2f2;border:1px solid #fecaca;color:#dc2626;padding:12px 16px;border-radius:8px;margin-bottom:16px}.form-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:8px;padding:24px}.form-section[_ngcontent-%COMP%]{margin-bottom:24px}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;font-weight:600;color:#1e293b;padding-bottom:8px;border-bottom:1px solid #e2e8f0}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#475569;font-size:14px}.form-control[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;transition:border-color .2s,box-shadow .2s}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.form-control[readonly][_ngcontent-%COMP%]{background:#f1f5f9;color:#64748b;cursor:not-allowed}.form-control.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#dc2626}.error[_ngcontent-%COMP%]{color:#dc2626;font-size:12px;margin-top:4px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding-top:16px;border-top:1px solid #e2e8f0}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:10px 20px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .2s}.btn-primary[_ngcontent-%COMP%]{background:#3b82f6;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb}.btn-primary[_ngcontent-%COMP%]:disabled{background:#93c5fd;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:#f1f5f9;color:#475569}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#e2e8f0}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:24px;width:100%;max-width:400px;box-shadow:0 20px 25px -5px #0000001a}.modal[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px;font-weight:600;color:#1e293b}.modal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 16px;color:#64748b;font-size:14px}.modal[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:16px}.modal-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:20px}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return n})();function Te(n,m){if(n&1){let e=v();i(0,"div",10)(1,"button",11),p("click",function(){u(e);let r=c();return g(r.editUser())}),x(2,"i",12),a(3," Edit "),t(),i(4,"button",13),p("click",function(){u(e);let r=c();return g(r.toggleStatus())}),x(5,"i",14),a(6),t()()}if(n&2){let e=c();s(4),d("ngClass",e.user.status==="ACTIVE"?"btn-danger":"btn-success"),s(),d("ngClass",e.user.status==="ACTIVE"?"fa-user-slash":"fa-user-check"),s(),C(" ",e.user.status==="ACTIVE"?"Deactivate":"Activate"," ")}}function Ve(n,m){n&1&&(i(0,"div",15),x(1,"app-loading-spinner",16),t())}function Fe(n,m){if(n&1&&(i(0,"div",17),a(1),t()),n&2){let e=c();s(),C(" ",e.error," ")}}function Ne(n,m){if(n&1&&(i(0,"div",18)(1,"div",19)(2,"div",20)(3,"h2"),a(4),t(),i(5,"span",21),a(6),t()(),i(7,"div",22)(8,"div",23)(9,"h3"),a(10,"Account Information"),t(),i(11,"div",24)(12,"span",25),a(13,"User ID"),t(),i(14,"span",26),a(15),t()(),i(16,"div",24)(17,"span",25),a(18,"Email"),t(),i(19,"span",26),a(20),t()(),i(21,"div",24)(22,"span",25),a(23,"Employee ID"),t(),i(24,"span",26),a(25),t()()(),i(26,"div",23)(27,"h3"),a(28,"Timestamps"),t(),i(29,"div",24)(30,"span",25),a(31,"Created On"),t(),i(32,"span",26),a(33),P(34,"date"),t()(),i(35,"div",24)(36,"span",25),a(37,"Updated On"),t(),i(38,"span",26),a(39),P(40,"date"),t()(),i(41,"div",24)(42,"span",25),a(43,"Last Login"),t(),i(44,"span",26),a(45),P(46,"date"),t()()()()()()),n&2){let e=c();s(4),_(e.user.name),s(),d("ngClass",e.getStatusClass(e.user.status)),s(),C(" ",e.user.status," "),s(9),_(e.user.userId),s(5),_(e.user.email),s(5),_(e.user.employeeId||"-"),s(8),_(y(34,9,e.user.createdOn,"medium")),s(6),_(y(40,12,e.user.updatedOn,"medium")),s(6),_(e.user.lastLogin?y(46,15,e.user.lastLogin,"medium"):"Never")}}var ce=(()=>{class n{constructor(e,o,r){this.route=e,this.router=o,this.apiService=r,this.user=null,this.loading=!0,this.error=null}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e?this.loadUser(+e):(this.error="No user ID provided",this.loading=!1)}loadUser(e){this.loading=!0,this.error=null,this.apiService.getUserById(e).subscribe({next:o=>{this.user=o,this.loading=!1},error:o=>{console.error("Error loading user:",o),this.error="Failed to load user",this.loading=!1}})}editUser(){this.user&&this.router.navigate(["/manage/users",this.user.userId,"edit"])}goBack(){this.router.navigate(["/manage/users"])}getStatusClass(e){switch(e?.toUpperCase()){case"ACTIVE":return"status-active";case"INACTIVE":return"status-inactive";default:return""}}toggleStatus(){this.user&&(this.user.status==="ACTIVE"?confirm(`Are you sure you want to deactivate user "${this.user.name}"?`)&&this.apiService.deactivateUser(this.user.userId).subscribe({next:()=>{this.loadUser(this.user.userId)},error:e=>{console.error("Error deactivating user:",e),this.error="Failed to deactivate user"}}):this.apiService.activateUser(this.user.userId).subscribe({next:()=>{this.loadUser(this.user.userId)},error:e=>{console.error("Error activating user:",e),this.error="Failed to activate user"}}))}static{this.\u0275fac=function(o){return new(o||n)(h(L),h(I),h(S))}}static{this.\u0275cmp=w({type:n,selectors:[["app-user-detail"]],decls:12,vars:4,consts:[[1,"user-detail-container"],[1,"page-header"],[1,"header-left"],[1,"btn","btn-back",3,"click"],[1,"fas","fa-arrow-left"],[1,"page-title"],["class","header-actions",4,"ngIf"],["class","loading",4,"ngIf"],["class","error-message",4,"ngIf"],["class","detail-content",4,"ngIf"],[1,"header-actions"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn",3,"click","ngClass"],[1,"fas",3,"ngClass"],[1,"loading"],["message","Loading user..."],[1,"error-message"],[1,"detail-content"],[1,"detail-card"],[1,"card-header"],[1,"status-badge",3,"ngClass"],[1,"detail-grid"],[1,"detail-section"],[1,"detail-row"],[1,"label"],[1,"value"]],template:function(o,r){o&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),p("click",function(){return r.goBack()}),x(4,"i",4),a(5," Back "),t(),i(6,"h1",5),a(7,"User Details"),t()(),f(8,Te,7,3,"div",6),t(),f(9,Ve,2,0,"div",7)(10,Fe,2,1,"div",8)(11,Ne,47,18,"div",9),t()),o&2&&(s(8),d("ngIf",r.user),s(),d("ngIf",r.loading),s(),d("ngIf",r.error),s(),d("ngIf",!r.loading&&r.user))},dependencies:[N,M,U,A],styles:[".user-detail-container[_ngcontent-%COMP%]{padding:24px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;color:#1e293b}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:48px}.error-message[_ngcontent-%COMP%]{background:#fef2f2;border:1px solid #fecaca;color:#dc2626;padding:12px 16px;border-radius:8px;margin-bottom:16px}.detail-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.detail-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:8px;overflow:hidden}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;background:#f8fafc;border-bottom:1px solid #e2e8f0}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:#1e293b}.detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:24px;padding:24px}.detail-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.detail-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;font-weight:600;color:#64748b;text-transform:uppercase;letter-spacing:.05em}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #f1f5f9}.detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.label[_ngcontent-%COMP%]{color:#64748b;font-size:14px}.value[_ngcontent-%COMP%]{color:#1e293b;font-weight:500;font-size:14px}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500;text-transform:uppercase}.status-active[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.status-inactive[_ngcontent-%COMP%]{background:#f1f5f9;color:#64748b}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .2s}.btn-back[_ngcontent-%COMP%]{background:transparent;color:#64748b;padding:8px 12px}.btn-back[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:#1e293b}.btn-secondary[_ngcontent-%COMP%]{background:#f1f5f9;color:#475569}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e2e8f0}.btn-danger[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626;border:1px solid #fecaca}.btn-danger[_ngcontent-%COMP%]:hover{background:#fee2e2}.btn-success[_ngcontent-%COMP%]{background:#dcfce7;color:#166534;border:1px solid #bbf7d0}.btn-success[_ngcontent-%COMP%]:hover{background:#bbf7d0}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.detail-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return n})();var Ae=[{path:"",component:de},{path:"new",component:H},{path:":id",component:ce},{path:":id/edit",component:H}],me=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=F({type:n})}static{this.\u0275inj=V({imports:[$.forChild(Ae),$]})}}return n})();var nt=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=F({type:n})}static{this.\u0275inj=V({imports:[K,te,ie,me,re]})}}return n})();export{nt as UsersModule};

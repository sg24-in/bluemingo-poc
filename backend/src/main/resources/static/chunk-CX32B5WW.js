import{d as P,e as I,h as w,i as de,k as me,n as ce}from"./chunk-LMWWBC6Z.js";import{$ as V,$a as se,Aa as S,B as p,D as v,Da as $,F as n,G as t,H as C,Ha as z,Ia as O,Ja as R,Ka as X,L as T,La as ee,M as f,Ma as te,N as s,Na as ne,Pa as ie,S as W,Sa as ae,T as i,Ta as j,U as u,Ua as B,V as x,Va as G,Wa as oe,Xa as re,Z as N,Za as le,_ as D,_a as pe,da as Y,fa as U,ga as H,ia as F,ja as A,ka as M,m as k,o as E,oa as J,p as L,qa as K,r as c,s as g,w as l,x as b,ya as q,z as _}from"./chunk-SXRLIX2W.js";function ve(o,d){if(o&1&&(n(0,"option",22),i(1),t()),o&2){let e=d.$implicit;p("value",e.value),l(),u(e.label)}}function Te(o,d){if(o&1){let e=T();n(0,"tr")(1,"td"),i(2),t(),n(3,"td"),i(4),t(),n(5,"td")(6,"span",28),i(7),t()(),n(8,"td"),i(9),t(),n(10,"td"),i(11),t(),n(12,"td")(13,"span",29),i(14),t()(),n(15,"td",30)(16,"button",31),f("click",function(){let r=c(e).$implicit,m=s(3);return g(m.toggleStatus(r))}),i(17),t(),n(18,"button",32),f("click",function(){let r=c(e).$implicit,m=s(3);return g(m.editTemplate(r))}),i(19," Edit "),t(),n(20,"button",33),f("click",function(){let r=c(e).$implicit,m=s(3);return g(m.openDeleteModal(r))}),i(21," Delete "),t()()()}if(o&2){let e=d.$implicit,a=s(3);l(2),u(e.operationCode||"-"),l(2),u(e.operationName),l(2),p("ngClass",e.operationType.toLowerCase()),l(),x(" ",a.getOperationTypeLabel(e.operationType)," "),l(2),u(a.getQuantityTypeLabel(e.quantityType)),l(2),u(e.estimatedDurationMinutes?e.estimatedDurationMinutes+" min":"-"),l(2),p("ngClass",e.status.toLowerCase()),l(),x(" ",e.status," "),l(2),p("ngClass",e.status==="ACTIVE"?"btn-warning":"btn-success")("disabled",a.statusToggleLoading[e.operationTemplateId]),l(),x(" ",a.statusToggleLoading[e.operationTemplateId]?"...":e.status==="ACTIVE"?"Deactivate":"Activate"," "),l(3),p("disabled",e.status==="INACTIVE")}}function ye(o,d){if(o&1&&(n(0,"table",26)(1,"thead")(2,"tr")(3,"th"),i(4,"Code"),t(),n(5,"th"),i(6,"Name"),t(),n(7,"th"),i(8,"Operation Type"),t(),n(9,"th"),i(10,"Quantity Type"),t(),n(11,"th"),i(12,"Est. Duration"),t(),n(13,"th"),i(14,"Status"),t(),n(15,"th"),i(16,"Actions"),t()()(),n(17,"tbody"),_(18,Te,22,12,"tr",27),t()()),o&2){let e=s(2);l(18),p("ngForOf",e.templates)}}function Oe(o,d){if(o&1){let e=T();n(0,"div",34)(1,"p"),i(2,"No operation templates found."),t(),n(3,"button",5),f("click",function(){c(e);let r=s(2);return g(r.createTemplate())}),i(4,"Create First Template"),t()()}}function Ee(o,d){if(o&1){let e=T();n(0,"app-pagination",35),f("pageChange",function(r){c(e);let m=s(2);return g(m.onPageChange(r))})("sizeChange",function(r){c(e);let m=s(2);return g(m.onSizeChange(r))}),t()}if(o&2){let e=s(2);p("page",e.page)("size",e.size)("totalElements",e.totalElements)("totalPages",e.totalPages)("hasNext",e.hasNext)("hasPrevious",e.hasPrevious)}}function Me(o,d){if(o&1&&(n(0,"div",23),_(1,ye,19,1,"table",24)(2,Oe,5,0,"ng-template",null,1,H)(4,Ee,1,6,"app-pagination",25),t()),o&2){let e=W(3),a=s();l(),p("ngIf",a.templates.length>0)("ngIfElse",e),l(3),p("ngIf",a.templates.length>0)}}function Se(o,d){o&1&&(n(0,"div",36),i(1,"Loading operation templates..."),t())}function Pe(o,d){if(o&1&&(n(0,"div",48),i(1),t()),o&2){let e=s(2);l(),u(e.deleteError)}}function Ie(o,d){if(o&1){let e=T();n(0,"div",37),f("click",function(){c(e);let r=s();return g(r.closeDeleteModal())}),n(1,"div",38),f("click",function(r){return c(e),g(r.stopPropagation())}),n(2,"div",39)(3,"h2"),i(4,"Delete Operation Template"),t(),n(5,"button",40),f("click",function(){c(e);let r=s();return g(r.closeDeleteModal())}),C(6,"i",41),t()(),n(7,"div",42)(8,"p"),i(9,"Are you sure you want to delete template "),n(10,"strong"),i(11),t(),i(12,"?"),t(),n(13,"p",43),i(14,"This will mark the template as inactive."),t(),_(15,Pe,2,1,"div",44),t(),n(16,"div",45)(17,"button",46),f("click",function(){c(e);let r=s();return g(r.closeDeleteModal())}),i(18," Cancel "),t(),n(19,"button",47),f("click",function(){c(e);let r=s();return g(r.confirmDelete())}),i(20),t()()()()}if(o&2){let e=s();l(11),u(e.templateToDelete==null?null:e.templateToDelete.operationName),l(4),p("ngIf",e.deleteError),l(2),p("disabled",e.deleteLoading),l(2),p("disabled",e.deleteLoading),l(),x(" ",e.deleteLoading?"Deleting...":"Delete"," ")}}var _e=(()=>{class o{constructor(e,a){this.apiService=e,this.router=a,this.templates=[],this.loading=!0,this.page=0,this.size=20,this.totalElements=0,this.totalPages=0,this.hasNext=!1,this.hasPrevious=!1,this.filterStatus="",this.filterType="",this.searchTerm="",this.showDeleteModal=!1,this.templateToDelete=null,this.deleteLoading=!1,this.deleteError="",this.statusToggleLoading={},this.operationTypes=P,this.quantityTypes=I}ngOnInit(){this.loadTemplates()}loadTemplates(){this.loading=!0;let e={page:this.page,size:this.size,sortBy:"operationName",sortDirection:"ASC",status:this.filterStatus||void 0,type:this.filterType||void 0,search:this.searchTerm||void 0};this.apiService.getOperationTemplatesPaged(e).subscribe({next:a=>{this.templates=a.content,this.page=a.page,this.size=a.size,this.totalElements=a.totalElements,this.totalPages=a.totalPages,this.hasNext=a.hasNext,this.hasPrevious=a.hasPrevious,this.loading=!1},error:a=>{console.error("Error loading operation templates:",a),this.loading=!1}})}onPageChange(e){this.page=e,this.loadTemplates()}onSizeChange(e){this.size=e,this.page=0,this.loadTemplates()}onFilterStatusChange(e){this.filterStatus=e==="all"?"":e,this.page=0,this.loadTemplates()}onFilterTypeChange(e){this.filterType=e==="all"?"":e,this.page=0,this.loadTemplates()}onSearchChange(e){this.searchTerm=e,this.page=0,this.loadTemplates()}createTemplate(){this.router.navigate(["/manage/operation-templates/new"])}editTemplate(e){this.router.navigate(["/manage/operation-templates",e.operationTemplateId,"edit"])}openDeleteModal(e){this.templateToDelete=e,this.deleteError="",this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1,this.templateToDelete=null,this.deleteError=""}confirmDelete(){this.templateToDelete&&(this.deleteLoading=!0,this.deleteError="",this.apiService.deleteOperationTemplate(this.templateToDelete.operationTemplateId).subscribe({next:()=>{this.deleteLoading=!1,this.closeDeleteModal(),this.loadTemplates()},error:e=>{this.deleteLoading=!1,this.deleteError=e.error?.message||"Failed to delete operation template."}}))}toggleStatus(e){let a=e.operationTemplateId;this.statusToggleLoading[a]=!0,(e.status==="ACTIVE"?this.apiService.deactivateOperationTemplate(a):this.apiService.activateOperationTemplate(a)).subscribe({next:m=>{let y=this.templates.findIndex(h=>h.operationTemplateId===a);y>=0&&(this.templates[y]=m),this.statusToggleLoading[a]=!1},error:m=>{console.error("Error toggling status:",m),this.statusToggleLoading[a]=!1}})}getOperationTypeLabel(e){let a=this.operationTypes.find(r=>r.value===e);return a?a.label:e}getQuantityTypeLabel(e){let a=this.quantityTypes.find(r=>r.value===e);return a?a.label:e}static{this.\u0275fac=function(a){return new(a||o)(b(w),b(S))}}static{this.\u0275cmp=E({type:o,selectors:[["app-operation-template-list"]],decls:33,vars:15,consts:[["loadingTpl",""],["emptyTpl",""],[1,"template-list-page"],[1,"page-header"],[1,"page-title"],[1,"btn","btn-primary",3,"click"],[1,"card"],[1,"filters"],[1,"filter-group"],["for","status-filter"],["id","status-filter",3,"ngModelChange","change","ngModel"],["value","all"],["value","ACTIVE"],["value","INACTIVE"],["for","type-filter"],["id","type-filter",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"filter-group","search-group"],["for","search"],["type","text","id","search","placeholder","Search by name or code...",3,"ngModelChange","input","ngModel"],["class","table-container",4,"ngIf","ngIfElse"],["class","modal-overlay",3,"click",4,"ngIf"],[3,"value"],[1,"table-container"],["class","data-table",4,"ngIf","ngIfElse"],[3,"page","size","totalElements","totalPages","hasNext","hasPrevious","pageChange","sizeChange",4,"ngIf"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"type-badge",3,"ngClass"],[1,"status-badge",3,"ngClass"],[1,"actions"],[1,"btn","btn-sm",3,"click","ngClass","disabled"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click","disabled"],[1,"empty-state"],[3,"pageChange","sizeChange","page","size","totalElements","totalPages","hasNext","hasPrevious"],[1,"loading"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-xmark"],[1,"modal-body"],[1,"warning"],["class","error",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click","disabled"],[1,"btn","btn-danger",3,"click","disabled"],[1,"error"]],template:function(a,r){if(a&1){let m=T();n(0,"div",2)(1,"div",3)(2,"h1",4),i(3,"Operation Templates"),t(),n(4,"button",5),f("click",function(){return c(m),g(r.createTemplate())}),i(5," + New Template "),t()(),n(6,"div",6)(7,"div",7)(8,"div",8)(9,"label",9),i(10,"Status:"),t(),n(11,"select",10),V("ngModelChange",function(h){return c(m),D(r.filterStatus,h)||(r.filterStatus=h),g(h)}),f("change",function(){return c(m),g(r.onFilterStatusChange(r.filterStatus))}),n(12,"option",11),i(13,"All Statuses"),t(),n(14,"option",12),i(15,"Active"),t(),n(16,"option",13),i(17,"Inactive"),t()()(),n(18,"div",8)(19,"label",14),i(20,"Operation Type:"),t(),n(21,"select",15),V("ngModelChange",function(h){return c(m),D(r.filterType,h)||(r.filterType=h),g(h)}),f("change",function(){return c(m),g(r.onFilterTypeChange(r.filterType))}),n(22,"option",11),i(23,"All Types"),t(),_(24,ve,2,2,"option",16),t()(),n(25,"div",17)(26,"label",18),i(27,"Search:"),t(),n(28,"input",19),V("ngModelChange",function(h){return c(m),D(r.searchTerm,h)||(r.searchTerm=h),g(h)}),f("input",function(){return c(m),g(r.onSearchChange(r.searchTerm))}),t()()()(),_(29,Me,5,3,"div",20)(30,Se,2,0,"ng-template",null,0,H)(32,Ie,21,5,"div",21),t()}if(a&2){let m=W(31);l(8),v("filter-active",r.filterStatus&&r.filterStatus!=="all"),l(3),v("filter-active",r.filterStatus&&r.filterStatus!=="all"),N("ngModel",r.filterStatus),l(7),v("filter-active",r.filterType&&r.filterType!=="all"),l(3),v("filter-active",r.filterType&&r.filterType!=="all"),N("ngModel",r.filterType),l(3),p("ngForOf",r.operationTypes),l(4),N("ngModel",r.searchTerm),l(),p("ngIf",!r.loading)("ngIfElse",m),l(3),p("ngIf",r.showDeleteModal)}},dependencies:[F,A,M,B,G,z,j,R,ee,me],styles:[".template-list-page[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;color:#333}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 1px 3px #0000001a;overflow:hidden}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500;text-transform:uppercase}.status-badge.active[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-badge.inactive[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.type-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:4px;font-size:11px;font-weight:600;text-transform:uppercase}.type-badge.furnace[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.type-badge.caster[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.type-badge.rolling[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.type-badge.heat_treatment[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.type-badge.coating[_ngcontent-%COMP%]{background:#f3e5f5;color:#7b1fa2}.type-badge.finishing[_ngcontent-%COMP%]{background:#e0f7fa;color:#00838f}.type-badge.inspection[_ngcontent-%COMP%]{background:#fce4ec;color:#c2185b}.type-badge.cutting[_ngcontent-%COMP%]{background:#efebe9;color:#5d4037}.type-badge.welding[_ngcontent-%COMP%]{background:#eceff1;color:#455a64}.type-badge.assembly[_ngcontent-%COMP%]{background:#e8eaf6;color:#3949ab}.type-badge.packaging[_ngcontent-%COMP%]{background:#f1f8e9;color:#558b2f}.type-badge.general[_ngcontent-%COMP%]{background:#f5f5f5;color:#616161}.actions[_ngcontent-%COMP%]{display:flex;gap:8px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.loading[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}"]})}}return o})();function we(o,d){o&1&&(n(0,"div",5),i(1,"Loading operation template..."),t())}function ke(o,d){if(o&1&&(n(0,"div",35),i(1),t()),o&2){let e=s(2);l(),u(e.error)}}function Le(o,d){if(o&1&&(n(0,"span",36),i(1),t()),o&2){let e=s(2);l(),x(" ",e.getError("operationCode")," ")}}function Ne(o,d){if(o&1&&(n(0,"span",36),i(1),t()),o&2){let e=s(2);l(),x(" ",e.getError("operationName")," ")}}function De(o,d){if(o&1&&(n(0,"option",37),i(1),t()),o&2){let e=d.$implicit;p("value",e.value),l(),x(" ",e.label," ")}}function Ve(o,d){if(o&1&&(n(0,"span",36),i(1),t()),o&2){let e=s(2);l(),x(" ",e.getError("operationType")," ")}}function Fe(o,d){if(o&1&&(n(0,"option",37),i(1),t()),o&2){let e=d.$implicit;p("value",e.value),l(),x(" ",e.label," ")}}function Ae(o,d){if(o&1&&(n(0,"span",36),i(1),t()),o&2){let e=s(2);l(),x(" ",e.getError("quantityType")," ")}}function qe(o,d){if(o&1&&(n(0,"option",37),i(1),t()),o&2){let e=d.$implicit;p("value",e.value),l(),x(" ",e.label," ")}}function ze(o,d){if(o&1&&(n(0,"span",36),i(1),t()),o&2){let e=s(2);l(),x(" ",e.getError("estimatedDurationMinutes")," ")}}function Re(o,d){o&1&&(n(0,"div",9)(1,"h2"),i(2,"Status"),t(),n(3,"div",11)(4,"label",38),i(5,"Status"),t(),n(6,"select",39)(7,"option",40),i(8,"Active"),t(),n(9,"option",41),i(10,"Inactive"),t()()()())}function je(o,d){if(o&1){let e=T();n(0,"div",6)(1,"form",7),f("ngSubmit",function(){c(e);let r=s();return g(r.onSubmit())}),_(2,ke,2,1,"div",8),n(3,"div",9)(4,"h2"),i(5,"Template Information"),t(),n(6,"div",10)(7,"div",11)(8,"label",12),i(9,"Operation Code"),t(),C(10,"input",13),n(11,"span",14),i(12,"Optional. Auto-generated if left blank."),t(),_(13,Le,2,1,"span",15),t(),n(14,"div",11)(15,"label",16),i(16,"Operation Name *"),t(),C(17,"input",17),_(18,Ne,2,1,"span",15),t()(),n(19,"div",10)(20,"div",11)(21,"label",18),i(22,"Operation Type *"),t(),n(23,"select",19),_(24,De,2,2,"option",20),t(),_(25,Ve,2,1,"span",15),t(),n(26,"div",11)(27,"label",21),i(28,"Quantity Type *"),t(),n(29,"select",22),_(30,Fe,2,2,"option",20),t(),n(31,"span",14),i(32,"How quantities are tracked for this operation."),t(),_(33,Ae,2,1,"span",15),t()(),n(34,"div",10)(35,"div",11)(36,"label",23),i(37,"Default Equipment Type"),t(),n(38,"select",24)(39,"option",25),i(40,"None"),t(),_(41,qe,2,2,"option",20),t(),n(42,"span",14),i(43,"Suggested equipment type for this operation."),t()(),n(44,"div",11)(45,"label",26),i(46,"Estimated Duration (minutes)"),t(),C(47,"input",27),_(48,ze,2,1,"span",15),t()(),n(49,"div",28)(50,"label",29),i(51,"Description"),t(),C(52,"textarea",30),t()(),_(53,Re,11,0,"div",31),n(54,"div",32)(55,"button",33),f("click",function(){c(e);let r=s();return g(r.cancel())}),i(56," Cancel "),t(),n(57,"button",34),i(58),t()()()()}if(o&2){let e=s();l(),p("formGroup",e.form),l(),p("ngIf",e.error),l(8),v("error",e.hasError("operationCode")),l(3),p("ngIf",e.hasError("operationCode")),l(4),v("error",e.hasError("operationName")),l(),p("ngIf",e.hasError("operationName")),l(5),v("error",e.hasError("operationType")),l(),p("ngForOf",e.operationTypes),l(),p("ngIf",e.hasError("operationType")),l(4),v("error",e.hasError("quantityType")),l(),p("ngForOf",e.quantityTypes),l(3),p("ngIf",e.hasError("quantityType")),l(8),p("ngForOf",e.equipmentTypes),l(6),v("error",e.hasError("estimatedDurationMinutes")),l(),p("ngIf",e.hasError("estimatedDurationMinutes")),l(5),p("ngIf",e.isEditMode),l(2),p("disabled",e.saving),l(2),p("disabled",e.saving||e.form.invalid),l(),x(" ",e.saving?"Saving...":e.isEditMode?"Update Template":"Create Template"," ")}}var Z=(()=>{class o{constructor(e,a,r,m){this.fb=e,this.apiService=a,this.route=r,this.router=m,this.isEditMode=!1,this.templateId=null,this.loading=!1,this.saving=!1,this.error="",this.operationTypes=P,this.quantityTypes=I,this.equipmentTypes=[{value:"EAF",label:"Electric Arc Furnace"},{value:"CASTER",label:"Continuous Caster"},{value:"HOT_MILL",label:"Hot Rolling Mill"},{value:"COLD_MILL",label:"Cold Rolling Mill"},{value:"ANNEALING",label:"Annealing Furnace"},{value:"COATING",label:"Coating Line"},{value:"SLITTER",label:"Slitter"},{value:"SHEAR",label:"Shear Line"},{value:"INSPECTION",label:"Inspection Station"},{value:"GENERAL",label:"General Equipment"}]}ngOnInit(){this.initForm();let e=this.route.snapshot.paramMap.get("id");e&&(this.isEditMode=!0,this.templateId=+e,this.form.get("operationCode")?.disable(),this.loadTemplate())}initForm(){this.form=this.fb.group({operationCode:["",[O.maxLength(50)]],operationName:["",[O.required,O.maxLength(200)]],operationType:["GENERAL",O.required],quantityType:["DISCRETE",O.required],defaultEquipmentType:[""],description:["",O.maxLength(500)],estimatedDurationMinutes:[null,[O.min(1),O.max(1e4)]],status:["ACTIVE"]})}loadTemplate(){this.templateId&&(this.loading=!0,this.apiService.getOperationTemplateById(this.templateId).subscribe({next:e=>{this.form.patchValue({operationCode:e.operationCode||"",operationName:e.operationName,operationType:e.operationType,quantityType:e.quantityType,defaultEquipmentType:e.defaultEquipmentType||"",description:e.description||"",estimatedDurationMinutes:e.estimatedDurationMinutes||null,status:e.status}),this.loading=!1},error:e=>{this.error=e.error?.message||"Failed to load operation template.",this.loading=!1}}))}onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.saving=!0,this.error="";let e=this.form.getRawValue();if(this.isEditMode&&this.templateId){let a={operationCode:e.operationCode||void 0,operationName:e.operationName,operationType:e.operationType,quantityType:e.quantityType,defaultEquipmentType:e.defaultEquipmentType||void 0,description:e.description||void 0,estimatedDurationMinutes:e.estimatedDurationMinutes||void 0,status:e.status};this.apiService.updateOperationTemplate(this.templateId,a).subscribe({next:()=>{this.saving=!1,this.router.navigate(["/manage/operation-templates"])},error:r=>{this.saving=!1,this.error=r.error?.message||"Failed to update operation template."}})}else{let a={operationCode:e.operationCode||void 0,operationName:e.operationName,operationType:e.operationType,quantityType:e.quantityType,defaultEquipmentType:e.defaultEquipmentType||void 0,description:e.description||void 0,estimatedDurationMinutes:e.estimatedDurationMinutes||void 0};this.apiService.createOperationTemplate(a).subscribe({next:()=>{this.saving=!1,this.router.navigate(["/manage/operation-templates"])},error:r=>{this.saving=!1,this.error=r.error?.message||"Failed to create operation template."}})}}cancel(){this.router.navigate(["/manage/operation-templates"])}hasError(e){let a=this.form.get(e);return!!(a&&a.invalid&&a.touched)}getError(e){let a=this.form.get(e);return!a||!a.errors?"":a.errors.required?`${this.getFieldLabel(e)} is required`:a.errors.maxlength?`${this.getFieldLabel(e)} is too long`:a.errors.min?`${this.getFieldLabel(e)} must be at least 1`:a.errors.max?`${this.getFieldLabel(e)} must be less than 10000`:"Invalid value"}getFieldLabel(e){return{operationCode:"Operation Code",operationName:"Operation Name",operationType:"Operation Type",quantityType:"Quantity Type",defaultEquipmentType:"Default Equipment Type",description:"Description",estimatedDurationMinutes:"Estimated Duration"}[e]||e}static{this.\u0275fac=function(a){return new(a||o)(b(le),b(w),b(q),b(S))}}static{this.\u0275cmp=E({type:o,selectors:[["app-operation-template-form"]],decls:6,vars:3,consts:[[1,"template-form-page"],[1,"page-header"],[1,"page-title"],["class","loading",4,"ngIf"],["class","form-container",4,"ngIf"],[1,"loading"],[1,"form-container"],[3,"ngSubmit","formGroup"],["class","error-banner",4,"ngIf"],[1,"form-section"],[1,"form-row"],[1,"form-group"],["for","operationCode"],["type","text","id","operationCode","formControlName","operationCode","placeholder","e.g., OP-MELT-001"],[1,"hint"],["class","error-text",4,"ngIf"],["for","operationName"],["type","text","id","operationName","formControlName","operationName","placeholder","e.g., Melting"],["for","operationType"],["id","operationType","formControlName","operationType"],[3,"value",4,"ngFor","ngForOf"],["for","quantityType"],["id","quantityType","formControlName","quantityType"],["for","defaultEquipmentType"],["id","defaultEquipmentType","formControlName","defaultEquipmentType"],["value",""],["for","estimatedDurationMinutes"],["type","number","id","estimatedDurationMinutes","formControlName","estimatedDurationMinutes","placeholder","e.g., 60","min","1","max","10000"],[1,"form-group","full-width"],["for","description"],["id","description","formControlName","description","rows","3","placeholder","Optional description of the operation template"],["class","form-section",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"error-banner"],[1,"error-text"],[3,"value"],["for","status"],["id","status","formControlName","status"],["value","ACTIVE"],["value","INACTIVE"]],template:function(a,r){a&1&&(n(0,"div",0)(1,"div",1)(2,"h1",2),i(3),t()(),_(4,we,2,0,"div",3)(5,je,59,24,"div",4),t()),a&2&&(l(3),u(r.isEditMode?"Edit Operation Template":"New Operation Template"),l(),p("ngIf",r.loading),l(),p("ngIf",!r.loading))},dependencies:[A,M,te,B,G,z,ne,j,R,X,re,oe,ie,ae],styles:[".template-form-page[_ngcontent-%COMP%]{padding:20px;max-width:800px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;color:#333}.loading[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.form-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 1px 3px #0000001a;padding:24px}.error-banner[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:12px 16px;border-radius:4px;margin-bottom:20px}.form-section[_ngcontent-%COMP%]{margin-bottom:32px}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333;margin:0 0 16px;padding-bottom:8px;border-bottom:1px solid #eee}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:16px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#555;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#1976d2}.form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select.error[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea.error[_ngcontent-%COMP%]{border-color:#d32f2f}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background:#f5f5f5;cursor:not-allowed}.hint[_ngcontent-%COMP%]{font-size:12px;color:#888}.error-text[_ngcontent-%COMP%]{font-size:12px;color:#d32f2f}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding-top:20px;border-top:1px solid #eee}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;font-size:14px;font-weight:500;transition:background .2s}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background:#1976d2;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#1565c0}.btn-secondary[_ngcontent-%COMP%]{background:#757575;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#616161}@media (max-width: 600px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return o})();function Be(o,d){if(o&1){let e=T();n(0,"div",10)(1,"button",11),f("click",function(){c(e);let r=s();return g(r.editTemplate())}),C(2,"i",12),i(3," Edit "),t(),n(4,"button",13),f("click",function(){c(e);let r=s();return g(r.toggleStatus())}),C(5,"i",14),i(6),t()()}if(o&2){let e=s();l(4),p("ngClass",e.template.status==="ACTIVE"?"btn-danger":"btn-success"),l(),p("ngClass",e.template.status==="ACTIVE"?"fa-ban":"fa-check-circle"),l(),x(" ",e.template.status==="ACTIVE"?"Deactivate":"Activate"," ")}}function Ge(o,d){o&1&&(n(0,"div",15),C(1,"app-loading-spinner",16),t())}function Qe(o,d){if(o&1&&(n(0,"div",17),i(1),t()),o&2){let e=s();l(),x(" ",e.error," ")}}function We(o,d){if(o&1&&(n(0,"div",18)(1,"div",19)(2,"div",20)(3,"h2"),i(4),t(),n(5,"span",21),i(6),t()(),n(7,"div",22)(8,"div",23)(9,"h3"),i(10,"Basic Information"),t(),n(11,"div",24)(12,"span",25),i(13,"Template ID"),t(),n(14,"span",26),i(15),t()(),n(16,"div",24)(17,"span",25),i(18,"Operation Code"),t(),n(19,"span",27),i(20),t()(),n(21,"div",24)(22,"span",25),i(23,"Operation Name"),t(),n(24,"span",26),i(25),t()(),n(26,"div",24)(27,"span",25),i(28,"Operation Type"),t(),n(29,"span",26)(30,"span",28),i(31),t()()(),n(32,"div",24)(33,"span",25),i(34,"Quantity Type"),t(),n(35,"span",26),i(36),t()()(),n(37,"div",23)(38,"h3"),i(39,"Configuration"),t(),n(40,"div",24)(41,"span",25),i(42,"Default Equipment Type"),t(),n(43,"span",26),i(44),t()(),n(45,"div",24)(46,"span",25),i(47,"Estimated Duration"),t(),n(48,"span",26),i(49),t()(),n(50,"div",24)(51,"span",25),i(52,"Description"),t(),n(53,"span",29),i(54),t()()(),n(55,"div",23)(56,"h3"),i(57,"Timestamps"),t(),n(58,"div",24)(59,"span",25),i(60,"Created On"),t(),n(61,"span",26),i(62),Y(63,"date"),t()(),n(64,"div",24)(65,"span",25),i(66,"Created By"),t(),n(67,"span",26),i(68),t()(),n(69,"div",24)(70,"span",25),i(71,"Updated On"),t(),n(72,"span",26),i(73),Y(74,"date"),t()(),n(75,"div",24)(76,"span",25),i(77,"Updated By"),t(),n(78,"span",26),i(79),t()()()()()()),o&2){let e=s();l(4),u(e.template.operationName),l(),p("ngClass",e.getStatusClass(e.template.status)),l(),x(" ",e.template.status," "),l(9),u(e.template.operationTemplateId),l(5),u(e.template.operationCode||"-"),l(5),u(e.template.operationName),l(5),p("ngClass",e.template.operationType.toLowerCase()),l(),x(" ",e.getOperationTypeLabel(e.template.operationType)," "),l(5),u(e.getQuantityTypeLabel(e.template.quantityType)),l(8),u(e.template.defaultEquipmentType?e.getEquipmentTypeLabel(e.template.defaultEquipmentType):"-"),l(5),u(e.template.estimatedDurationMinutes?e.template.estimatedDurationMinutes+" minutes":"-"),l(5),u(e.template.description||"-"),l(8),u(U(63,16,e.template.createdOn,"medium")),l(6),u(e.template.createdBy||"-"),l(5),u(U(74,19,e.template.updatedOn,"medium")),l(6),u(e.template.updatedBy||"-")}}var xe=(()=>{class o{constructor(e,a,r){this.route=e,this.router=a,this.apiService=r,this.template=null,this.loading=!0,this.error=null,this.operationTypes=P,this.quantityTypes=I,this.equipmentTypes=[{value:"EAF",label:"Electric Arc Furnace"},{value:"CASTER",label:"Continuous Caster"},{value:"HOT_MILL",label:"Hot Rolling Mill"},{value:"COLD_MILL",label:"Cold Rolling Mill"},{value:"ANNEALING",label:"Annealing Furnace"},{value:"COATING",label:"Coating Line"},{value:"SLITTER",label:"Slitter"},{value:"SHEAR",label:"Shear Line"},{value:"INSPECTION",label:"Inspection Station"},{value:"GENERAL",label:"General Equipment"}]}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e?this.loadTemplate(+e):(this.error="No operation template ID provided",this.loading=!1)}loadTemplate(e){this.loading=!0,this.error=null,this.apiService.getOperationTemplateById(e).subscribe({next:a=>{this.template=a,this.loading=!1},error:a=>{console.error("Error loading operation template:",a),this.error="Failed to load operation template",this.loading=!1}})}editTemplate(){this.template&&this.router.navigate(["/manage/operation-templates",this.template.operationTemplateId,"edit"])}goBack(){this.router.navigate(["/manage/operation-templates"])}getStatusClass(e){switch(e?.toUpperCase()){case"ACTIVE":return"status-active";case"INACTIVE":return"status-inactive";default:return""}}getOperationTypeLabel(e){let a=this.operationTypes.find(r=>r.value===e);return a?a.label:e}getQuantityTypeLabel(e){let a=this.quantityTypes.find(r=>r.value===e);return a?a.label:e}getEquipmentTypeLabel(e){let a=this.equipmentTypes.find(r=>r.value===e);return a?a.label:e}toggleStatus(){this.template&&(this.template.status==="ACTIVE"?confirm(`Are you sure you want to deactivate template "${this.template.operationName}"?`)&&this.apiService.deactivateOperationTemplate(this.template.operationTemplateId).subscribe({next:()=>{this.loadTemplate(this.template.operationTemplateId)},error:e=>{console.error("Error deactivating template:",e),this.error="Failed to deactivate operation template"}}):this.apiService.activateOperationTemplate(this.template.operationTemplateId).subscribe({next:()=>{this.loadTemplate(this.template.operationTemplateId)},error:e=>{console.error("Error activating template:",e),this.error="Failed to activate operation template"}}))}static{this.\u0275fac=function(a){return new(a||o)(b(q),b(S),b(w))}}static{this.\u0275cmp=E({type:o,selectors:[["app-operation-template-detail"]],decls:12,vars:4,consts:[[1,"detail-container"],[1,"page-header"],[1,"header-left"],[1,"btn","btn-back",3,"click"],[1,"fas","fa-arrow-left"],[1,"page-title"],["class","header-actions",4,"ngIf"],["class","loading",4,"ngIf"],["class","error-message",4,"ngIf"],["class","detail-content",4,"ngIf"],[1,"header-actions"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn",3,"click","ngClass"],[1,"fas",3,"ngClass"],[1,"loading"],["message","Loading operation template..."],[1,"error-message"],[1,"detail-content"],[1,"detail-card"],[1,"card-header"],[1,"status-badge",3,"ngClass"],[1,"detail-grid"],[1,"detail-section"],[1,"detail-row"],[1,"label"],[1,"value"],[1,"value","code"],[1,"type-badge",3,"ngClass"],[1,"value","description"]],template:function(a,r){a&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),f("click",function(){return r.goBack()}),C(4,"i",4),i(5," Back "),t(),n(6,"h1",5),i(7,"Operation Template Details"),t()(),_(8,Be,7,3,"div",6),t(),_(9,Ge,2,0,"div",7)(10,Qe,2,1,"div",8)(11,We,80,22,"div",9),t()),a&2&&(l(8),p("ngIf",r.template),l(),p("ngIf",r.loading),l(),p("ngIf",r.error),l(),p("ngIf",!r.loading&&r.template))},dependencies:[F,M,de,J],styles:[".detail-container[_ngcontent-%COMP%]{padding:24px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;color:#1e293b}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:48px}.error-message[_ngcontent-%COMP%]{background:#fef2f2;border:1px solid #fecaca;color:#dc2626;padding:12px 16px;border-radius:8px;margin-bottom:16px}.detail-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.detail-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:8px;overflow:hidden}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;background:#f8fafc;border-bottom:1px solid #e2e8f0}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:#1e293b}.detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:24px;padding:24px}.detail-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.detail-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;font-weight:600;color:#64748b;text-transform:uppercase;letter-spacing:.05em}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #f1f5f9}.detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.label[_ngcontent-%COMP%]{color:#64748b;font-size:14px}.value[_ngcontent-%COMP%]{color:#1e293b;font-weight:500;font-size:14px}.value.code[_ngcontent-%COMP%]{font-family:monospace;background:#f1f5f9;padding:2px 8px;border-radius:4px}.value.description[_ngcontent-%COMP%]{max-width:300px;text-align:right}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500;text-transform:uppercase}.status-active[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.status-inactive[_ngcontent-%COMP%]{background:#f1f5f9;color:#64748b}.type-badge[_ngcontent-%COMP%]{display:inline-block;padding:2px 10px;border-radius:10px;font-size:12px;font-weight:500;background:#e0f2fe;color:#0369a1}.type-badge.furnace[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.type-badge.caster[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.type-badge.rolling[_ngcontent-%COMP%]{background:#e0e7ff;color:#3730a3}.type-badge.heat_treatment[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.type-badge.coating[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.type-badge.finishing[_ngcontent-%COMP%]{background:#ede9fe;color:#5b21b6}.type-badge.inspection[_ngcontent-%COMP%]{background:#fce7f3;color:#9d174d}.type-badge.cutting[_ngcontent-%COMP%]{background:#ffedd5;color:#9a3412}.type-badge.welding[_ngcontent-%COMP%]{background:#fef9c3;color:#854d0e}.type-badge.assembly[_ngcontent-%COMP%]{background:#ccfbf1;color:#115e59}.type-badge.packaging[_ngcontent-%COMP%]{background:#f3e8ff;color:#6b21a8}.type-badge.general[_ngcontent-%COMP%]{background:#f1f5f9;color:#475569}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .2s}.btn-back[_ngcontent-%COMP%]{background:transparent;color:#64748b;padding:8px 12px}.btn-back[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:#1e293b}.btn-secondary[_ngcontent-%COMP%]{background:#f1f5f9;color:#475569}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e2e8f0}.btn-danger[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626;border:1px solid #fecaca}.btn-danger[_ngcontent-%COMP%]:hover{background:#fee2e2}.btn-success[_ngcontent-%COMP%]{background:#dcfce7;color:#166534;border:1px solid #bbf7d0}.btn-success[_ngcontent-%COMP%]:hover{background:#bbf7d0}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.detail-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return o})();var Ye=[{path:"",component:_e},{path:"new",component:Z},{path:":id",component:xe},{path:":id/edit",component:Z}],he=(()=>{class o{static{this.\u0275fac=function(a){return new(a||o)}}static{this.\u0275mod=L({type:o})}static{this.\u0275inj=k({imports:[$.forChild(Ye),$]})}}return o})();var ht=(()=>{class o{static{this.\u0275fac=function(a){return new(a||o)}}static{this.\u0275mod=L({type:o})}static{this.\u0275inj=k({imports:[K,pe,se,he,ce]})}}return o})();export{ht as OperationTemplatesModule};

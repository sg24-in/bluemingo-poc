import{a as B,b as V,c as H,d as R,f as q}from"./chunk-PSDCBCWL.js";import{$ as N,A as h,B as I,H as S,I as E,K as O,M as D,N as k,O as w,Q as T,R as A,_ as F,ba as P,d as f,f as M,g as _,h as u,i as g,k as r,l as C,m as p,o as d,r as e,s as n,t as v,u as y,v as x,w as m,y as i,z as l}from"./chunk-SDYT7PYO.js";var U=a=>({"warning-card":a}),Q=a=>({"quality-pending-card":a});function $(a,c){a&1&&(e(0,"div",5),v(1,"app-loading-spinner",6),n())}function G(a,c){if(a&1){let t=y();e(0,"tr",45),x("click",function(){let s=u(t).$implicit,b=m(3);return g(b.navigateToOrder(s.orderId))}),e(1,"td"),i(2),n(),e(3,"td"),i(4),n(),e(5,"td"),v(6,"app-status-badge",46),n()()}if(a&2){let t=c.$implicit;r(2),l(t.orderNumber),r(2),l((t.lineItems==null||t.lineItems[0]==null?null:t.lineItems[0].productName)||"N/A"),r(2),d("status",t.status)}}function Y(a,c){if(a&1&&(e(0,"table",43)(1,"thead")(2,"tr")(3,"th"),i(4,"Order #"),n(),e(5,"th"),i(6,"Product"),n(),e(7,"th"),i(8,"Status"),n()()(),e(9,"tbody"),p(10,G,7,3,"tr",44),n()()),a&2){let t=m(2);r(10),d("ngForOf",t.availableOrders)}}function J(a,c){a&1&&(e(0,"p",47),i(1,"No orders ready for production"),n())}function K(a,c){if(a&1&&(e(0,"div",50)(1,"div",51),i(2,"\u2713"),n(),e(3,"div",52)(4,"div",53),i(5),n(),e(6,"div",54)(7,"span"),i(8),n(),e(9,"span"),i(10),n()(),e(11,"div",55),i(12),E(13,"date"),n()()()),a&2){let t=c.$implicit;r(5),l(t.operationName),r(3),l(t.productSku),r(2),h("",t.producedQty," units"),r(2),l(O(13,4,t.confirmedAt,"short"))}}function W(a,c){if(a&1&&(e(0,"div",48),p(1,K,14,7,"div",49),n()),a&2){let t=m(2);r(),d("ngForOf",t.summary.recentActivity)}}function X(a,c){a&1&&(e(0,"p",47),i(1,"No recent activity"),n())}function Z(a,c){if(a&1&&(e(0,"div",58)(1,"div",59),i(2),n(),e(3,"div",60)(4,"div",61),i(5),n(),e(6,"div",62)(7,"span",63),i(8),n(),e(9,"span",64),i(10),E(11,"date"),n()()()()),a&2){let t=c.$implicit,o=m(3);r(),d("ngClass",o.getAuditIconClass(t.action)),r(),h(" ",o.getAuditIcon(t.action)," "),r(3),l(t.description),r(3),l(t.changedBy),r(2),l(O(11,5,t.timestamp,"short"))}}function tt(a,c){if(a&1&&(e(0,"div",56),p(1,Z,12,8,"div",57),n()),a&2){let t=m(2);r(),d("ngForOf",t.summary.auditActivity)}}function et(a,c){a&1&&(e(0,"p",47),i(1,"No audit entries"),n())}function nt(a,c){if(a&1){let t=y();e(0,"tr",45),x("click",function(){let s=u(t).$implicit,b=m(3);return g(b.navigateToBatch(s.batchId))}),e(1,"td"),i(2),n(),e(3,"td"),i(4),n(),e(5,"td"),i(6),n(),e(7,"td"),v(8,"app-status-badge",46),n()()}if(a&2){let t=c.$implicit;r(2),l(t.batchNumber),r(2),l(t.materialName||t.materialId),r(2),I("",t.quantity," ",t.unit,""),r(2),d("status",t.status)}}function it(a,c){if(a&1&&(e(0,"table",43)(1,"thead")(2,"tr")(3,"th"),i(4,"Batch #"),n(),e(5,"th"),i(6,"Material"),n(),e(7,"th"),i(8,"Quantity"),n(),e(9,"th"),i(10,"Status"),n()()(),e(11,"tbody"),p(12,nt,9,5,"tr",44),n()()),a&2){let t=m(2);r(12),d("ngForOf",t.recentBatches)}}function at(a,c){a&1&&(e(0,"p",47),i(1,"No batches found"),n())}function rt(a,c){if(a&1){let t=y();e(0,"div")(1,"div",7)(2,"div",8),x("click",function(){u(t);let s=m();return g(s.navigateToOrders())}),e(3,"div",9)(4,"span"),i(5,"\u{1F4CB}"),n()(),e(6,"div",10)(7,"span",11),i(8,"Total Orders"),n(),e(9,"span",12),i(10),n(),e(11,"span",13),i(12),n()()(),e(13,"div",14)(14,"div",15)(15,"span"),i(16,"\u25B6\uFE0F"),n()(),e(17,"div",10)(18,"span",11),i(19,"Operations Ready"),n(),e(20,"span",12),i(21),n(),e(22,"span",13),i(23,"ready to start"),n()()(),e(24,"div",16),x("click",function(){u(t);let s=m();return g(s.navigateToHolds())}),e(25,"div",17)(26,"span"),i(27,"\u23F8\uFE0F"),n()(),e(28,"div",10)(29,"span",11),i(30,"Active Holds"),n(),e(31,"span",12),i(32),n(),e(33,"span",13),i(34,"items on hold"),n()()(),e(35,"div",18)(36,"div",19)(37,"span"),i(38,"\u2705"),n()(),e(39,"div",10)(40,"span",11),i(41,"Today's Confirmations"),n(),e(42,"span",12),i(43),n(),e(44,"span",13),i(45,"confirmed today"),n()()(),e(46,"div",16),x("click",function(){u(t);let s=m();return g(s.navigateToQualityPending())}),e(47,"div",20)(48,"span"),i(49,"\u{1F50D}"),n()(),e(50,"div",10)(51,"span",11),i(52,"Quality Pending"),n(),e(53,"span",12),i(54),n(),e(55,"span",13),i(56,"awaiting inspection"),n()()()(),e(57,"div",21)(58,"div",22)(59,"div",10)(60,"span",11),i(61,"Total Inventory"),n(),e(62,"span",12),i(63),n()()(),e(64,"div",23)(65,"div",10)(66,"span",11),i(67,"Available"),n(),e(68,"span",12),i(69),n()()(),e(70,"div",24)(71,"div",10)(72,"span",11),i(73,"Consumed"),n(),e(74,"span",12),i(75),n()()(),e(76,"div",25)(77,"div",10)(78,"span",11),i(79,"On Hold"),n(),e(80,"span",12),i(81),n()()()(),e(82,"div",26)(83,"div",27)(84,"div",28)(85,"span"),i(86,"Orders Ready for Production"),n(),e(87,"a",29),i(88,"View All"),n()(),e(89,"div",30),p(90,Y,11,1,"table",31)(91,J,2,0,"p",32),n()(),e(92,"div",27)(93,"div",28)(94,"span"),i(95,"Recent Confirmations"),n()(),e(96,"div",30),p(97,W,2,1,"div",33)(98,X,2,0,"p",32),n()()(),e(99,"div",27)(100,"div",28)(101,"span"),i(102,"Audit Trail"),n()(),e(103,"div",30),p(104,tt,2,1,"div",34)(105,et,2,0,"p",32),n()(),e(106,"div",27)(107,"div",28)(108,"span"),i(109,"Recent Batches"),n(),e(110,"a",35),i(111,"View All"),n()(),e(112,"div",30),p(113,it,13,1,"table",31)(114,at,2,0,"p",32),n()(),e(115,"div",27)(116,"div",28),i(117,"Quick Actions"),n(),e(118,"div",36)(119,"a",37)(120,"span",38),i(121,"\u{1F4CB}"),n(),e(122,"span",39),i(123,"View Orders"),n()(),e(124,"a",40)(125,"span",38),i(126,"\u{1F4E6}"),n(),e(127,"span",39),i(128,"View Inventory"),n()(),e(129,"a",41)(130,"span",38),i(131,"\u{1F3F7}\uFE0F"),n(),e(132,"span",39),i(133,"Batch Traceability"),n()(),e(134,"a",42)(135,"span",38),i(136,"\u23F8\uFE0F"),n(),e(137,"span",39),i(138,"Manage Holds"),n()()()()()}if(a&2){let t=m();r(10),l(t.summary.totalOrders),r(2),h("",t.summary.ordersInProgress," in progress"),r(9),l(t.summary.operationsReady),r(3),d("ngClass",S(20,U,t.summary.activeHolds>0)),r(8),l(t.summary.activeHolds),r(11),l(t.summary.todayConfirmations),r(3),d("ngClass",S(22,Q,t.summary.qualityPendingProcesses>0)),r(8),l(t.summary.qualityPendingProcesses),r(9),l(t.inventorySummary.total),r(6),l(t.inventorySummary.available),r(6),l(t.inventorySummary.consumed),r(6),l(t.inventorySummary.onHold),r(9),d("ngIf",t.availableOrders.length>0),r(),d("ngIf",t.availableOrders.length===0),r(6),d("ngIf",t.summary.recentActivity&&t.summary.recentActivity.length>0),r(),d("ngIf",!(t.summary.recentActivity!=null&&t.summary.recentActivity.length)),r(6),d("ngIf",t.summary.auditActivity&&t.summary.auditActivity.length>0),r(),d("ngIf",!(t.summary.auditActivity!=null&&t.summary.auditActivity.length)),r(8),d("ngIf",t.recentBatches.length>0),r(),d("ngIf",t.recentBatches.length===0)}}var z=(()=>{class a{constructor(t,o){this.apiService=t,this.router=o,this.summary={totalOrders:0,ordersInProgress:0,operationsReady:0,operationsInProgress:0,activeHolds:0,todayConfirmations:0,qualityPendingProcesses:0,recentActivity:[],auditActivity:[]},this.qualityPendingProcesses=[],this.availableOrders=[],this.recentBatches=[],this.inventorySummary={total:0,available:0,consumed:0,onHold:0},this.loading=!0}ngOnInit(){this.loadDashboardData()}loadDashboardData(){this.loading=!0,this.apiService.getDashboardSummary().subscribe({next:t=>{this.summary=t},error:t=>console.error("Error loading dashboard summary:",t)}),this.apiService.getAvailableOrders().subscribe({next:t=>{this.availableOrders=t.slice(0,5)},error:t=>console.error("Error loading orders:",t)}),this.apiService.getAllBatches().subscribe({next:t=>{this.recentBatches=t.slice(0,5)},error:t=>console.error("Error loading batches:",t)}),this.apiService.getAllInventory().subscribe({next:t=>{this.inventorySummary.total=t.length,this.inventorySummary.available=t.filter(o=>o.state==="AVAILABLE").length,this.inventorySummary.consumed=t.filter(o=>o.state==="CONSUMED").length,this.inventorySummary.onHold=t.filter(o=>o.state==="ON_HOLD").length,this.loading=!1},error:t=>{console.error("Error loading inventory:",t),this.loading=!1}}),this.apiService.getQualityPendingProcesses().subscribe({next:t=>{this.qualityPendingProcesses=t,this.summary.qualityPendingProcesses=t.length},error:t=>console.error("Error loading quality pending processes:",t)})}navigateToQualityPending(){this.router.navigate(["/processes/quality-pending"])}navigateToOrder(t){this.router.navigate(["/orders",t])}navigateToBatch(t){this.router.navigate(["/batches",t])}navigateToHolds(){this.router.navigate(["/holds"])}navigateToOrders(){this.router.navigate(["/orders"])}getAuditIcon(t){switch(t){case"CREATE":return"+";case"STATUS_CHANGE":return"\u2194";case"CONSUME":return"\u2212";case"PRODUCE":return"\u2699";case"HOLD":return"\u23F8";case"RELEASE":return"\u25B6";case"UPDATE":return"\u270E";default:return"\u2022"}}getAuditIconClass(t){switch(t){case"CREATE":return"audit-icon-create";case"STATUS_CHANGE":return"audit-icon-status";case"CONSUME":return"audit-icon-consume";case"PRODUCE":return"audit-icon-produce";case"HOLD":return"audit-icon-hold";case"RELEASE":return"audit-icon-release";case"UPDATE":return"audit-icon-update";default:return"audit-icon-default"}}static{this.\u0275fac=function(o){return new(o||a)(C(B),C(F))}}static{this.\u0275cmp=M({type:a,selectors:[["app-dashboard"]],decls:7,vars:2,consts:[[1,"container"],[1,"page-header"],[1,"page-title"],["class","text-center",4,"ngIf"],[4,"ngIf"],[1,"text-center"],["message","Loading dashboard..."],[1,"summary-cards"],[1,"summary-card","clickable",3,"click"],[1,"card-icon","orders-icon"],[1,"card-info"],[1,"card-label"],[1,"card-value"],[1,"card-subtitle"],[1,"summary-card","ready-card"],[1,"card-icon","ready-icon"],[1,"summary-card","clickable",3,"click","ngClass"],[1,"card-icon","hold-icon"],[1,"summary-card"],[1,"card-icon","confirm-icon"],[1,"card-icon","quality-icon"],[1,"inventory-summary"],[1,"summary-card","small"],[1,"summary-card","small","available"],[1,"summary-card","small","consumed"],[1,"summary-card","small","on-hold"],[1,"dashboard-grid"],[1,"card"],[1,"card-header"],["routerLink","/orders",1,"view-all"],[1,"card-body"],["class","table",4,"ngIf"],["class","no-data",4,"ngIf"],["class","activity-list",4,"ngIf"],["class","audit-list",4,"ngIf"],["routerLink","/batches",1,"view-all"],[1,"quick-actions"],["routerLink","/orders",1,"action-btn"],[1,"action-icon"],[1,"action-label"],["routerLink","/inventory",1,"action-btn"],["routerLink","/batches",1,"action-btn"],["routerLink","/holds",1,"action-btn"],[1,"table"],["class","clickable",3,"click",4,"ngFor","ngForOf"],[1,"clickable",3,"click"],[3,"status"],[1,"no-data"],[1,"activity-list"],["class","activity-item",4,"ngFor","ngForOf"],[1,"activity-item"],[1,"activity-icon"],[1,"activity-info"],[1,"activity-title"],[1,"activity-details"],[1,"activity-time"],[1,"audit-list"],["class","audit-item",4,"ngFor","ngForOf"],[1,"audit-item"],[1,"audit-icon",3,"ngClass"],[1,"audit-info"],[1,"audit-description"],[1,"audit-meta"],[1,"audit-user"],[1,"audit-time"]],template:function(o,s){o&1&&(v(0,"app-header"),e(1,"div",0)(2,"div",1)(3,"h1",2),i(4,"Dashboard"),n()(),p(5,$,2,0,"div",3)(6,rt,139,24,"div",4),n()),o&2&&(r(5),d("ngIf",s.loading),r(),d("ngIf",!s.loading))},dependencies:[D,k,w,N,V,H,R,T],styles:[".summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);gap:20px;margin-bottom:24px}.summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:20px;display:flex;align-items:center;gap:16px}.card-icon[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:24px}.orders-icon[_ngcontent-%COMP%]{background-color:#e3f2fd}.inventory-icon[_ngcontent-%COMP%]{background-color:#fff3e0}.available-icon[_ngcontent-%COMP%]{background-color:#e8f5e9}.hold-icon[_ngcontent-%COMP%]{background-color:#fce4ec}.card-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.card-label[_ngcontent-%COMP%]{font-size:13px;color:#666}.card-value[_ngcontent-%COMP%]{font-size:28px;font-weight:500;color:#333}.dashboard-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;margin-bottom:24px}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.view-all[_ngcontent-%COMP%]{color:#1976d2;text-decoration:none;font-size:13px}.view-all[_ngcontent-%COMP%]:hover{text-decoration:underline}.card-body[_ngcontent-%COMP%]{margin-top:16px}.no-data[_ngcontent-%COMP%]{color:#888;text-align:center;padding:24px}.quick-actions[_ngcontent-%COMP%]{display:flex;gap:16px;margin-top:16px}.action-btn[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;padding:24px;background:#f5f5f5;border-radius:8px;text-decoration:none;color:#333;transition:background-color .2s}.action-btn[_ngcontent-%COMP%]:hover{background:#e3f2fd}.action-icon[_ngcontent-%COMP%]{font-size:32px;margin-bottom:8px}.action-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.card-subtitle[_ngcontent-%COMP%]{font-size:12px;color:#888;margin-top:2px}.clickable[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s,box-shadow .2s}.clickable[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.ready-icon[_ngcontent-%COMP%]{background-color:#e8f5e9}.confirm-icon[_ngcontent-%COMP%]{background-color:#e3f2fd}.warning-card[_ngcontent-%COMP%]{border-left:4px solid #ff9800}.ready-card[_ngcontent-%COMP%]{border-left:4px solid #4caf50}.quality-pending-card[_ngcontent-%COMP%]{border-left:4px solid #ff9800;background:#fff8e1}.quality-icon[_ngcontent-%COMP%]{background-color:#fff3e0}.inventory-summary[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:24px}.summary-card.small[_ngcontent-%COMP%]{flex:1;padding:16px}.summary-card.small[_ngcontent-%COMP%]   .card-value[_ngcontent-%COMP%]{font-size:20px}.summary-card.available[_ngcontent-%COMP%]{border-top:3px solid #4caf50}.summary-card.consumed[_ngcontent-%COMP%]{border-top:3px solid #9e9e9e}.summary-card.on-hold[_ngcontent-%COMP%]{border-top:3px solid #ff9800}.activity-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.activity-item[_ngcontent-%COMP%]{display:flex;gap:12px;padding:12px;background:#f5f5f5;border-radius:6px}.activity-icon[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background:#4caf50;color:#fff;display:flex;align-items:center;justify-content:center;font-size:14px;flex-shrink:0}.activity-info[_ngcontent-%COMP%]{flex:1}.activity-title[_ngcontent-%COMP%]{font-weight:500;color:#333}.activity-details[_ngcontent-%COMP%]{display:flex;gap:12px;font-size:13px;color:#666;margin-top:4px}.activity-time[_ngcontent-%COMP%]{font-size:12px;color:#888;margin-top:4px}@media (max-width: 1024px){.summary-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.dashboard-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 768px){.summary-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}.quick-actions[_ngcontent-%COMP%]{flex-direction:column}}.audit-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;max-height:400px;overflow-y:auto}.audit-item[_ngcontent-%COMP%]{display:flex;gap:12px;padding:10px 12px;background:#fafafa;border-radius:6px;border-left:3px solid #e0e0e0}.audit-icon[_ngcontent-%COMP%]{width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:12px;flex-shrink:0;color:#fff;font-weight:600}.audit-icon-create[_ngcontent-%COMP%]{background:#4caf50}.audit-icon-status[_ngcontent-%COMP%]{background:#2196f3}.audit-icon-consume[_ngcontent-%COMP%]{background:#ff9800}.audit-icon-produce[_ngcontent-%COMP%]{background:#9c27b0}.audit-icon-hold[_ngcontent-%COMP%]{background:#f44336}.audit-icon-release[_ngcontent-%COMP%]{background:#4caf50}.audit-icon-update[_ngcontent-%COMP%]{background:#607d8b}.audit-icon-default[_ngcontent-%COMP%]{background:#9e9e9e}.audit-info[_ngcontent-%COMP%]{flex:1;min-width:0}.audit-description[_ngcontent-%COMP%]{font-size:13px;color:#333;line-height:1.4}.audit-meta[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:4px;font-size:11px;color:#888}.audit-user[_ngcontent-%COMP%]{font-weight:500;color:#666}.audit-time[_ngcontent-%COMP%]{color:#999}"]})}}return a})();var ot=[{path:"",component:z}],j=(()=>{class a{static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275mod=_({type:a})}static{this.\u0275inj=f({imports:[P.forChild(ot),P]})}}return a})();var Ct=(()=>{class a{static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275mod=_({type:a})}static{this.\u0275inj=f({imports:[A,j,q]})}}return a})();export{Ct as DashboardModule};

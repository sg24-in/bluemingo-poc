import{f as ce,g as pe,h as w,i as me,k as ue,n as ge}from"./chunk-LMWWBC6Z.js";import{$ as K,$a as se,Aa as M,B as l,D as E,Da as $,F as i,G as t,H as _,Ha as D,Ia as v,Ja as F,Ka as X,L as b,La as ee,M as g,Ma as te,N as s,Na as ie,Pa as ne,S as R,Sa as re,T as n,Ta as U,U as x,Ua as L,V as h,Va as A,W as Y,Wa as oe,Xa as ae,Z as B,Za as de,_ as j,_a as le,a as G,da as Q,fa as q,ga as W,ia as T,ja as V,ka as y,m as I,o as S,oa as H,p as k,qa as Z,r as p,s as m,w as a,x as C,ya as N,z as f}from"./chunk-SXRLIX2W.js";function Ee(r,c){if(r&1){let e=b();i(0,"tr")(1,"td",24),n(2),t(),i(3,"td"),n(4),t(),i(5,"td"),n(6),t(),i(7,"td",25),n(8),t(),i(9,"td")(10,"span",26),n(11),t()(),i(12,"td",27)(13,"button",28),g("click",function(){let d=p(e).$implicit,u=s(3);return m(u.editProduct(d))}),n(14," Edit "),t(),i(15,"button",29),g("click",function(){let d=p(e).$implicit,u=s(3);return m(u.openDeleteModal(d))}),n(16," Delete "),t()()()}if(r&2){let e=c.$implicit,o=s(3);a(2),x(e.sku),a(2),x(e.productName),a(2),x(o.getUnitLabel(e.baseUnit)),a(2),x(e.description||"-"),a(2),l("ngClass",e.status.toLowerCase()),a(),h(" ",e.status," "),a(4),l("disabled",e.status==="INACTIVE")}}function Se(r,c){if(r&1&&(i(0,"table",22)(1,"thead")(2,"tr")(3,"th"),n(4,"SKU"),t(),i(5,"th"),n(6,"Name"),t(),i(7,"th"),n(8,"Unit"),t(),i(9,"th"),n(10,"Description"),t(),i(11,"th"),n(12,"Status"),t(),i(13,"th"),n(14,"Actions"),t()()(),i(15,"tbody"),f(16,Ee,17,7,"tr",23),t()()),r&2){let e=s(2);a(16),l("ngForOf",e.products)}}function ye(r,c){if(r&1){let e=b();i(0,"div",30)(1,"p"),n(2,"No products found."),t(),i(3,"button",5),g("click",function(){p(e);let d=s(2);return m(d.createProduct())}),n(4,"Create First Product"),t()()}}function Me(r,c){if(r&1){let e=b();i(0,"app-pagination",31),g("pageChange",function(d){p(e);let u=s(2);return m(u.onPageChange(d))})("sizeChange",function(d){p(e);let u=s(2);return m(u.onSizeChange(d))}),t()}if(r&2){let e=s(2);l("page",e.page)("size",e.size)("totalElements",e.totalElements)("totalPages",e.totalPages)("hasNext",e.hasNext)("hasPrevious",e.hasPrevious)}}function we(r,c){if(r&1&&(i(0,"div",19),f(1,Se,17,1,"table",20)(2,ye,5,0,"ng-template",null,1,W)(4,Me,1,6,"app-pagination",21),t()),r&2){let e=R(3),o=s();a(),l("ngIf",o.products.length>0)("ngIfElse",e),a(3),l("ngIf",o.products.length>0)}}function Oe(r,c){r&1&&(i(0,"div",32),n(1,"Loading products..."),t())}function Ie(r,c){if(r&1&&(i(0,"div",44),n(1),t()),r&2){let e=s(2);a(),x(e.deleteError)}}function ke(r,c){if(r&1){let e=b();i(0,"div",33),g("click",function(){p(e);let d=s();return m(d.closeDeleteModal())}),i(1,"div",34),g("click",function(d){return p(e),m(d.stopPropagation())}),i(2,"div",35)(3,"h2"),n(4,"Delete Product"),t(),i(5,"button",36),g("click",function(){p(e);let d=s();return m(d.closeDeleteModal())}),_(6,"i",37),t()(),i(7,"div",38)(8,"p"),n(9,"Are you sure you want to delete product "),i(10,"strong"),n(11),t(),n(12,"?"),t(),i(13,"p",39),n(14,"This will mark the product as inactive."),t(),f(15,Ie,2,1,"div",40),t(),i(16,"div",41)(17,"button",42),g("click",function(){p(e);let d=s();return m(d.closeDeleteModal())}),n(18," Cancel "),t(),i(19,"button",43),g("click",function(){p(e);let d=s();return m(d.confirmDelete())}),n(20),t()()()()}if(r&2){let e=s();a(11),x(e.productToDelete==null?null:e.productToDelete.productName),a(4),l("ngIf",e.deleteError),a(2),l("disabled",e.deleteLoading),a(2),l("disabled",e.deleteLoading),a(),h(" ",e.deleteLoading?"Deleting...":"Delete"," ")}}var he=(()=>{class r{constructor(e,o){this.apiService=e,this.router=o,this.products=[],this.loading=!0,this.page=0,this.size=20,this.totalElements=0,this.totalPages=0,this.hasNext=!1,this.hasPrevious=!1,this.filterStatus="",this.searchTerm="",this.showDeleteModal=!1,this.productToDelete=null,this.deleteLoading=!1,this.deleteError=""}ngOnInit(){this.loadProducts()}loadProducts(){this.loading=!0;let e={page:this.page,size:this.size,sortBy:"productName",sortDirection:"ASC",status:this.filterStatus||void 0,search:this.searchTerm||void 0};this.apiService.getProductsPaged(e).subscribe({next:o=>{this.products=o.content,this.page=o.page,this.size=o.size,this.totalElements=o.totalElements,this.totalPages=o.totalPages,this.hasNext=o.hasNext,this.hasPrevious=o.hasPrevious,this.loading=!1},error:o=>{console.error("Error loading products:",o),this.loading=!1}})}onPageChange(e){this.page=e,this.loadProducts()}onSizeChange(e){this.size=e,this.page=0,this.loadProducts()}onFilterStatusChange(e){this.filterStatus=e==="all"?"":e,this.page=0,this.loadProducts()}onSearchChange(e){this.searchTerm=e,this.page=0,this.loadProducts()}createProduct(){this.router.navigate(["/manage/products/new"])}editProduct(e){this.router.navigate(["/manage/products",e.productId,"edit"])}openDeleteModal(e){this.productToDelete=e,this.deleteError="",this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1,this.productToDelete=null,this.deleteError=""}confirmDelete(){this.productToDelete&&(this.deleteLoading=!0,this.deleteError="",this.apiService.deleteProduct(this.productToDelete.productId).subscribe({next:()=>{this.deleteLoading=!1,this.closeDeleteModal(),this.loadProducts()},error:e=>{this.deleteLoading=!1,this.deleteError=e.error?.message||"Failed to delete product."}}))}getUnitLabel(e){return pe(e)}static{this.\u0275fac=function(o){return new(o||r)(C(w),C(M))}}static{this.\u0275cmp=S({type:r,selectors:[["app-product-list"]],decls:26,vars:9,consts:[["loadingTpl",""],["emptyTpl",""],[1,"product-list-page"],[1,"page-header"],[1,"page-title"],[1,"btn","btn-primary",3,"click"],[1,"card"],[1,"filters"],[1,"filter-group"],["for","status-filter"],["id","status-filter",3,"ngModelChange","change","ngModel"],["value","all"],["value","ACTIVE"],["value","INACTIVE"],[1,"filter-group","search-group"],["for","search"],["type","text","id","search","placeholder","Search by SKU or name...",3,"ngModelChange","input","ngModel"],["class","table-container",4,"ngIf","ngIfElse"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"table-container"],["class","data-table",4,"ngIf","ngIfElse"],[3,"page","size","totalElements","totalPages","hasNext","hasPrevious","pageChange","sizeChange",4,"ngIf"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"sku-cell"],[1,"description-cell"],[1,"status-badge",3,"ngClass"],[1,"actions"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click","disabled"],[1,"empty-state"],[3,"pageChange","sizeChange","page","size","totalElements","totalPages","hasNext","hasPrevious"],[1,"loading"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-xmark"],[1,"modal-body"],[1,"warning"],["class","error",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click","disabled"],[1,"btn","btn-danger",3,"click","disabled"],[1,"error"]],template:function(o,d){if(o&1){let u=b();i(0,"div",2)(1,"div",3)(2,"h1",4),n(3,"Products"),t(),i(4,"button",5),g("click",function(){return p(u),m(d.createProduct())}),n(5," + New Product "),t()(),i(6,"div",6)(7,"div",7)(8,"div",8)(9,"label",9),n(10,"Status:"),t(),i(11,"select",10),K("ngModelChange",function(P){return p(u),j(d.filterStatus,P)||(d.filterStatus=P),m(P)}),g("change",function(){return p(u),m(d.onFilterStatusChange(d.filterStatus))}),i(12,"option",11),n(13,"All Statuses"),t(),i(14,"option",12),n(15,"Active"),t(),i(16,"option",13),n(17,"Inactive"),t()()(),i(18,"div",14)(19,"label",15),n(20,"Search:"),t(),i(21,"input",16),K("ngModelChange",function(P){return p(u),j(d.searchTerm,P)||(d.searchTerm=P),m(P)}),g("input",function(){return p(u),m(d.onSearchChange(d.searchTerm))}),t()()()(),f(22,we,5,3,"div",17)(23,Oe,2,0,"ng-template",null,0,W)(25,ke,21,5,"div",18),t()}if(o&2){let u=R(24);a(8),E("filter-active",d.filterStatus&&d.filterStatus!=="all"),a(3),E("filter-active",d.filterStatus&&d.filterStatus!=="all"),B("ngModel",d.filterStatus),a(10),B("ngModel",d.searchTerm),a(),l("ngIf",!d.loading)("ngIfElse",u),a(3),l("ngIf",d.showDeleteModal)}},dependencies:[T,V,y,L,A,D,U,F,ee,ue],styles:[".product-list-page[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;color:#333}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 1px 3px #0000001a;overflow:hidden}.sku-cell[_ngcontent-%COMP%]{font-family:monospace;font-weight:600;color:#1565c0}.description-cell[_ngcontent-%COMP%]{max-width:250px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500;text-transform:uppercase}.status-badge.active[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-badge.inactive[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.actions[_ngcontent-%COMP%]{display:flex;gap:8px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.loading[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}"]})}}return r})();function Te(r,c){r&1&&(i(0,"div",5),n(1,"Loading product..."),t())}function Ve(r,c){if(r&1&&(i(0,"div",33),n(1),t()),r&2){let e=s(2);a(),x(e.error)}}function Ne(r,c){if(r&1&&(i(0,"span",34),n(1),t()),r&2){let e=s(2);a(),h(" ",e.getError("sku")," ")}}function De(r,c){if(r&1&&(i(0,"span",34),n(1),t()),r&2){let e=s(2);a(),h(" ",e.getError("productName")," ")}}function Fe(r,c){if(r&1&&(i(0,"option",35),n(1),t()),r&2){let e=c.$implicit;l("value",e.value),a(),h(" ",e.label," ")}}function Ue(r,c){if(r&1&&(i(0,"span",34),n(1),t()),r&2){let e=s(2);a(),h(" ",e.getError("baseUnit")," ")}}function Le(r,c){r&1&&(i(0,"div",11)(1,"label",36),n(2,"Status"),t(),i(3,"select",37)(4,"option",38),n(5,"Active"),t(),i(6,"option",39),n(7,"Inactive"),t()()())}function Ae(r,c){if(r&1&&(i(0,"option",35),n(1),t()),r&2){let e=c.$implicit;l("value",e.value),a(),h(" ",e.label," ")}}function ze(r,c){if(r&1&&(i(0,"option",35),n(1),t()),r&2){let e=c.$implicit;l("value",e.value),a(),h(" ",e.label," ")}}function Ge(r,c){if(r&1&&(i(0,"option",60),n(1),t()),r&2){let e=c.$implicit;l("ngValue",e.materialId),a(),Y(" ",e.materialCode," - ",e.materialName," ")}}function Re(r,c){if(r&1&&(i(0,"div",40)(1,"h3",41),n(2,"Classification"),t(),i(3,"div",10)(4,"div",11)(5,"label",42),n(6,"Product Category"),t(),_(7,"input",43),t(),i(8,"div",11)(9,"label",44),n(10,"Product Group"),t(),_(11,"input",45),t()(),i(12,"h3",41),n(13,"Physical Specifications"),t(),i(14,"div",10)(15,"div",11)(16,"label",46),n(17,"Weight per Unit"),t(),_(18,"input",47),t(),i(19,"div",11)(20,"label",48),n(21,"Weight Unit"),t(),i(22,"select",49),f(23,Ae,2,2,"option",20),t()()(),i(24,"h3",41),n(25,"Pricing"),t(),i(26,"div",10)(27,"div",11)(28,"label",50),n(29,"Standard Price"),t(),_(30,"input",51),t(),i(31,"div",11)(32,"label",52),n(33,"Currency"),t(),i(34,"select",53),f(35,ze,2,2,"option",20),t()()(),i(36,"h3",41),n(37,"Order Management"),t(),i(38,"div",10)(39,"div",11)(40,"label",54),n(41,"Minimum Order Quantity"),t(),_(42,"input",55),t(),i(43,"div",11)(44,"label",56),n(45,"Lead Time (days)"),t(),_(46,"input",57),t()(),i(47,"h3",41),n(48,"Material Linkage"),t(),i(49,"div",11)(50,"label",58),n(51,"Linked Material"),t(),i(52,"select",59)(53,"option",60),n(54,"-- No linked material --"),t(),f(55,Ge,2,3,"option",61),t(),i(56,"span",62),n(57,"Link this product to a finished goods material for inventory tracking"),t()()()),r&2){let e=s(2);a(23),l("ngForOf",e.weightUnits),a(12),l("ngForOf",e.currencies),a(18),l("ngValue",null),a(2),l("ngForOf",e.materials)}}function Be(r,c){if(r&1){let e=b();i(0,"div",6)(1,"form",7),g("ngSubmit",function(){p(e);let d=s();return m(d.onSubmit())}),f(2,Ve,2,1,"div",8),i(3,"div",9)(4,"h2"),n(5,"Product Information"),t(),i(6,"div",10)(7,"div",11)(8,"label",12),n(9,"Product SKU *"),t(),_(10,"input",13),f(11,Ne,2,1,"span",14),t(),i(12,"div",11)(13,"label",15),n(14,"Product Name *"),t(),_(15,"input",16),f(16,De,2,1,"span",14),t()(),i(17,"div",10)(18,"div",11)(19,"label",17),n(20,"Unit of Measure *"),t(),i(21,"select",18)(22,"option",19),n(23,"Select a unit..."),t(),f(24,Fe,2,2,"option",20),t(),f(25,Ue,2,1,"span",14),t(),f(26,Le,8,0,"div",21),t(),i(27,"div",22)(28,"label",23),n(29,"Description"),t(),_(30,"textarea",24),t()(),i(31,"div",25)(32,"h2",26),g("click",function(){p(e);let d=s();return m(d.toggleExtendedFields())}),i(33,"span",27),n(34),t(),n(35," Extended Properties "),i(36,"span",28),n(37,"Optional"),t()(),f(38,Re,58,4,"div",29),t(),i(39,"div",30)(40,"button",31),g("click",function(){p(e);let d=s();return m(d.cancel())}),n(41," Cancel "),t(),i(42,"button",32),n(43),t()()()()}if(r&2){let e=s();a(),l("formGroup",e.form),a(),l("ngIf",e.error),a(8),E("error",e.hasError("sku")),a(),l("ngIf",e.hasError("sku")),a(4),E("error",e.hasError("productName")),a(),l("ngIf",e.hasError("productName")),a(5),E("error",e.hasError("baseUnit")),a(3),l("ngForOf",e.units),a(),l("ngIf",e.hasError("baseUnit")),a(),l("ngIf",e.isEditMode),a(8),x(e.showExtendedFields?"\u2212":"+"),a(4),l("ngIf",e.showExtendedFields),a(2),l("disabled",e.saving),a(2),l("disabled",e.saving||e.form.invalid),a(),h(" ",e.saving?"Saving...":e.isEditMode?"Update Product":"Create Product"," ")}}var J=(()=>{class r{constructor(e,o,d,u){this.fb=e,this.apiService=o,this.route=d,this.router=u,this.isEditMode=!1,this.productId=null,this.loading=!1,this.saving=!1,this.error="",this.showExtendedFields=!1,this.materials=[],this.units=ce,this.weightUnits=[{value:"KG",label:"Kilograms (KG)"},{value:"T",label:"Metric Tons (T)"},{value:"LB",label:"Pounds (LB)"},{value:"G",label:"Grams (G)"}],this.currencies=[{value:"USD",label:"USD - US Dollar"},{value:"EUR",label:"EUR - Euro"},{value:"INR",label:"INR - Indian Rupee"},{value:"GBP",label:"GBP - British Pound"},{value:"JPY",label:"JPY - Japanese Yen"}]}ngOnInit(){this.initForm(),this.loadMaterials();let e=this.route.snapshot.paramMap.get("id");e&&(this.isEditMode=!0,this.productId=+e,this.form.get("sku")?.disable(),this.loadProduct())}initForm(){this.form=this.fb.group({sku:["",[v.required,v.maxLength(50)]],productName:["",[v.required,v.maxLength(200)]],description:["",v.maxLength(500)],baseUnit:["",v.required],status:["ACTIVE"],productCategory:["",v.maxLength(100)],productGroup:["",v.maxLength(100)],weightPerUnit:[null,[v.min(0)]],weightUnit:["KG"],standardPrice:[null,[v.min(0)]],priceCurrency:["USD"],minOrderQty:[null,[v.min(0)]],leadTimeDays:[null,[v.min(0),v.max(365)]],materialId:[null]})}loadMaterials(){this.apiService.getAllMaterials().subscribe({next:e=>{this.materials=e.filter(o=>o.status==="ACTIVE")},error:()=>{}})}toggleExtendedFields(){this.showExtendedFields=!this.showExtendedFields}loadProduct(){this.productId&&(this.loading=!0,this.apiService.getProductById(this.productId).subscribe({next:e=>{this.form.patchValue({sku:e.sku,productName:e.productName,description:e.description||"",baseUnit:e.baseUnit,status:e.status,productCategory:e.productCategory||"",productGroup:e.productGroup||"",weightPerUnit:e.weightPerUnit,weightUnit:e.weightUnit||"KG",standardPrice:e.standardPrice,priceCurrency:e.priceCurrency||"USD",minOrderQty:e.minOrderQty,leadTimeDays:e.leadTimeDays,materialId:e.materialId}),(e.productCategory||e.productGroup||e.weightPerUnit||e.standardPrice||e.minOrderQty||e.leadTimeDays||e.materialId)&&(this.showExtendedFields=!0),this.loading=!1},error:e=>{this.error=e.error?.message||"Failed to load product.",this.loading=!1}}))}onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.saving=!0,this.error="";let e=this.form.getRawValue(),o={productCategory:e.productCategory||void 0,productGroup:e.productGroup||void 0,weightPerUnit:e.weightPerUnit??void 0,weightUnit:e.weightPerUnit?e.weightUnit:void 0,standardPrice:e.standardPrice??void 0,priceCurrency:e.standardPrice?e.priceCurrency:void 0,minOrderQty:e.minOrderQty??void 0,leadTimeDays:e.leadTimeDays??void 0,materialId:e.materialId??void 0};if(this.isEditMode&&this.productId){let d=G({sku:e.sku,productName:e.productName,description:e.description||void 0,baseUnit:e.baseUnit,status:e.status},o);this.apiService.updateProduct(this.productId,d).subscribe({next:()=>{this.saving=!1,this.router.navigate(["/manage/products"])},error:u=>{this.saving=!1,this.error=u.error?.message||"Failed to update product."}})}else{let d=G({sku:e.sku,productName:e.productName,description:e.description||void 0,baseUnit:e.baseUnit},o);this.apiService.createProduct(d).subscribe({next:()=>{this.saving=!1,this.router.navigate(["/manage/products"])},error:u=>{this.saving=!1,this.error=u.error?.message||"Failed to create product."}})}}cancel(){this.router.navigate(["/manage/products"])}hasError(e){let o=this.form.get(e);return!!(o&&o.invalid&&o.touched)}getError(e){let o=this.form.get(e);return!o||!o.errors?"":o.errors.required?`${e} is required`:o.errors.maxlength?`${e} is too long`:"Invalid value"}static{this.\u0275fac=function(o){return new(o||r)(C(de),C(w),C(N),C(M))}}static{this.\u0275cmp=S({type:r,selectors:[["app-product-form"]],decls:6,vars:3,consts:[[1,"product-form-page"],[1,"page-header"],[1,"page-title"],["class","loading",4,"ngIf"],["class","form-container",4,"ngIf"],[1,"loading"],[1,"form-container"],[3,"ngSubmit","formGroup"],["class","error-banner",4,"ngIf"],[1,"form-section"],[1,"form-row"],[1,"form-group"],["for","sku"],["type","text","id","sku","formControlName","sku","placeholder","e.g., SKU-001, PROD-A1"],["class","error-text",4,"ngIf"],["for","productName"],["type","text","id","productName","formControlName","productName","placeholder","Enter product name"],["for","baseUnit"],["id","baseUnit","formControlName","baseUnit"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","form-group",4,"ngIf"],[1,"form-group","full-width"],["for","description"],["id","description","formControlName","description","rows","3","placeholder","Optional description of the product"],[1,"form-section","collapsible"],[1,"section-header",3,"click"],[1,"toggle-icon"],[1,"optional-badge"],["class","collapsible-content",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"error-banner"],[1,"error-text"],[3,"value"],["for","status"],["id","status","formControlName","status"],["value","ACTIVE"],["value","INACTIVE"],[1,"collapsible-content"],[1,"subsection-header"],["for","productCategory"],["type","text","id","productCategory","formControlName","productCategory","placeholder","e.g., Steel Products"],["for","productGroup"],["type","text","id","productGroup","formControlName","productGroup","placeholder","e.g., Hot Rolled"],["for","weightPerUnit"],["type","number","id","weightPerUnit","formControlName","weightPerUnit","step","0.001","min","0","placeholder","e.g., 1.5"],["for","weightUnit"],["id","weightUnit","formControlName","weightUnit"],["for","standardPrice"],["type","number","id","standardPrice","formControlName","standardPrice","step","0.01","min","0","placeholder","e.g., 500.00"],["for","priceCurrency"],["id","priceCurrency","formControlName","priceCurrency"],["for","minOrderQty"],["type","number","id","minOrderQty","formControlName","minOrderQty","step","0.01","min","0","placeholder","e.g., 10"],["for","leadTimeDays"],["type","number","id","leadTimeDays","formControlName","leadTimeDays","min","0","max","365","placeholder","e.g., 14"],["for","materialId"],["id","materialId","formControlName","materialId"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"help-text"]],template:function(o,d){o&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),n(3),t()(),f(4,Te,2,0,"div",3)(5,Be,44,18,"div",4),t()),o&2&&(a(3),x(d.isEditMode?"Edit Product":"New Product"),a(),l("ngIf",d.loading),a(),l("ngIf",!d.loading))},dependencies:[V,y,te,L,A,D,ie,U,F,X,ae,oe,ne,re],styles:[".product-form-page[_ngcontent-%COMP%]{padding:20px;max-width:800px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;color:#333}.loading[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.form-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 1px 3px #0000001a;padding:24px}.error-banner[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:12px 16px;border-radius:4px;margin-bottom:20px}.form-section[_ngcontent-%COMP%]{margin-bottom:32px}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333;margin:0 0 16px;padding-bottom:8px;border-bottom:1px solid #eee}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:16px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#555;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#1976d2}.form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select.error[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea.error[_ngcontent-%COMP%]{border-color:#d32f2f}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background:#f5f5f5;cursor:not-allowed}.error-text[_ngcontent-%COMP%]{font-size:12px;color:#d32f2f}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding-top:20px;border-top:1px solid #eee}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;font-size:14px;font-weight:500;transition:background .2s}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background:#1976d2;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#1565c0}.btn-secondary[_ngcontent-%COMP%]{background:#757575;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#616161}.form-section.collapsible[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:8px;padding:0;overflow:hidden}.section-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;padding:16px 20px;margin:0;background:#fafafa;border-bottom:none;-webkit-user-select:none;user-select:none;transition:background .2s}.section-header[_ngcontent-%COMP%]:hover{background:#f0f0f0}.toggle-icon[_ngcontent-%COMP%]{width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-weight:700;color:#666}.optional-badge[_ngcontent-%COMP%]{margin-left:auto;font-size:11px;font-weight:500;color:#888;background:#e8e8e8;padding:2px 8px;border-radius:10px}.collapsible-content[_ngcontent-%COMP%]{padding:20px;border-top:1px solid #e0e0e0}.subsection-header[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#666;margin:0 0 12px;text-transform:uppercase;letter-spacing:.5px}.subsection-header[_ngcontent-%COMP%]:not(:first-child){margin-top:24px}.help-text[_ngcontent-%COMP%]{font-size:12px;color:#888;font-style:italic}@media (max-width: 600px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return r})();function je(r,c){if(r&1){let e=b();i(0,"div",10)(1,"button",11),g("click",function(){p(e);let d=s();return m(d.viewBom())}),_(2,"i",12),n(3," View BOM "),t(),i(4,"button",11),g("click",function(){p(e);let d=s();return m(d.editProduct())}),_(5,"i",13),n(6," Edit "),t(),i(7,"button",14),g("click",function(){p(e);let d=s();return m(d.toggleStatus())}),_(8,"i",15),n(9),t()()}if(r&2){let e=s();a(7),l("ngClass",e.product.status==="ACTIVE"?"btn-danger":"btn-success"),a(),l("ngClass",e.product.status==="ACTIVE"?"fa-ban":"fa-check"),a(),h(" ",e.product.status==="ACTIVE"?"Deactivate":"Activate"," ")}}function Ke(r,c){r&1&&(i(0,"div",16),_(1,"app-loading-spinner",17),t())}function Qe(r,c){if(r&1&&(i(0,"div",18),n(1),t()),r&2){let e=s();a(),h(" ",e.error," ")}}function qe(r,c){if(r&1&&(i(0,"div",19)(1,"div",20)(2,"div",21)(3,"h2"),n(4),t(),i(5,"span",22),n(6),t()(),i(7,"div",23)(8,"div",24)(9,"h3"),n(10,"Basic Information"),t(),i(11,"div",25)(12,"span",26),n(13,"Product ID"),t(),i(14,"span",27),n(15),t()(),i(16,"div",25)(17,"span",26),n(18,"SKU"),t(),i(19,"span",28),n(20),t()(),i(21,"div",25)(22,"span",26),n(23,"Base Unit"),t(),i(24,"span",27),n(25),t()()(),i(26,"div",24)(27,"h3"),n(28,"Description"),t(),i(29,"div",29),n(30),t()(),i(31,"div",24)(32,"h3"),n(33,"Timestamps"),t(),i(34,"div",25)(35,"span",26),n(36,"Created On"),t(),i(37,"span",27),n(38),Q(39,"date"),t()(),i(40,"div",25)(41,"span",26),n(42,"Updated On"),t(),i(43,"span",27),n(44),Q(45,"date"),t()()()()()()),r&2){let e=s();a(4),x(e.product.productName),a(),l("ngClass",e.getStatusClass(e.product.status)),a(),h(" ",e.product.status," "),a(9),x(e.product.productId),a(5),x(e.product.sku),a(5),x(e.product.baseUnit),a(5),h(" ",e.product.description||"No description provided"," "),a(8),x(q(39,9,e.product.createdOn,"medium")),a(6),x(q(45,12,e.product.updatedOn,"medium"))}}var ve=(()=>{class r{constructor(e,o,d){this.route=e,this.router=o,this.apiService=d,this.product=null,this.loading=!0,this.error=null}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e?this.loadProduct(+e):(this.error="No product ID provided",this.loading=!1)}loadProduct(e){this.loading=!0,this.error=null,this.apiService.getProductById(e).subscribe({next:o=>{this.product=o,this.loading=!1},error:o=>{console.error("Error loading product:",o),this.error="Failed to load product",this.loading=!1}})}editProduct(){this.product&&this.router.navigate(["/manage/products",this.product.productId,"edit"])}viewBom(){this.product&&this.router.navigate(["/manage/bom",this.product.sku])}goBack(){this.router.navigate(["/manage/products"])}getStatusClass(e){switch(e?.toUpperCase()){case"ACTIVE":return"status-active";case"INACTIVE":return"status-inactive";default:return""}}toggleStatus(){this.product&&(this.product.status==="ACTIVE"?confirm(`Are you sure you want to deactivate product "${this.product.productName}"?`)&&this.apiService.deleteProduct(this.product.productId).subscribe({next:()=>{this.loadProduct(this.product.productId)},error:e=>{console.error("Error deactivating product:",e),this.error="Failed to deactivate product"}}):this.apiService.activateProduct(this.product.productId).subscribe({next:()=>{this.loadProduct(this.product.productId)},error:e=>{console.error("Error activating product:",e),this.error="Failed to activate product"}}))}static{this.\u0275fac=function(o){return new(o||r)(C(N),C(M),C(w))}}static{this.\u0275cmp=S({type:r,selectors:[["app-product-detail"]],decls:12,vars:4,consts:[[1,"detail-container"],[1,"page-header"],[1,"header-left"],[1,"btn","btn-back",3,"click"],[1,"fas","fa-arrow-left"],[1,"page-title"],["class","header-actions",4,"ngIf"],["class","loading",4,"ngIf"],["class","error-message",4,"ngIf"],["class","detail-content",4,"ngIf"],[1,"header-actions"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-sitemap"],[1,"fas","fa-edit"],[1,"btn",3,"click","ngClass"],[1,"fas",3,"ngClass"],[1,"loading"],["message","Loading product..."],[1,"error-message"],[1,"detail-content"],[1,"detail-card"],[1,"card-header"],[1,"status-badge",3,"ngClass"],[1,"detail-grid"],[1,"detail-section"],[1,"detail-row"],[1,"label"],[1,"value"],[1,"value","sku"],[1,"description-text"]],template:function(o,d){o&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),g("click",function(){return d.goBack()}),_(4,"i",4),n(5," Back "),t(),i(6,"h1",5),n(7,"Product Details"),t()(),f(8,je,10,3,"div",6),t(),f(9,Ke,2,0,"div",7)(10,Qe,2,1,"div",8)(11,qe,46,15,"div",9),t()),o&2&&(a(8),l("ngIf",d.product),a(),l("ngIf",d.loading),a(),l("ngIf",d.error),a(),l("ngIf",!d.loading&&d.product))},dependencies:[T,y,me,H],styles:[".detail-container[_ngcontent-%COMP%]{padding:24px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;color:#1e293b}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:48px}.error-message[_ngcontent-%COMP%]{background:#fef2f2;border:1px solid #fecaca;color:#dc2626;padding:12px 16px;border-radius:8px;margin-bottom:16px}.detail-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.detail-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:8px;overflow:hidden}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;background:#f8fafc;border-bottom:1px solid #e2e8f0}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:#1e293b}.detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:24px;padding:24px}.detail-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.detail-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;font-weight:600;color:#64748b;text-transform:uppercase;letter-spacing:.05em}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #f1f5f9}.detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.label[_ngcontent-%COMP%]{color:#64748b;font-size:14px}.value[_ngcontent-%COMP%]{color:#1e293b;font-weight:500;font-size:14px}.value.sku[_ngcontent-%COMP%]{font-family:monospace;background:#f1f5f9;padding:2px 8px;border-radius:4px}.description-text[_ngcontent-%COMP%]{color:#475569;font-size:14px;line-height:1.6;padding:12px;background:#f8fafc;border-radius:6px}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500;text-transform:uppercase}.status-active[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.status-inactive[_ngcontent-%COMP%]{background:#f1f5f9;color:#64748b}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .2s}.btn-back[_ngcontent-%COMP%]{background:transparent;color:#64748b;padding:8px 12px}.btn-back[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:#1e293b}.btn-secondary[_ngcontent-%COMP%]{background:#f1f5f9;color:#475569}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e2e8f0}.btn-danger[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626;border:1px solid #fecaca}.btn-danger[_ngcontent-%COMP%]:hover{background:#fee2e2}.btn-success[_ngcontent-%COMP%]{background:#dcfce7;color:#166534;border:1px solid #bbf7d0}.btn-success[_ngcontent-%COMP%]:hover{background:#bbf7d0}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.detail-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return r})();var We=[{path:"",component:he},{path:"new",component:J},{path:":id",component:ve},{path:":id/edit",component:J}],Ce=(()=>{class r{static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275mod=k({type:r})}static{this.\u0275inj=I({imports:[$.forChild(We),$]})}}return r})();var vt=(()=>{class r{static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275mod=k({type:r})}static{this.\u0275inj=I({imports:[Z,le,se,Ce,ge]})}}return r})();export{vt as ProductsModule};

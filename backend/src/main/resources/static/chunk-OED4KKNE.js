import{d as A,e as ne,g as ie}from"./chunk-6Z3JMDKD.js";import{d as T}from"./chunk-YA6CE7UY.js";import"./chunk-2FWM6P5C.js";import{$ as R,A as G,Aa as q,B as Y,D as v,E as x,F as l,Ia as K,J as B,Ja as X,K as o,Ka as Z,L as p,M as f,N as W,Pa as ee,Q as y,Qa as te,R as S,S as E,W as M,Y as O,Z as U,aa as I,ba as w,fa as V,g as j,ha as J,i as P,j as N,l as _,m as u,o as r,oa as H,p as b,qa as L,r as m,t as c,ta as $,v as D,wa as Q,x as n,y as t,ya as F,z as C}from"./chunk-HJUEQZSK.js";function ge(i,d){if(i&1){let e=v();n(0,"div",9),x("click",function(){_(e);let s=l();return u(s.clearMessages())}),o(1),n(2,"button",10),C(3,"i",11),t()()}if(i&2){let e=l();r(),f(" ",e.error," ")}}function _e(i,d){if(i&1){let e=v();n(0,"div",12),x("click",function(){_(e);let s=l();return u(s.clearMessages())}),o(1),n(2,"button",10),C(3,"i",11),t()()}if(i&2){let e=l();r(),f(" ",e.success," ")}}function ue(i,d){i&1&&(n(0,"div",13),C(1,"app-loading-spinner",14),t())}function fe(i,d){if(i&1&&(n(0,"span",20),o(1),t()),i&2){let e=l(2);r(),f(" ",e.qualityPendingProcesses.length," ")}}function xe(i,d){if(i&1&&(n(0,"span",21),o(1),t()),i&2){let e=l(2);r(),f(" ",e.rejectedProcesses.length," ")}}function ve(i,d){if(i&1){let e=v();n(0,"tr")(1,"td"),o(2),t(),n(3,"td"),o(4),t(),n(5,"td"),o(6),t(),n(7,"td"),C(8,"app-status-badge",30),t(),n(9,"td"),o(10),M(11,"date"),t(),n(12,"td",31)(13,"button",32),x("click",function(){let s=_(e).$implicit,g=l(4);return u(g.openDecisionModal(s,"accept"))}),o(14," Accept "),t(),n(15,"button",33),x("click",function(){let s=_(e).$implicit,g=l(4);return u(g.openDecisionModal(s,"reject"))}),o(16," Reject "),t()()()}if(i&2){let e=d.$implicit,a=l(4);r(2),p(e.processId),r(2),p(e.stageName),r(2),p(a.getOperationsSummary(e)),r(2),c("status",e.status),r(2),p(O(11,7,e.updatedOn,"short")),r(3),c("disabled",a.processing),r(2),c("disabled",a.processing)}}function Ce(i,d){if(i&1&&(n(0,"table",28)(1,"thead")(2,"tr")(3,"th"),o(4,"Process ID"),t(),n(5,"th"),o(6,"Stage Name"),t(),n(7,"th"),o(8,"Operations"),t(),n(9,"th"),o(10,"Status"),t(),n(11,"th"),o(12,"Updated"),t(),n(13,"th"),o(14,"Actions"),t()()(),n(15,"tbody"),m(16,ve,17,10,"tr",29),t()()),i&2){let e=l(3);r(16),c("ngForOf",e.qualityPendingProcesses)}}function he(i,d){i&1&&(n(0,"p",34),o(1," No processes awaiting quality inspection "),t())}function be(i,d){if(i&1&&(n(0,"div",22)(1,"div",23)(2,"div",24)(3,"span"),o(4,"Processes Awaiting Quality Inspection"),t()(),n(5,"div",25),m(6,Ce,17,1,"table",26)(7,he,2,0,"p",27),t()()()),i&2){let e=l(2);r(6),c("ngIf",e.qualityPendingProcesses.length>0),r(),c("ngIf",e.qualityPendingProcesses.length===0)}}function Pe(i,d){if(i&1){let e=v();n(0,"tr")(1,"td"),o(2),t(),n(3,"td"),o(4),t(),n(5,"td"),o(6),t(),n(7,"td"),C(8,"app-status-badge",30),t(),n(9,"td"),o(10),M(11,"date"),t(),n(12,"td",31)(13,"button",35),x("click",function(){let s=_(e).$implicit,g=l(4);return u(g.retryProcess(s))}),o(14," Retry Inspection "),t()()()}if(i&2){let e=d.$implicit,a=l(4);r(2),p(e.processId),r(2),p(e.stageName),r(2),p(a.getOperationsSummary(e)),r(2),c("status",e.status),r(2),p(O(11,6,e.updatedOn,"short")),r(3),c("disabled",a.processing)}}function ye(i,d){if(i&1&&(n(0,"table",28)(1,"thead")(2,"tr")(3,"th"),o(4,"Process ID"),t(),n(5,"th"),o(6,"Stage Name"),t(),n(7,"th"),o(8,"Operations"),t(),n(9,"th"),o(10,"Status"),t(),n(11,"th"),o(12,"Updated"),t(),n(13,"th"),o(14,"Actions"),t()()(),n(15,"tbody"),m(16,Pe,15,9,"tr",29),t()()),i&2){let e=l(3);r(16),c("ngForOf",e.rejectedProcesses)}}function Se(i,d){i&1&&(n(0,"p",34),o(1," No rejected processes "),t())}function Ee(i,d){if(i&1&&(n(0,"div",22)(1,"div",23)(2,"div",24)(3,"span"),o(4,"Rejected Processes"),t()(),n(5,"div",25),m(6,ye,17,1,"table",26)(7,Se,2,0,"p",27),t()()()),i&2){let e=l(2);r(6),c("ngIf",e.rejectedProcesses.length>0),r(),c("ngIf",e.rejectedProcesses.length===0)}}function Me(i,d){if(i&1){let e=v();n(0,"div")(1,"div",15)(2,"button",16),x("click",function(){_(e);let s=l();return u(s.setActiveTab("pending"))}),o(3," Quality Pending "),m(4,fe,2,1,"span",17),t(),n(5,"button",16),x("click",function(){_(e);let s=l();return u(s.setActiveTab("rejected"))}),o(6," Rejected "),m(7,xe,2,1,"span",18),t()(),m(8,be,8,2,"div",19)(9,Ee,8,2,"div",19),t()}if(i&2){let e=l();r(2),D("active",e.activeTab==="pending"),r(2),c("ngIf",e.qualityPendingProcesses.length>0),r(),D("active",e.activeTab==="rejected"),r(2),c("ngIf",e.rejectedProcesses.length>0),r(),c("ngIf",e.activeTab==="pending"),r(),c("ngIf",e.activeTab==="rejected")}}function Oe(i,d){if(i&1&&(n(0,"div",52)(1,"p")(2,"strong"),o(3,"Process ID:"),t(),o(4),t(),n(5,"p")(6,"strong"),o(7,"Stage Name:"),t(),o(8),t(),n(9,"p")(10,"strong"),o(11,"Operations:"),t(),o(12),t()()),i&2){let e=l(2);r(4),f(" ",e.selectedProcess.processId,""),r(4),f(" ",e.selectedProcess.stageName,""),r(4),f(" ",e.getOperationsSummary(e.selectedProcess),"")}}function Ie(i,d){i&1&&(n(0,"div",53)(1,"p"),o(2,"Are you sure you want to accept this process?"),t(),n(3,"p"),o(4,"The process will be marked as "),n(5,"strong"),o(6,"COMPLETED"),t(),o(7,"."),t()())}function we(i,d){i&1&&(n(0,"div",54)(1,"p"),o(2,"Please provide a reason for rejecting this process."),t(),n(3,"p"),o(4,"The process will be marked as "),n(5,"strong"),o(6,"REJECTED"),t(),o(7,"."),t()())}function Te(i,d){if(i&1){let e=v();n(0,"div",45)(1,"label",55),o(2,"Rejection Reason *"),t(),n(3,"textarea",56),E("ngModelChange",function(s){_(e);let g=l(2);return S(g.rejectReason,s)||(g.rejectReason=s),u(s)}),t()()}if(i&2){let e=l(2);r(3),y("ngModel",e.rejectReason)}}function ke(i,d){if(i&1&&(n(0,"div",57),o(1),t()),i&2){let e=l(2);r(),p(e.error)}}function De(i,d){if(i&1){let e=v();n(0,"div",36),x("click",function(){_(e);let s=l();return u(s.closeDecisionModal())}),n(1,"div",37),x("click",function(s){return _(e),u(s.stopPropagation())}),n(2,"div",38)(3,"h3"),o(4),t(),n(5,"button",39),x("click",function(){_(e);let s=l();return u(s.closeDecisionModal())}),C(6,"i",11),t()(),n(7,"div",40),m(8,Oe,13,3,"div",41)(9,Ie,8,0,"div",42)(10,we,8,0,"div",43)(11,Te,4,1,"div",44),n(12,"div",45)(13,"label",46),o(14,"Notes (Optional)"),t(),n(15,"textarea",47),E("ngModelChange",function(s){_(e);let g=l();return S(g.notes,s)||(g.notes=s),u(s)}),t()(),m(16,ke,2,1,"div",48),t(),n(17,"div",49)(18,"button",50),x("click",function(){_(e);let s=l();return u(s.closeDecisionModal())}),o(19,"Cancel"),t(),n(20,"button",51),x("click",function(){_(e);let s=l();return u(s.submitDecision())}),o(21),t()()()()}if(i&2){let e=l();r(2),D("accept-header",e.decisionType==="accept")("reject-header",e.decisionType==="reject"),r(2),p(e.decisionType==="accept"?"Accept Process":"Reject Process"),r(4),c("ngIf",e.selectedProcess),r(),c("ngIf",e.decisionType==="accept"),r(),c("ngIf",e.decisionType==="reject"),r(),c("ngIf",e.decisionType==="reject"),r(4),y("ngModel",e.notes),r(),c("ngIf",e.error),r(4),D("btn-success",e.decisionType==="accept")("btn-danger",e.decisionType==="reject"),c("disabled",e.processing||e.decisionType==="reject"&&!e.rejectReason.trim()),r(),f(" ",e.processing?"Processing...":e.decisionType==="accept"?"Accept":"Reject"," ")}}var ae=(()=>{class i{constructor(e,a){this.apiService=e,this.router=a,this.qualityPendingProcesses=[],this.rejectedProcesses=[],this.loading=!0,this.error="",this.success="",this.selectedProcess=null,this.showDecisionModal=!1,this.decisionType=null,this.rejectReason="",this.notes="",this.processing=!1,this.activeTab="pending"}ngOnInit(){this.loadProcesses()}loadProcesses(){this.loading=!0,this.error="",this.apiService.getQualityPendingProcesses().subscribe({next:e=>{this.qualityPendingProcesses=e,this.loadRejectedProcesses()},error:e=>{console.error("Error loading quality pending processes:",e),this.error="Failed to load quality pending processes",this.loading=!1}})}loadRejectedProcesses(){this.apiService.getProcessesByStatus("REJECTED").subscribe({next:e=>{this.rejectedProcesses=e,this.loading=!1},error:e=>{console.error("Error loading rejected processes:",e),this.loading=!1}})}setActiveTab(e){this.activeTab=e}openDecisionModal(e,a){this.selectedProcess=e,this.decisionType=a,this.rejectReason="",this.notes="",this.showDecisionModal=!0,this.error=""}closeDecisionModal(){this.showDecisionModal=!1,this.selectedProcess=null,this.decisionType=null,this.rejectReason="",this.notes=""}submitDecision(){if(!(!this.selectedProcess||!this.decisionType)){if(this.decisionType==="reject"&&!this.rejectReason.trim()){this.error="Rejection reason is required";return}this.processing=!0,this.error="",this.decisionType==="accept"?this.apiService.acceptProcess(this.selectedProcess.processId,this.notes).subscribe({next:e=>{this.success=`Process ${this.selectedProcess?.stageName} accepted and marked as completed`,this.closeDecisionModal(),this.loadProcesses(),this.processing=!1},error:e=>{console.error("Error accepting process:",e),this.error=e.error?.message||"Failed to accept process",this.processing=!1}}):this.apiService.rejectProcess(this.selectedProcess.processId,this.rejectReason,this.notes).subscribe({next:e=>{this.success=`Process ${this.selectedProcess?.stageName} rejected`,this.closeDecisionModal(),this.loadProcesses(),this.processing=!1},error:e=>{console.error("Error rejecting process:",e),this.error=e.error?.message||"Failed to reject process",this.processing=!1}})}}retryProcess(e){this.processing=!0,this.error="",this.apiService.updateProcessStatus({processId:e.processId,newStatus:"QUALITY_PENDING"}).subscribe({next:a=>{this.success=`Process ${e.stageName} moved back to quality pending for re-inspection`,this.loadProcesses(),this.processing=!1},error:a=>{console.error("Error retrying process:",a),this.error=a.error?.message||"Failed to retry process",this.processing=!1}})}getOperationsSummary(e){return!e.operations||e.operations.length===0?"No operations":`${e.operations.filter(s=>s.status==="CONFIRMED").length}/${e.operations.length} confirmed`}navigateToOrder(e){this.router.navigate(["/orders"])}clearMessages(){this.error="",this.success=""}static{this.\u0275fac=function(a){return new(a||i)(b(T),b(L))}}static{this.\u0275cmp=P({type:i,selectors:[["app-quality-pending"]],decls:11,vars:5,consts:[[1,"container"],[1,"page-header"],[1,"page-title"],[1,"page-subtitle"],["class","alert alert-error",3,"click",4,"ngIf"],["class","alert alert-success",3,"click",4,"ngIf"],["class","text-center",4,"ngIf"],[4,"ngIf"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"alert","alert-error",3,"click"],[1,"alert-close"],[1,"fas","fa-xmark"],[1,"alert","alert-success",3,"click"],[1,"text-center"],["message","Loading processes..."],[1,"tab-nav"],[1,"tab-btn",3,"click"],["class","badge",4,"ngIf"],["class","badge rejected",4,"ngIf"],["class","tab-content",4,"ngIf"],[1,"badge"],[1,"badge","rejected"],[1,"tab-content"],[1,"card"],[1,"card-header"],[1,"card-body"],["class","table",4,"ngIf"],["class","no-data",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],[3,"status"],[1,"actions-cell"],[1,"btn","btn-sm","btn-success",3,"click","disabled"],[1,"btn","btn-sm","btn-danger",3,"click","disabled"],[1,"no-data"],[1,"btn","btn-sm","btn-primary",3,"click","disabled"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"modal-body"],["class","process-details",4,"ngIf"],["class","decision-info accept-info",4,"ngIf"],["class","decision-info reject-info",4,"ngIf"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","notes"],["id","notes","rows","2","placeholder","Additional notes...",3,"ngModelChange","ngModel"],["class","alert alert-error modal-error",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn",3,"click","disabled"],[1,"process-details"],[1,"decision-info","accept-info"],[1,"decision-info","reject-info"],["for","rejectReason"],["id","rejectReason","rows","3","placeholder","Enter the reason for rejection...",3,"ngModelChange","ngModel"],[1,"alert","alert-error","modal-error"]],template:function(a,s){a&1&&(n(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"Quality Inspection"),t(),n(4,"p",3),o(5,"Review and approve or reject processes awaiting quality inspection"),t()(),m(6,ge,4,1,"div",4)(7,_e,4,1,"div",5)(8,ue,2,0,"div",6)(9,Me,10,8,"div",7),t(),m(10,De,22,17,"div",8)),a&2&&(r(6),c("ngIf",s.error),r(),c("ngIf",s.success),r(),c("ngIf",s.loading),r(),c("ngIf",!s.loading),r(),c("ngIf",s.showDecisionModal))},dependencies:[I,w,Q,F,q,A,ne,V],styles:['.page-subtitle[_ngcontent-%COMP%]{color:#666;font-size:14px;margin-top:4px}.tab-nav[_ngcontent-%COMP%]{display:flex;gap:4px;margin-bottom:20px;border-bottom:2px solid #e0e0e0;padding-bottom:0}.tab-btn[_ngcontent-%COMP%]{padding:12px 24px;border:none;background:transparent;cursor:pointer;font-size:14px;font-weight:500;color:#666;position:relative;display:flex;align-items:center;gap:8px}.tab-btn[_ngcontent-%COMP%]:hover, .tab-btn.active[_ngcontent-%COMP%]{color:#1976d2}.tab-btn.active[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-2px;left:0;right:0;height:2px;background:#1976d2}.tab-btn[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{background:#1976d2;color:#fff;padding:2px 8px;border-radius:12px;font-size:12px}.tab-btn[_ngcontent-%COMP%]   .badge.rejected[_ngcontent-%COMP%]{background:#c62828}.actions-cell[_ngcontent-%COMP%]{display:flex;gap:8px}.btn-danger[_ngcontent-%COMP%]{background-color:#c62828;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#b71c1c}.alert[_ngcontent-%COMP%]{padding:12px 16px;border-radius:4px;margin-bottom:16px;position:relative;cursor:pointer}.alert-success[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32;border:1px solid #a5d6a7}.alert-error[_ngcontent-%COMP%]{background:#ffebee;color:#c62828;border:1px solid #ef9a9a}.alert-close[_ngcontent-%COMP%]{position:absolute;right:12px;top:50%;transform:translateY(-50%);background:none;border:none;font-size:18px;cursor:pointer;color:inherit}.process-details[_ngcontent-%COMP%]{background:#f5f5f5;padding:12px;border-radius:4px;margin-bottom:16px}.process-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0}.decision-info[_ngcontent-%COMP%]{padding:12px;border-radius:4px;margin-bottom:16px}.decision-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0}.accept-info[_ngcontent-%COMP%]{background:#e8f5e9;border-left:4px solid #4caf50}.reject-info[_ngcontent-%COMP%]{background:#ffebee;border-left:4px solid #c62828}.modal-error[_ngcontent-%COMP%]{margin-bottom:0}']})}}return i})();function je(i,d){if(i&1&&(n(0,"option",16),o(1),t()),i&2){let e=d.$implicit;c("value",e),r(),p(e)}}function Ne(i,d){if(i&1&&(n(0,"div",17)(1,"div",18)(2,"span",19),o(3),t(),n(4,"span",20),o(5,"Total"),t()(),n(6,"div",21)(7,"span",19),o(8),t(),n(9,"span",20),o(10,"Ready"),t()(),n(11,"div",22)(12,"span",19),o(13),t(),n(14,"span",20),o(15,"In Progress"),t()(),n(16,"div",23)(17,"span",19),o(18),t(),n(19,"span",20),o(20,"Quality Pending"),t()(),n(21,"div",24)(22,"span",19),o(23),t(),n(24,"span",20),o(25,"Completed"),t()()()),i&2){let e=l();r(3),p(e.allProcesses.length),r(5),p(e.countByStatus("READY")),r(5),p(e.countByStatus("IN_PROGRESS")),r(5),p(e.countByStatus("QUALITY_PENDING")),r(5),p(e.countByStatus("COMPLETED"))}}function Re(i,d){if(i&1&&(n(0,"span",33),o(1),t()),i&2){let e=l().$implicit;c("ngClass",e.usageDecision==null?null:e.usageDecision.toLowerCase()),r(),f(" ",e.usageDecision," ")}}function Ve(i,d){i&1&&(n(0,"span"),o(1,"-"),t())}function Le(i,d){if(i&1&&(G(0),n(1,"span",34),o(2),t(),Y()),i&2){let e=l().$implicit,a=l(3);r(2),W("",a.getConfirmedCount(e),"/",a.getOperationCount(e)," confirmed")}}function Qe(i,d){i&1&&(n(0,"span"),o(1,"-"),t())}function Fe(i,d){if(i&1&&(n(0,"tr")(1,"td"),o(2),t(),n(3,"td"),o(4),t(),n(5,"td"),o(6),t(),n(7,"td")(8,"span",30),o(9),t()(),n(10,"td"),m(11,Re,2,2,"span",31)(12,Ve,2,0,"span",32),t(),n(13,"td"),o(14),t(),n(15,"td"),m(16,Le,3,2,"ng-container",32)(17,Qe,2,0,"span",32),t()()),i&2){let e=d.$implicit,a=l(3);r(2),p(e.processId),r(2),p(e.stageName),r(2),p(e.stageSequence),r(2),c("ngClass",a.getStatusClass(e.status)),r(),f(" ",e.status," "),r(2),c("ngIf",e.usageDecision),r(),c("ngIf",!e.usageDecision),r(2),p(a.getOperationCount(e)),r(2),c("ngIf",a.getOperationCount(e)>0),r(),c("ngIf",a.getOperationCount(e)===0)}}function qe(i,d){if(i&1&&(n(0,"table",28)(1,"thead")(2,"tr")(3,"th"),o(4,"ID"),t(),n(5,"th"),o(6,"Stage Name"),t(),n(7,"th"),o(8,"Sequence"),t(),n(9,"th"),o(10,"Status"),t(),n(11,"th"),o(12,"Decision"),t(),n(13,"th"),o(14,"Operations"),t(),n(15,"th"),o(16,"Progress"),t()()(),n(17,"tbody"),m(18,Fe,18,10,"tr",29),t()()),i&2){let e=l(2);r(18),c("ngForOf",e.processes)}}function Ae(i,d){i&1&&(n(0,"div",35)(1,"p"),o(2,"No processes found."),t()())}function ze(i,d){if(i&1&&(n(0,"div",36),o(1),t()),i&2){let e=l(2);r(),W(" Showing ",e.processes.length," of ",e.allProcesses.length," processes ")}}function Be(i,d){if(i&1&&(n(0,"div",25),m(1,qe,19,1,"table",26)(2,Ae,3,0,"ng-template",null,1,U)(4,ze,2,2,"div",27),t()),i&2){let e=B(3),a=l();r(),c("ngIf",a.processes.length>0)("ngIfElse",e),r(3),c("ngIf",a.processes.length>0)}}function We(i,d){i&1&&(n(0,"div",37),o(1,"Loading processes..."),t())}var se=(()=>{class i{constructor(e){this.apiService=e,this.allProcesses=[],this.processes=[],this.loading=!0,this.error="",this.filterStatus="all",this.searchTerm="",this.statuses=["READY","IN_PROGRESS","QUALITY_PENDING","COMPLETED","REJECTED","ON_HOLD"]}ngOnInit(){this.loadProcesses()}loadProcesses(){this.loading=!0,this.error="",this.allProcesses=[];let e=0,a=this.statuses.length;this.statuses.forEach(s=>{this.apiService.getProcessesByStatus(s).subscribe({next:g=>{this.allProcesses.push(...g),e++,e===a&&(this.allProcesses.sort((k,h)=>(h.processId||0)-(k.processId||0)),this.applyFilters(),this.loading=!1)},error:()=>{e++,e===a&&(this.applyFilters(),this.loading=!1)}})})}applyFilters(){let e=[...this.allProcesses];if(this.filterStatus&&this.filterStatus!=="all"&&(e=e.filter(a=>a.status===this.filterStatus)),this.searchTerm){let a=this.searchTerm.toLowerCase();e=e.filter(s=>s.stageName?.toLowerCase().includes(a)||String(s.processId).includes(a))}this.processes=e}onFilterStatusChange(e){this.filterStatus=e,this.applyFilters()}onSearchChange(e){this.searchTerm=e,this.applyFilters()}getStatusClass(e){return e?.toLowerCase().replace(/_/g,"-")||""}getOperationCount(e){return e.operations?.length||0}getConfirmedCount(e){return e.operations?.filter(a=>a.status==="CONFIRMED").length||0}countByStatus(e){return this.allProcesses.filter(a=>a.status===e).length}static{this.\u0275fac=function(a){return new(a||i)(b(T))}}static{this.\u0275cmp=P({type:i,selectors:[["app-process-list"]],decls:21,vars:6,consts:[["loadingTpl",""],["emptyTpl",""],[1,"process-list-page"],[1,"page-header"],[1,"card"],[1,"filters"],[1,"filter-group"],["for","status-filter"],["id","status-filter",3,"ngModelChange","change","ngModel"],["value","all"],[3,"value",4,"ngFor","ngForOf"],[1,"filter-group","search-group"],["for","search"],["type","text","id","search","placeholder","Search by stage name or ID...",3,"ngModelChange","input","ngModel"],["class","summary-cards",4,"ngIf"],["class","table-container",4,"ngIf","ngIfElse"],[3,"value"],[1,"summary-cards"],[1,"summary-card"],[1,"count"],[1,"label"],[1,"summary-card","ready"],[1,"summary-card","in-progress"],[1,"summary-card","quality-pending"],[1,"summary-card","completed"],[1,"table-container"],["class","data-table",4,"ngIf","ngIfElse"],["class","result-count",4,"ngIf"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"status-badge",3,"ngClass"],["class","decision-badge",3,"ngClass",4,"ngIf"],[4,"ngIf"],[1,"decision-badge",3,"ngClass"],[1,"progress-text"],[1,"empty-state"],[1,"result-count"],[1,"loading"]],template:function(a,s){if(a&1){let g=v();n(0,"div",2)(1,"div",3)(2,"h1"),o(3,"Processes"),t()(),n(4,"div",4)(5,"div",5)(6,"div",6)(7,"label",7),o(8,"Status:"),t(),n(9,"select",8),E("ngModelChange",function(h){return _(g),S(s.filterStatus,h)||(s.filterStatus=h),u(h)}),x("change",function(){return _(g),u(s.onFilterStatusChange(s.filterStatus))}),n(10,"option",9),o(11,"All Statuses"),t(),m(12,je,2,2,"option",10),t()(),n(13,"div",11)(14,"label",12),o(15,"Search:"),t(),n(16,"input",13),E("ngModelChange",function(h){return _(g),S(s.searchTerm,h)||(s.searchTerm=h),u(h)}),x("input",function(){return _(g),u(s.onSearchChange(s.searchTerm))}),t()()()(),m(17,Ne,26,5,"div",14)(18,Be,5,3,"div",15)(19,We,2,0,"ng-template",null,0,U),t()}if(a&2){let g=B(20);r(9),y("ngModel",s.filterStatus),r(3),c("ngForOf",s.statuses),r(4),y("ngModel",s.searchTerm),r(),c("ngIf",!s.loading),r(),c("ngIf",!s.loading)("ngIfElse",g)}},dependencies:[R,I,w,X,Z,Q,K,F,q],styles:['.process-list-page[_ngcontent-%COMP%]{padding:20px}.summary-cards[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:20px;flex-wrap:wrap}.summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px 24px;box-shadow:0 1px 3px #0000001a;text-align:center;min-width:120px;border-top:3px solid #dee2e6}.summary-card[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{display:block;font-size:24px;font-weight:700;color:#333}.summary-card[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:#666;text-transform:uppercase}.summary-card.ready[_ngcontent-%COMP%]{border-top-color:#4caf50}.summary-card.in-progress[_ngcontent-%COMP%]{border-top-color:#1976d2}.summary-card.quality-pending[_ngcontent-%COMP%]{border-top-color:#ff9800}.summary-card.completed[_ngcontent-%COMP%]{border-top-color:#388e3c}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 1px 3px #0000001a;overflow:hidden}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500;text-transform:uppercase}.status-badge.ready[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-badge.in-progress[_ngcontent-%COMP%]{background:#cce5ff;color:#004085}.status-badge.quality-pending[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.status-badge.completed[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-badge.rejected[_ngcontent-%COMP%], .status-badge.on-hold[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.decision-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:500;text-transform:uppercase}.decision-badge.pending[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.decision-badge.accept[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.decision-badge.reject[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.progress-bar-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.progress-bar-container[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:8px;background:#4caf50;border-radius:4px;min-width:0;flex:0 0 auto;width:60px;position:relative}.progress-bar-container[_ngcontent-%COMP%]{position:relative}.progress-bar-container[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{height:8px;background:#e9ecef;border-radius:4px;width:80px;overflow:hidden}.progress-bar-container[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]:after{content:"";display:block;height:100%;background:#4caf50;border-radius:4px}.progress-text[_ngcontent-%COMP%]{font-size:12px;color:#666;white-space:nowrap}.result-count[_ngcontent-%COMP%]{padding:12px 16px;border-top:1px solid #eee;font-size:13px;color:#666}.empty-state[_ngcontent-%COMP%], .loading[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}']})}}return i})();function Ue(i,d){i&1&&(n(0,"div",8),C(1,"app-loading-spinner",9),t())}function $e(i,d){if(i&1&&(n(0,"div",10),o(1),t()),i&2){let e=l();r(),f(" ",e.error," ")}}function Ge(i,d){if(i&1&&(n(0,"span",30),o(1),t()),i&2){let e=l(2);c("ngClass",e.getDecisionClass(e.process.usageDecision)),r(),f(" ",e.process.usageDecision," ")}}function Ye(i,d){if(i&1&&(n(0,"div",21)(1,"span",22),o(2,"Order Line ID"),t(),n(3,"span",23),o(4),t()()),i&2){let e=l(2);r(4),p(e.process.orderLineId)}}function Je(i,d){if(i&1&&(n(0,"div",31)(1,"span",32),o(2,"Quality Decision:"),t(),n(3,"span",30),o(4),t()()),i&2){let e=l(2);r(3),c("ngClass",e.getDecisionClass(e.process.usageDecision)),r(),f(" ",e.process.usageDecision," ")}}function He(i,d){if(i&1&&(n(0,"div",43),o(1),t()),i&2){let e=l().$implicit;r(),p(e.operationType)}}function Ke(i,d){if(i&1){let e=v();n(0,"div",35),x("click",function(){let s=_(e).$implicit,g=l(3);return u(g.viewOperation(s.operationId))}),n(1,"div",36),o(2),t(),n(3,"div",37)(4,"div",38),o(5),t(),n(6,"div",39),o(7),t()(),m(8,He,2,1,"div",40),n(9,"span",41),o(10),t(),C(11,"i",42),t()}if(i&2){let e=d.$implicit,a=l(3);r(2),p(e.sequenceNumber),r(3),p(e.operationName),r(2),p(e.operationCode),r(),c("ngIf",e.operationType),r(),c("ngClass",a.getOperationStatusClass(e.status)),r(),f(" ",e.status," ")}}function Xe(i,d){if(i&1&&(n(0,"div",12)(1,"div",13)(2,"h2"),o(3),t()(),n(4,"div",33),m(5,Ke,12,6,"div",34),t()()),i&2){let e=l(2);r(3),f("Operations (",e.process.operations.length,")"),r(2),c("ngForOf",e.process.operations)}}function Ze(i,d){i&1&&(n(0,"div",44)(1,"p"),o(2,"No operations defined for this process."),t()())}function et(i,d){if(i&1&&(n(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14)(4,"h2"),o(5),t(),n(6,"span",15),o(7),t()(),n(8,"div",16)(9,"span",17),o(10),t(),m(11,Ge,2,2,"span",18),t()(),n(12,"div",19)(13,"div",20)(14,"h3"),o(15,"Process Information"),t(),n(16,"div",21)(17,"span",22),o(18,"Process ID"),t(),n(19,"span",23),o(20),t()(),n(21,"div",21)(22,"span",22),o(23,"Stage Name"),t(),n(24,"span",23),o(25),t()(),n(26,"div",21)(27,"span",22),o(28,"Sequence"),t(),n(29,"span",23),o(30),t()(),m(31,Ye,5,1,"div",24),t(),n(32,"div",20)(33,"h3"),o(34,"Status"),t(),n(35,"div",25)(36,"span",26),o(37),t()(),m(38,Je,5,2,"div",27),t(),n(39,"div",20)(40,"h3"),o(41,"Timestamps"),t(),n(42,"div",21)(43,"span",22),o(44,"Created On"),t(),n(45,"span",23),o(46),M(47,"date"),t()(),n(48,"div",21)(49,"span",22),o(50,"Created By"),t(),n(51,"span",23),o(52),t()(),n(53,"div",21)(54,"span",22),o(55,"Updated On"),t(),n(56,"span",23),o(57),M(58,"date"),t()(),n(59,"div",21)(60,"span",22),o(61,"Updated By"),t(),n(62,"span",23),o(63),t()()()()(),m(64,Xe,6,2,"div",28)(65,Ze,3,0,"div",29),t()),i&2){let e=l();r(5),p(e.process.stageName),r(2),f("Stage ",e.process.stageSequence,""),r(2),c("ngClass",e.getStatusClass(e.process.status)),r(),f(" ",e.process.status," "),r(),c("ngIf",e.process.usageDecision),r(9),p(e.process.processId),r(5),p(e.process.stageName),r(5),p(e.process.stageSequence),r(),c("ngIf",e.process.orderLineId),r(5),c("ngClass",e.getStatusClass(e.process.status)),r(),f(" ",e.process.status," "),r(),c("ngIf",e.process.usageDecision),r(8),p(O(47,18,e.process.createdOn,"medium")),r(6),p(e.process.createdBy||"-"),r(5),p(O(58,21,e.process.updatedOn,"medium")),r(6),p(e.process.updatedBy||"-"),r(),c("ngIf",e.process.operations&&e.process.operations.length>0),r(),c("ngIf",!e.process.operations||e.process.operations.length===0)}}var ce=(()=>{class i{constructor(e,a,s){this.route=e,this.router=a,this.apiService=s,this.process=null,this.loading=!0,this.error=null}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e?this.loadProcess(+e):(this.error="No process ID provided",this.loading=!1)}loadProcess(e){this.loading=!0,this.error=null,this.apiService.getProcessById(e).subscribe({next:a=>{this.process=a,this.loading=!1},error:a=>{console.error("Error loading process:",a),this.error="Failed to load process",this.loading=!1}})}goBack(){this.router.navigate(["/processes"])}viewOperation(e){this.router.navigate(["/operations",e])}getStatusClass(e){switch(e?.toUpperCase()){case"NOT_STARTED":return"status-not-started";case"IN_PROGRESS":return"status-in-progress";case"COMPLETED":return"status-completed";case"ON_HOLD":return"status-on-hold";default:return""}}getOperationStatusClass(e){switch(e?.toUpperCase()){case"NOT_STARTED":return"op-not-started";case"READY":return"op-ready";case"IN_PROGRESS":return"op-in-progress";case"CONFIRMED":return"op-confirmed";case"ON_HOLD":return"op-on-hold";case"BLOCKED":return"op-blocked";default:return""}}getDecisionClass(e){if(!e)return"";switch(e.toUpperCase()){case"APPROVED":return"decision-approved";case"REJECTED":return"decision-rejected";case"PENDING":return"decision-pending";default:return""}}static{this.\u0275fac=function(a){return new(a||i)(b(H),b(L),b(T))}}static{this.\u0275cmp=P({type:i,selectors:[["app-process-detail"]],decls:11,vars:3,consts:[[1,"detail-container"],[1,"page-header"],[1,"header-left"],[1,"btn","btn-back",3,"click"],[1,"fas","fa-arrow-left"],["class","loading",4,"ngIf"],["class","error-message",4,"ngIf"],["class","detail-content",4,"ngIf"],[1,"loading"],["message","Loading process..."],[1,"error-message"],[1,"detail-content"],[1,"detail-card"],[1,"card-header"],[1,"header-title"],[1,"sequence-badge"],[1,"header-badges"],[1,"status-badge",3,"ngClass"],["class","decision-badge",3,"ngClass",4,"ngIf"],[1,"detail-grid"],[1,"detail-section"],[1,"detail-row"],[1,"label"],[1,"value"],["class","detail-row",4,"ngIf"],[1,"status-display"],[1,"status-badge","large",3,"ngClass"],["class","decision-display",4,"ngIf"],["class","detail-card",4,"ngIf"],["class","empty-operations",4,"ngIf"],[1,"decision-badge",3,"ngClass"],[1,"decision-display"],[1,"decision-label"],[1,"operations-list"],["class","operation-item",3,"click",4,"ngFor","ngForOf"],[1,"operation-item",3,"click"],[1,"op-sequence"],[1,"op-details"],[1,"op-name"],[1,"op-code"],["class","op-type",4,"ngIf"],[1,"op-status",3,"ngClass"],[1,"fas","fa-chevron-right","op-arrow"],[1,"op-type"],[1,"empty-operations"]],template:function(a,s){a&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),x("click",function(){return s.goBack()}),C(4,"i",4),o(5," Back "),t(),n(6,"h1"),o(7,"Process Details"),t()()(),m(8,Ue,2,0,"div",5)(9,$e,2,1,"div",6)(10,et,66,24,"div",7),t()),a&2&&(r(8),c("ngIf",s.loading),r(),c("ngIf",s.error),r(),c("ngIf",!s.loading&&s.process))},dependencies:[R,I,w,A,V],styles:[".detail-container[_ngcontent-%COMP%]{padding:24px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;color:#1e293b}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:48px}.error-message[_ngcontent-%COMP%]{background:#fef2f2;border:1px solid #fecaca;color:#dc2626;padding:12px 16px;border-radius:8px;margin-bottom:16px}.detail-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.detail-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:8px;overflow:hidden}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;background:#f8fafc;border-bottom:1px solid #e2e8f0}.header-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.header-badges[_ngcontent-%COMP%]{display:flex;gap:8px}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:#1e293b}.detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:24px;padding:24px}.detail-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.detail-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;font-weight:600;color:#64748b;text-transform:uppercase;letter-spacing:.05em}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #f1f5f9}.detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.label[_ngcontent-%COMP%]{color:#64748b;font-size:14px}.value[_ngcontent-%COMP%]{color:#1e293b;font-weight:500;font-size:14px}.status-display[_ngcontent-%COMP%]{padding:16px;background:#f8fafc;border-radius:8px;text-align:center}.decision-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:12px}.decision-label[_ngcontent-%COMP%]{color:#64748b;font-size:14px}.sequence-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:6px;font-size:12px;font-weight:500;background:#f1f5f9;color:#475569}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500;text-transform:uppercase}.status-badge.large[_ngcontent-%COMP%]{padding:8px 16px;font-size:14px}.status-not-started[_ngcontent-%COMP%]{background:#f1f5f9;color:#64748b}.status-in-progress[_ngcontent-%COMP%]{background:#dbeafe;color:#1d4ed8}.status-completed[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.status-on-hold[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626}.decision-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:6px;font-size:12px;font-weight:500}.decision-approved[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.decision-rejected[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626}.decision-pending[_ngcontent-%COMP%]{background:#fef3c7;color:#b45309}.operations-list[_ngcontent-%COMP%]{padding:0}.operation-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px 24px;border-bottom:1px solid #e2e8f0;cursor:pointer;transition:background-color .2s}.operation-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.operation-item[_ngcontent-%COMP%]:hover{background:#f8fafc}.op-sequence[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:#f1f5f9;border-radius:50%;font-weight:600;color:#475569;font-size:14px}.op-details[_ngcontent-%COMP%]{flex:1}.op-name[_ngcontent-%COMP%]{font-weight:500;color:#1e293b}.op-code[_ngcontent-%COMP%]{font-size:12px;color:#64748b;font-family:monospace}.op-type[_ngcontent-%COMP%]{padding:4px 8px;background:#f1f5f9;border-radius:4px;font-size:12px;color:#475569}.op-status[_ngcontent-%COMP%]{padding:4px 10px;border-radius:12px;font-size:11px;font-weight:500;text-transform:uppercase}.op-not-started[_ngcontent-%COMP%]{background:#f1f5f9;color:#64748b}.op-ready[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.op-in-progress[_ngcontent-%COMP%]{background:#dbeafe;color:#1d4ed8}.op-confirmed[_ngcontent-%COMP%]{background:#d1fae5;color:#065f46}.op-on-hold[_ngcontent-%COMP%]{background:#fef3c7;color:#b45309}.op-blocked[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626}.op-arrow[_ngcontent-%COMP%]{color:#94a3b8}.empty-operations[_ngcontent-%COMP%]{text-align:center;padding:48px;background:#f8fafc;border-radius:8px;color:#64748b}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .2s}.btn-back[_ngcontent-%COMP%]{background:transparent;color:#64748b;padding:8px 12px}.btn-back[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:#1e293b}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.detail-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.operation-item[_ngcontent-%COMP%]{flex-wrap:wrap}}"]})}}return i})();var tt=[{path:"quality-pending",component:ae},{path:"list",component:se},{path:":id",component:ce},{path:"",redirectTo:"quality-pending",pathMatch:"full"}],le=(()=>{class i{static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275mod=N({type:i})}static{this.\u0275inj=j({imports:[$.forChild(tt),$]})}}return i})();var bt=(()=>{class i{static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275mod=N({type:i})}static{this.\u0275inj=j({imports:[J,ee,te,le,ie]})}}return i})();export{bt as ProcessesModule};

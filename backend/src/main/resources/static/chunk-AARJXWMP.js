import{b as q,c as fe,d as _e,f as xe,g as ve}from"./chunk-ATRZBBRU.js";import{$ as I,Aa as oe,B as n,Ba as ae,C as t,Ca as re,D as f,Da as le,E as b,Ea as de,F as _,Fa as ce,G as p,Ga as se,Ha as Q,Ia as T,Ja as k,K as j,L as o,La as pe,M as u,Ma as me,N as g,Na as ue,O as C,Oa as ge,P as N,R as $,S as H,T as W,V as F,W as U,X as K,Y as G,_ as E,aa as w,ca as X,da as Z,fa as ee,i as R,k as M,l as V,n as x,na as te,o as v,pa as B,s as a,sa as Y,t as S,v as m,va as ne,w as J,wa as D,x as c,xa as O,y as L,ya as z,z as y,za as ie}from"./chunk-B5BVSWAU.js";function Ee(i,s){i&1&&(n(0,"div",10),f(1,"app-loading-spinner",11),t())}function Ie(i,s){if(i&1&&(n(0,"div",28)(1,"div",29),f(2,"i",30),n(3,"span"),o(4,"This is a partial confirmation. Additional confirmations are needed to complete this operation."),t()(),n(5,"div",31)(6,"div",32)(7,"span"),o(8),t(),n(9,"span",33),o(10),t()(),n(11,"div",34),f(12,"div",35),t(),n(13,"div",36)(14,"strong"),o(15,"Remaining:"),t(),o(16),t()()()),i&2){let e=p(2);a(8),C("Progress: ",e.confirmationResult.producedQty," / ",e.getTargetQty(),""),a(2),g("",e.getConfirmationProgress(),"%"),a(2),L("width",e.getConfirmationProgress(),"%"),a(4),g(" ",e.getRemainingQty()," units ")}}function we(i,s){if(i&1&&(n(0,"div",18)(1,"span",19),o(2,"Output Batches:"),t(),n(3,"span",20),o(4),t()()),i&2){let e=p(2);a(4),g("",e.getOutputBatches().length," batch(es)")}}function Te(i,s){if(i&1){let e=b();n(0,"div",42)(1,"div",43)(2,"span",44),o(3),t(),n(4,"span",45),o(5),t()(),n(6,"div",46)(7,"div",47)(8,"span",48),o(9,"Material:"),t(),n(10,"span",49),o(11),t()(),n(12,"div",47)(13,"span",48),o(14,"Quantity:"),t(),n(15,"span",49),o(16),t()()(),n(17,"button",50),_("click",function(){let l=x(e).$implicit,d=p(3);return v(d.goToBatch(l.batchId))}),f(18,"i",51),o(19," View Batch "),t()()}if(i&2){let e=s.$implicit,r=s.index;a(3),g("#",r+1,""),a(2),u(e.batchNumber),a(6),u(e.materialName||e.materialId),a(5),C("",e.quantity," ",e.unit,"")}}function ke(i,s){if(i&1&&(n(0,"div",37)(1,"h4",38),f(2,"i",39),o(3),t(),n(4,"div",40),m(5,Te,20,5,"div",41),t()()),i&2){let e=p(2);a(3),g(" Output Batches (",e.getOutputBatches().length,") "),a(2),c("ngForOf",e.getOutputBatches())}}function qe(i,s){if(i&1&&(n(0,"div",18)(1,"span",19),o(2,"New Batch Created:"),t(),n(3,"span",20),o(4),t()()),i&2){let e=p(2);a(4),u(e.confirmationResult.newBatchNumber)}}function Ne(i,s){i&1&&(n(0,"span",53),o(1," (includes partial batch) "),t())}function Re(i,s){if(i&1&&(n(0,"div",18)(1,"span",19),o(2,"Batch Split:"),t(),n(3,"span",20),o(4),m(5,Ne,2,0,"span",52),t()()),i&2){let e=p(2);a(4),g(" ",e.confirmationResult.batchCount," batches "),a(),c("ngIf",e.confirmationResult.hasPartialBatch)}}function Ve(i,s){if(i&1){let e=b();n(0,"button",54),_("click",function(){x(e);let l=p(2);return v(l.continueConfirmation())}),f(1,"i",55),o(2," Continue Confirmation "),t()}}function Fe(i,s){if(i&1){let e=b();n(0,"button",2),_("click",function(){x(e);let l=p(2);return v(l.goToBatch(l.getOutputBatches()[0].batchId))}),o(1," View Batch "),t()}}function Be(i,s){if(i&1){let e=b();n(0,"button",2),_("click",function(){x(e);let l=p(2);return v(l.goToBatch(l.confirmationResult.newBatchId))}),o(1," View New Batch "),t()}}function De(i,s){if(i&1){let e=b();n(0,"div",12)(1,"div",13)(2,"div",14),f(3,"i",15),t(),n(4,"h2"),o(5),t(),m(6,Ie,17,6,"div",16),n(7,"div",17)(8,"div",18)(9,"span",19),o(10,"Confirmation ID:"),t(),n(11,"span",20),o(12),t()(),n(13,"div",18)(14,"span",19),o(15,"Quantity Produced:"),t(),n(16,"span",20),o(17),t()(),m(18,we,5,1,"div",21)(19,ke,6,2,"div",22)(20,qe,5,1,"div",21),n(21,"div",18)(22,"span",19),o(23,"Materials Consumed:"),t(),n(24,"span",20),o(25),t()(),n(26,"div",18)(27,"span",19),o(28,"Operation Status:"),t(),f(29,"app-status-badge",23),t(),m(30,Re,6,2,"div",21),t(),n(31,"div",24)(32,"button",25),_("click",function(){x(e);let l=p();return v(l.goBack())}),o(33,"Back to Order"),t(),m(34,Ve,3,0,"button",26)(35,Fe,2,0,"button",27)(36,Be,2,0,"button",27),t()()()}if(i&2){let e=p();a(),y("partial-card",e.isPartialConfirmation()),a(),y("partial-icon",e.isPartialConfirmation()),a(),c("ngClass",e.isPartialConfirmation()?"fa-clock":"fa-circle-check"),a(2),u(e.isPartialConfirmation()?"Partial Confirmation Saved":"Production Confirmed Successfully!"),a(),c("ngIf",e.isPartialConfirmation()),a(6),u(e.confirmationResult.confirmationId),a(5),u(e.confirmationResult.producedQty||e.confirmationResult.quantityProduced),a(),c("ngIf",e.getOutputBatches().length>0),a(),c("ngIf",e.getOutputBatches().length>0),a(),c("ngIf",e.getOutputBatches().length===0&&e.confirmationResult.newBatchNumber),a(5),g("",(e.confirmationResult.materialsConsumed==null?null:e.confirmationResult.materialsConsumed.length)||0," item(s)"),a(4),c("status",e.confirmationResult.status||e.confirmationResult.operationStatus),a(),c("ngIf",e.confirmationResult.batchCount&&e.confirmationResult.batchCount>1),a(4),c("ngIf",e.isPartialConfirmation()),a(),c("ngIf",e.getOutputBatches().length===1),a(),c("ngIf",e.confirmationResult.newBatchId&&e.getOutputBatches().length===0)}}function ze(i,s){if(i&1&&(n(0,"span",123),o(1),t()),i&2){let e=p(3);a(),g(" ",e.previewBatchNumber," ")}}function Qe(i,s){i&1&&(n(0,"span",124),o(1," Loading... "),t())}function Ae(i,s){if(i&1&&(n(0,"div",119)(1,"div",60)(2,"span",61),o(3,"Output Batch Number (Preview)"),t(),m(4,ze,2,1,"span",120)(5,Qe,2,0,"span",121),t(),n(6,"p",122),o(7,"This batch number will be assigned upon confirmation"),t()()),i&2){let e=p(2);a(4),c("ngIf",!e.loadingBatchPreview),a(),c("ngIf",e.loadingBatchPreview)}}function Le(i,s){i&1&&(n(0,"div",125),o(1," Start time cannot be in the future "),t())}function je(i,s){i&1&&(n(0,"div",125),o(1," End time must be after start time "),t())}function $e(i,s){if(i&1&&(n(0,"div",126)(1,"span",127),o(2,"Duration:"),t(),n(3,"span",128),o(4),t(),n(5,"span",129),o(6),t()()),i&2){let e=p(2);a(4),u(e.durationFormatted),a(2),g("(",e.durationMinutes," minutes)")}}function He(i,s){if(i&1&&(n(0,"div",130)(1,"div",131)(2,"div",132)(3,"span",133),o(4,"Total Production:"),t(),n(5,"span",134),o(6),t()(),n(7,"div",132)(8,"span",133),o(9,"Yield:"),t(),n(10,"span",135),o(11),t()()(),n(12,"div",136),f(13,"div",137),t(),n(14,"div",138)(15,"span",139),f(16,"span",140),o(17," Good (>=95%)"),t(),n(18,"span",139),f(19,"span",141),o(20," Warning (80-95%)"),t(),n(21,"span",139),f(22,"span",142),o(23," Critical (<80%)"),t()()()),i&2){let e=p(2);a(6),u(e.totalProduction),a(4),c("ngClass",e.yieldClass),a(),g(" ",e.yieldPercentage,"% "),a(2),L("width",e.yieldPercentage,"%"),c("ngClass",e.yieldClass)}}function We(i,s){if(i&1&&(n(0,"tr")(1,"td"),o(2),t(),n(3,"td"),o(4),t(),n(5,"td"),o(6),t(),n(7,"td"),o(8),t(),n(9,"td")(10,"span",151),o(11),t()()()),i&2){let e=s.$implicit;y("insufficient",!e.sufficientStock),a(2),C("",e.materialName," (",e.materialId,")"),a(2),C("",e.requiredQuantity," ",e.unit,""),a(2),C("",e.availableQuantity," ",e.unit,""),a(2),u(e.yieldLossRatio),a(2),y("ok",e.sufficientStock)("low",!e.sufficientStock),a(),g(" ",e.sufficientStock?"Sufficient":"Insufficient"," ")}}function Ge(i,s){i&1&&(n(0,"div",152)(1,"strong"),o(2,"Warning:"),t(),o(3," Insufficient stock for some materials. Please review before proceeding. "),t())}function Ye(i,s){if(i&1){let e=b();n(0,"div",143)(1,"div",144)(2,"h4"),o(3,"BOM Suggested Consumption"),t(),n(4,"button",84),_("click",function(){x(e);let l=p(2);return v(l.applySuggestedConsumption())}),o(5," Apply Suggestions "),t()(),n(6,"div",145)(7,"span",146),o(8,"Target Quantity:"),t(),n(9,"span",147),o(10),t(),n(11,"span",146),o(12,"Total Required:"),t(),n(13,"span",147),o(14),t()(),n(15,"table",148)(16,"thead")(17,"tr")(18,"th"),o(19,"Material"),t(),n(20,"th"),o(21,"Required Qty"),t(),n(22,"th"),o(23,"Available"),t(),n(24,"th"),o(25,"Yield Ratio"),t(),n(26,"th"),o(27,"Stock Status"),t()()(),n(28,"tbody"),m(29,We,12,14,"tr",149),t()(),m(30,Ge,4,0,"div",150),t()}if(i&2){let e=p(2);a(10),g("",e.suggestedConsumption.targetQuantity," T"),a(4),g("",e.suggestedConsumption.totalRequiredQuantity," T"),a(15),c("ngForOf",e.suggestedConsumption.suggestedMaterials),a(),c("ngIf",!e.hasSufficientStock())}}function Je(i,s){if(i&1){let e=b();n(0,"tr")(1,"td"),o(2),t(),n(3,"td"),o(4),t(),n(5,"td"),o(6),t(),n(7,"td")(8,"input",156),_("change",function(l){let d=x(e).index,h=p(3);return v(h.updateMaterialQuantity(d,l.target.valueAsNumber))}),t()(),n(9,"td")(10,"button",157),_("click",function(){let l=x(e).index,d=p(3);return v(d.removeMaterial(l))}),o(11," Remove "),t()()()}if(i&2){let e=s.$implicit;a(2),u(e.batchNumber),a(2),u(e.materialId),a(2),u(e.availableQuantity),a(2),c("value",e.quantityToConsume)("min",0)("max",e.availableQuantity)}}function Ue(i,s){if(i&1&&(n(0,"div",153)(1,"h4"),o(2),t(),n(3,"table",154)(4,"thead")(5,"tr")(6,"th"),o(7,"Batch #"),t(),n(8,"th"),o(9,"Material ID"),t(),n(10,"th"),o(11,"Available"),t(),n(12,"th"),o(13,"Qty to Consume"),t(),n(14,"th"),o(15,"Action"),t()()(),n(16,"tbody"),m(17,Je,12,6,"tr",155),t()()()),i&2){let e=p(2);a(2),g("Selected Materials (",e.selectedMaterials.length,")"),a(15),c("ngForOf",e.selectedMaterials)}}function Ke(i,s){if(i&1){let e=b();n(0,"tr")(1,"td"),o(2),t(),n(3,"td"),o(4),t(),n(5,"td"),o(6),t(),n(7,"td"),f(8,"app-status-badge",23),t(),n(9,"td")(10,"button",158),_("click",function(){let l=x(e).$implicit,d=p(3);return v(d.addMaterial(l))}),o(11),t()()()}if(i&2){let e=s.$implicit,r=p(3);a(2),u(e.batchNumber),a(2),u(e.materialId),a(2),C("",e.quantity," ",e.unit,""),a(2),c("status",e.state),a(2),c("ngClass",r.isMaterialSelected(e)?"btn-success":"btn-primary")("disabled",r.isMaterialSelected(e)),a(),g(" ",r.isMaterialSelected(e)?"Added":"Add"," ")}}function Xe(i,s){if(i&1&&(n(0,"table",154)(1,"thead")(2,"tr")(3,"th"),o(4,"Batch #"),t(),n(5,"th"),o(6,"Material ID"),t(),n(7,"th"),o(8,"Available Qty"),t(),n(9,"th"),o(10,"State"),t(),n(11,"th"),o(12,"Action"),t()()(),n(13,"tbody"),m(14,Ke,12,8,"tr",155),t()()),i&2){let e=p(2);a(14),c("ngForOf",e.availableInventory)}}function Ze(i,s){i&1&&(n(0,"p",159),o(1,"No available inventory"),t())}function et(i,s){if(i&1&&(n(0,"tr",163)(1,"td"),o(2),t(),n(3,"td"),o(4),t(),n(5,"td"),o(6),t(),n(7,"td")(8,"span",164),o(9),F(10,"uppercase"),t()()()),i&2){let e=s.$implicit,r=p(3);c("ngClass","bom-"+r.getRequirementStatus(e)),a(2),C("",e.materialName," (",e.materialId,")"),a(2),C("",e.quantityRequired," ",e.unit,""),a(2),C("",r.getTotalSelectedByMaterial(e.materialId)," ",e.unit,""),a(2),c("ngClass",r.getRequirementStatus(e)),a(),g(" ",U(10,9,r.getRequirementStatus(e))," ")}}function tt(i,s){if(i&1&&(n(0,"div",160)(1,"h4"),o(2,"BOM Requirements"),t(),n(3,"table",161)(4,"thead")(5,"tr")(6,"th"),o(7,"Material"),t(),n(8,"th"),o(9,"Required Qty"),t(),n(10,"th"),o(11,"Selected Qty"),t(),n(12,"th"),o(13,"Status"),t()()(),n(14,"tbody"),m(15,et,11,11,"tr",162),t()()()),i&2){let e=p(2);a(15),c("ngForOf",e.bomRequirements)}}function nt(i,s){if(i&1&&(n(0,"li"),o(1),t()),i&2){let e=s.$implicit;a(),u(e)}}function it(i,s){if(i&1&&(n(0,"div",152)(1,"strong"),o(2,"Warnings:"),t(),n(3,"ul"),m(4,nt,2,1,"li",155),t()()),i&2){let e=p(3);a(4),c("ngForOf",e.bomValidationResult.warnings)}}function ot(i,s){if(i&1&&(n(0,"li"),o(1),t()),i&2){let e=s.$implicit;a(),u(e)}}function at(i,s){if(i&1&&(n(0,"div",166)(1,"strong"),o(2,"Errors:"),t(),n(3,"ul"),m(4,ot,2,1,"li",155),t()()),i&2){let e=p(3);a(4),c("ngForOf",e.bomValidationResult.errors)}}function rt(i,s){if(i&1&&(n(0,"div",165),m(1,it,5,1,"div",150)(2,at,5,1,"div",107),t()),i&2){let e=p(2);a(),c("ngIf",(e.bomValidationResult.warnings==null?null:e.bomValidationResult.warnings.length)>0),a(),c("ngIf",(e.bomValidationResult.errors==null?null:e.bomValidationResult.errors.length)>0)}}function lt(i,s){if(i&1){let e=b();n(0,"div",167)(1,"label",110)(2,"input",168),_("change",function(){let l=x(e).index,d=p(2);return v(d.toggleEquipment(l))}),t(),n(3,"span",112),o(4),t()()()}if(i&2){let e=s.$implicit;a(2),c("checked",e.selected),a(2),C("",e.equipmentName," (",e.equipmentCode,")")}}function dt(i,s){i&1&&(n(0,"p",169),o(1,"No equipment available"),t())}function ct(i,s){if(i&1){let e=b();n(0,"div",167)(1,"label",110)(2,"input",168),_("change",function(){let l=x(e).index,d=p(2);return v(d.toggleOperator(l))}),t(),n(3,"span",112),o(4),t()()()}if(i&2){let e=s.$implicit;a(2),c("checked",e.selected),a(2),C("",e.operatorName," (",e.operatorCode,")")}}function st(i,s){i&1&&(n(0,"p",169),o(1,"No operators available"),t())}function pt(i,s){i&1&&(n(0,"span",170),o(1,"*"),t())}function mt(i,s){if(i&1&&(n(0,"option",171),o(1),t()),i&2){let e=s.$implicit;c("value",e.reason_code),a(),g(" ",e.reason_description," ")}}function ut(i,s){i&1&&(n(0,"div",125),o(1," Delay reason is required when delay duration is entered "),t())}function gt(i,s){i&1&&(n(0,"span",170),o(1,"*"),t())}function ft(i,s){if(i&1&&(n(0,"span",177),o(1),t()),i&2){let e=p().$implicit;a(),g("(",e.unit,")")}}function _t(i,s){if(i&1&&(n(0,"span",177),o(1),t()),i&2){let e=p().$implicit;a(),C(" [",e.min_value||"..."," - ",e.max_value||"...","] ")}}function xt(i,s){if(i&1&&(n(0,"div",125),o(1),t()),i&2){let e=p().$implicit;a(),g(" ",e.parameter_name," is required ")}}function vt(i,s){if(i&1&&(n(0,"div",125),o(1),t()),i&2){let e=p().$implicit;a(),N(" ",e.parameter_name," must be at least ",e.min_value," ",e.unit||""," ")}}function Ct(i,s){if(i&1&&(n(0,"div",125),o(1),t()),i&2){let e=p().$implicit;a(),N(" ",e.parameter_name," must not exceed ",e.max_value," ",e.unit||""," ")}}function ht(i,s){if(i&1&&(n(0,"div",69)(1,"div",174)(2,"label"),o(3),m(4,gt,2,0,"span",101)(5,ft,2,1,"span",175)(6,_t,2,2,"span",175),t(),f(7,"input",176),m(8,xt,2,1,"div",72)(9,vt,2,3,"div",72)(10,Ct,2,3,"div",72),t()()),i&2){let e,r,l,d=s.$implicit,h=s.index,P=p(3);a(),c("formGroupName",h),a(2),g("",d.parameter_name," "),a(),c("ngIf",d.is_required),a(),c("ngIf",d.unit),a(),c("ngIf",d.min_value!==null||d.max_value!==null),a(),c("placeholder",d.default_value||""),J("min",d.min_value)("max",d.max_value),a(),c("ngIf",((e=P.processParamsFormArray.at(h).get("parameterValue"))==null||e.errors==null?null:e.errors.required)&&((e=P.processParamsFormArray.at(h).get("parameterValue"))==null?null:e.touched)),a(),c("ngIf",(r=P.processParamsFormArray.at(h).get("parameterValue"))==null||r.errors==null?null:r.errors.min),a(),c("ngIf",(l=P.processParamsFormArray.at(h).get("parameterValue"))==null||l.errors==null?null:l.errors.max)}}function bt(i,s){if(i&1){let e=b();n(0,"div",66)(1,"div",57),_("click",function(){x(e);let l=p(2);return v(l.toggleSection("processParameters"))}),n(2,"span"),o(3,"Process Parameters"),t(),f(4,"i",15),t(),n(5,"div",58)(6,"div",172),m(7,ht,11,11,"div",173),t()()()}if(i&2){let e=p(2);a(4),c("ngClass",e.isCollapsed("processParameters")?"fa-chevron-down":"fa-chevron-up"),a(),y("collapsed",e.isCollapsed("processParameters")),a(2),c("ngForOf",e.processParameters)}}function yt(i,s){if(i&1&&(n(0,"div",166),o(1),t()),i&2){let e=p(2);a(),g(" ",e.error," ")}}function Pt(i,s){i&1&&(n(0,"div",178),f(1,"i",30),n(2,"span"),o(3," This confirmation will be saved as partial. You can continue confirming additional quantities for this operation later. "),t()())}function St(i,s){if(i&1&&(n(0,"span"),o(1),t()),i&2){let e,r=p(2);a(),g(" ",(e=r.confirmForm.get("saveAsPartial"))!=null&&e.value?"Save Partial Confirmation":"Confirm Production"," ")}}function Ot(i,s){i&1&&f(0,"span",179)}function Mt(i,s){if(i&1){let e=b();n(0,"div")(1,"div",56)(2,"div",57),_("click",function(){x(e);let l=p();return v(l.toggleSection("operationDetails"))}),n(3,"span"),o(4,"Operation Details"),t(),f(5,"i",15),t(),n(6,"div",58)(7,"div",59)(8,"div",60)(9,"span",61),o(10,"Operation"),t(),n(11,"span",62),o(12),t()(),n(13,"div",60)(14,"span",61),o(15,"Type"),t(),n(16,"span",62),o(17),t()(),n(18,"div",60)(19,"span",61),o(20,"Status"),t(),f(21,"app-status-badge",23),t(),n(22,"div",60)(23,"span",61),o(24,"Product"),t(),n(25,"span",62),o(26),t()(),n(27,"div",60)(28,"span",61),o(29,"Order Quantity"),t(),n(30,"span",62),o(31),t()(),n(32,"div",60)(33,"span",61),o(34,"Stage"),t(),n(35,"span",62),o(36),t()()(),m(37,Ae,8,2,"div",63),t()(),n(38,"form",64),_("ngSubmit",function(){x(e);let l=p();return v(l.onSubmit())}),n(39,"div",65)(40,"div",66)(41,"div",57),_("click",function(){x(e);let l=p();return v(l.toggleSection("productionTime"))}),n(42,"span"),o(43,"Production Time"),t(),f(44,"i",15),t(),n(45,"div",58)(46,"div",67)(47,"div",68)(48,"div",69)(49,"label",70),o(50,"Start Time *"),t(),f(51,"input",71),m(52,Le,2,0,"div",72),t()(),n(53,"div",68)(54,"div",69)(55,"label",73),o(56,"End Time *"),t(),f(57,"input",74),t()()(),m(58,je,2,0,"div",72)(59,$e,7,2,"div",75),t()(),n(60,"div",66)(61,"div",57),_("click",function(){x(e);let l=p();return v(l.toggleSection("productionQuantities"))}),n(62,"span"),o(63,"Production Quantities"),t(),f(64,"i",15),t(),n(65,"div",58)(66,"div",67)(67,"div",68)(68,"div",69)(69,"label",76),o(70,"Quantity Produced *"),t(),f(71,"input",77),t()(),n(72,"div",68)(73,"div",69)(74,"label",78),o(75,"Quantity Scrapped"),t(),f(76,"input",79),t()()(),m(77,He,24,6,"div",80),t()()(),n(78,"div",56)(79,"div",81),_("click",function(){x(e);let l=p();return v(l.toggleSection("materialConsumption"))}),n(80,"span",82),o(81,"Material Consumption"),t(),n(82,"div",83)(83,"button",84),_("click",function(l){return x(e),p().openMaterialModal(),v(l.stopPropagation())}),f(84,"i",85),o(85," Select Materials "),t(),f(86,"i",86),t()(),n(87,"div",58),m(88,Ye,31,4,"div",87)(89,Ue,18,2,"div",88),n(90,"div",89)(91,"h4"),o(92,"Available Inventory"),t(),m(93,Xe,15,1,"table",90)(94,Ze,2,0,"p",91),t(),m(95,tt,16,1,"div",92)(96,rt,3,2,"div",93),t()(),n(97,"div",65)(98,"div",66)(99,"div",57),_("click",function(){x(e);let l=p();return v(l.toggleSection("equipmentOperator"))}),n(100,"span"),o(101,"Equipment & Operator"),t(),f(102,"i",15),t(),n(103,"div",58)(104,"div",67)(105,"div",68)(106,"div",69)(107,"label"),o(108,"Equipment * "),n(109,"span",94),o(110),t()(),n(111,"div",95),m(112,lt,5,3,"div",96)(113,dt,2,0,"p",97),t()()(),n(114,"div",68)(115,"div",69)(116,"label"),o(117,"Operator * "),n(118,"span",94),o(119),t()(),n(120,"div",95),m(121,ct,5,3,"div",96)(122,st,2,0,"p",97),t()()()()()(),n(123,"div",66)(124,"div",57),_("click",function(){x(e);let l=p();return v(l.toggleSection("delayTracking"))}),n(125,"span"),o(126,"Delay Tracking"),t(),f(127,"i",15),t(),n(128,"div",58)(129,"div",67)(130,"div",68)(131,"div",69)(132,"label",98),o(133,"Delay Duration (minutes)"),t(),f(134,"input",99),t()(),n(135,"div",68)(136,"div",69)(137,"label",100),o(138," Delay Reason "),m(139,pt,2,0,"span",101),t(),n(140,"select",102)(141,"option",103),o(142,"-- Select Reason --"),t(),m(143,mt,2,2,"option",104),t(),m(144,ut,2,0,"div",72),t()()()()()(),n(145,"div",65),m(146,bt,8,4,"div",105),n(147,"div",66)(148,"div",57),_("click",function(){x(e);let l=p();return v(l.toggleSection("notes"))}),n(149,"span"),o(150,"Notes"),t(),f(151,"i",15),t(),n(152,"div",58)(153,"div",69),f(154,"textarea",106),t()()()(),m(155,yt,2,1,"div",107),n(156,"div",108)(157,"div",109)(158,"label",110),f(159,"input",111),n(160,"span",112)(161,"strong"),o(162,"Save as Partial Confirmation"),t(),n(163,"span",113),o(164," Check this to save progress and continue confirmation later. The operation will remain in progress. "),t()()()(),m(165,Pt,4,0,"div",114),t(),n(166,"div",115)(167,"button",116),_("click",function(){x(e);let l=p();return v(l.goBack())}),o(168,"Cancel"),t(),n(169,"button",117),m(170,St,2,1,"span",7)(171,Ot,1,0,"span",118),t()()()()}if(i&2){let e,r,l,d=p();a(5),c("ngClass",d.isCollapsed("operationDetails")?"fa-chevron-down":"fa-chevron-up"),a(),y("collapsed",d.isCollapsed("operationDetails")),a(6),C("",d.operation.operationName," (",d.operation.operationCode,")"),a(5),u(d.operation.operationType),a(4),c("status",d.operation.status),a(5),C("",d.operation.order==null?null:d.operation.order.productName," (",d.operation.order==null?null:d.operation.order.productSku,")"),a(5),u(d.operation.order==null?null:d.operation.order.quantity),a(5),u(d.operation.process==null?null:d.operation.process.processName),a(),c("ngIf",d.previewBatchNumber||d.loadingBatchPreview),a(),c("formGroup",d.confirmForm),a(6),c("ngClass",d.isCollapsed("productionTime")?"fa-chevron-down":"fa-chevron-up"),a(),y("collapsed",d.isCollapsed("productionTime")),a(7),c("ngIf",(e=d.confirmForm.get("startTime"))==null||e.errors==null?null:e.errors.futureStartTime),a(6),c("ngIf",d.confirmForm.errors==null?null:d.confirmForm.errors.invalidTimeRange),a(),c("ngIf",d.durationMinutes!==null&&d.durationMinutes>0),a(5),c("ngClass",d.isCollapsed("productionQuantities")?"fa-chevron-down":"fa-chevron-up"),a(),y("collapsed",d.isCollapsed("productionQuantities")),a(12),c("ngIf",d.totalProduction>0),a(9),c("ngClass",d.isCollapsed("materialConsumption")?"fa-chevron-down":"fa-chevron-up"),a(),y("collapsed",d.isCollapsed("materialConsumption")),a(),c("ngIf",d.showSuggestions&&d.suggestedConsumption),a(),c("ngIf",d.selectedMaterials.length>0),a(4),c("ngIf",d.availableInventory.length>0),a(),c("ngIf",d.availableInventory.length===0),a(),c("ngIf",d.bomRequirements.length>0),a(),c("ngIf",d.bomValidationResult),a(6),c("ngClass",d.isCollapsed("equipmentOperator")?"fa-chevron-down":"fa-chevron-up"),a(),y("collapsed",d.isCollapsed("equipmentOperator")),a(7),g("(",d.getSelectedEquipmentCount()," selected)"),a(2),c("ngForOf",d.availableEquipment),a(),c("ngIf",d.availableEquipment.length===0),a(6),g("(",d.getSelectedOperatorCount()," selected)"),a(2),c("ngForOf",d.activeOperators),a(),c("ngIf",d.activeOperators.length===0),a(5),c("ngClass",d.isCollapsed("delayTracking")?"fa-chevron-down":"fa-chevron-up"),a(),y("collapsed",d.isCollapsed("delayTracking")),a(11),c("ngIf",d.isDelayReasonRequired()),a(4),c("ngForOf",d.delayReasons),a(),c("ngIf",d.isDelayReasonRequired()&&!((r=d.confirmForm.get("delayReason"))!=null&&r.value)),a(2),c("ngIf",d.processParameters.length>0),a(),y("grid-full",d.processParameters.length===0),a(4),c("ngClass",d.isCollapsed("notes")?"fa-chevron-down":"fa-chevron-up"),a(),y("collapsed",d.isCollapsed("notes")),a(3),c("ngIf",d.error),a(10),c("ngIf",(l=d.confirmForm.get("saveAsPartial"))==null?null:l.value),a(4),c("disabled",d.confirmForm.invalid||d.submitting),a(),c("ngIf",!d.submitting),a(),c("ngIf",d.submitting)}}function Et(i,s){if(i&1&&(n(0,"div",56)(1,"p",159),o(2),t()()),i&2){let e=p();a(2),u(e.error||"Operation not found")}}var ye=(()=>{class i{constructor(e,r,l,d){this.route=e,this.router=r,this.fb=l,this.apiService=d,this.operation=null,this.loading=!0,this.submitting=!1,this.success=!1,this.error="",this.availableInventory=[],this.availableEquipment=[],this.activeOperators=[],this.processParameters=[],this.delayReasons=[],this.selectedMaterials=[],this.confirmationResult=null,this.bomRequirements=[],this.bomValidationResult=null,this.showBomWarning=!1,this.suggestedConsumption=null,this.loadingSuggestions=!1,this.showSuggestions=!1,this.previewBatchNumber="",this.loadingBatchPreview=!1,this.showMaterialModal=!1,this.collapsedSections={operationDetails:!1,productionTime:!1,productionQuantities:!1,materialConsumption:!1,equipmentOperator:!1,delayTracking:!1,processParameters:!1,notes:!1}}ngOnInit(){this.operationId=Number(this.route.snapshot.paramMap.get("operationId")),this.initForm(),this.loadData()}initForm(){let e=new Date,r=this.formatDateTimeLocal(e);this.confirmForm=this.fb.group({operationId:[this.operationId],startTime:[r,[O.required,this.startTimeValidator()]],endTime:[r,[O.required]],quantityProduced:[0,[O.required,O.min(1)]],quantityScrapped:[0,[O.min(0)]],delayMinutes:[0,[O.min(0)]],delayReason:[""],notes:[""],processParameters:this.fb.array([]),saveAsPartial:[!1]},{validators:this.timeRangeValidator()})}startTimeValidator(){return e=>e.value&&new Date(e.value)>new Date?{futureStartTime:!0}:null}timeRangeValidator(){return e=>{let r=e.get("startTime")?.value,l=e.get("endTime")?.value;if(r&&l){let d=new Date(r);if(new Date(l)<=d)return{invalidTimeRange:!0}}return null}}formatDateTimeLocal(e){let r=e.getFullYear(),l=String(e.getMonth()+1).padStart(2,"0"),d=String(e.getDate()).padStart(2,"0"),h=String(e.getHours()).padStart(2,"0"),P=String(e.getMinutes()).padStart(2,"0");return`${r}-${l}-${d}T${h}:${P}`}get processParamsFormArray(){return this.confirmForm.get("processParameters")}loadData(){this.loading=!0,this.apiService.getOperationDetails(this.operationId).subscribe({next:e=>{this.operation=e,this.loadMasterData()},error:e=>{console.error("Error loading operation:",e),this.error="Failed to load operation details",this.loading=!1}})}loadMasterData(){this.apiService.getAvailableEquipment().subscribe({next:e=>{this.availableEquipment=e.map(r=>({equipmentId:r.equipmentId,equipmentCode:r.equipmentCode,equipmentName:r.name||r.equipmentName,selected:!1}))},error:e=>console.error("Error loading equipment:",e)}),this.apiService.getActiveOperators().subscribe({next:e=>{this.activeOperators=e.map(r=>({operatorId:r.operatorId,operatorCode:r.operatorCode,operatorName:r.name||r.operatorName,selected:!1}))},error:e=>console.error("Error loading operators:",e)}),this.apiService.getDelayReasons().subscribe({next:e=>{this.delayReasons=e},error:e=>console.error("Error loading delay reasons:",e)}),this.apiService.getAvailableInventory().subscribe({next:e=>{this.availableInventory=e,this.loading=!1},error:e=>{console.error("Error loading inventory:",e),this.loading=!1}}),this.operation?.operationType&&this.apiService.getProcessParameters(this.operation.operationType,this.operation.order?.productSku).subscribe({next:e=>{this.processParameters=e,this.initProcessParams()},error:e=>console.error("Error loading process parameters:",e)}),this.operation?.order?.productSku&&this.apiService.getBomRequirements(this.operation.order.productSku).subscribe({next:e=>{this.bomRequirements=e.requirements||[]},error:e=>console.error("Error loading BOM requirements:",e)}),this.loadSuggestedConsumption(),this.loadBatchNumberPreview()}loadBatchNumberPreview(){this.loadingBatchPreview=!0;let e=this.operation?.operationType||"",r=this.operation?.order?.productSku||"";this.apiService.previewBatchNumber(e,r).subscribe({next:l=>{this.previewBatchNumber=l.previewBatchNumber,this.loadingBatchPreview=!1},error:l=>{console.error("Error loading batch number preview:",l),this.previewBatchNumber="",this.loadingBatchPreview=!1}})}loadSuggestedConsumption(){this.loadingSuggestions=!0,this.apiService.getSuggestedConsumption(this.operationId).subscribe({next:e=>{this.suggestedConsumption=e,this.loadingSuggestions=!1,this.showSuggestions=e.suggestedMaterials?.length>0,e.targetQuantity&&!this.confirmForm.get("quantityProduced")?.value&&this.confirmForm.patchValue({quantityProduced:e.targetQuantity})},error:e=>{console.error("Error loading suggested consumption:",e),this.loadingSuggestions=!1}})}applySuggestedConsumption(){if(this.suggestedConsumption){this.selectedMaterials=[];for(let e of this.suggestedConsumption.suggestedMaterials)for(let r of e.availableBatches)r.suggestedConsumption>0&&this.selectedMaterials.push({inventoryId:r.inventoryId,batchId:r.batchId||0,batchNumber:r.batchNumber||"",materialId:e.materialId,availableQuantity:r.availableQuantity,quantityToConsume:r.suggestedConsumption});this.validateBom()}}getTotalSuggestedQuantity(){return this.suggestedConsumption?this.suggestedConsumption.suggestedMaterials.reduce((e,r)=>e+r.requiredQuantity,0):0}hasSufficientStock(){return this.suggestedConsumption?this.suggestedConsumption.suggestedMaterials.every(e=>e.sufficientStock):!0}initProcessParams(){this.processParamsFormArray.clear(),this.processParameters.forEach(e=>{let r=[];e.is_required&&r.push(O.required),e.min_value!==null&&e.min_value!==void 0&&r.push(O.min(e.min_value)),e.max_value!==null&&e.max_value!==void 0&&r.push(O.max(e.max_value)),this.processParamsFormArray.push(this.fb.group({parameterName:[e.parameter_name],parameterValue:[e.default_value||"",r]}))})}isMaterialSelected(e){return this.selectedMaterials.some(r=>r.inventoryId===e.inventoryId)}addMaterial(e){this.isMaterialSelected(e)||(this.selectedMaterials.push({inventoryId:e.inventoryId,batchId:e.batchId,batchNumber:e.batchNumber,materialId:e.materialId,availableQuantity:e.quantity,quantityToConsume:0}),this.validateBom())}removeMaterial(e){this.selectedMaterials.splice(e,1)}updateMaterialQuantity(e,r){r>=0&&r<=this.selectedMaterials[e].availableQuantity&&(this.selectedMaterials[e].quantityToConsume=r,this.validateBom())}toggleEquipment(e){this.availableEquipment[e].selected=!this.availableEquipment[e].selected}getSelectedEquipmentIds(){return this.availableEquipment.filter(e=>e.selected).map(e=>e.equipmentId)}getSelectedEquipmentCount(){return this.availableEquipment.filter(e=>e.selected).length}toggleOperator(e){this.activeOperators[e].selected=!this.activeOperators[e].selected}getSelectedOperatorIds(){return this.activeOperators.filter(e=>e.selected).map(e=>e.operatorId)}getSelectedOperatorCount(){return this.activeOperators.filter(e=>e.selected).length}isDelayReasonRequired(){let e=this.confirmForm.get("delayMinutes")?.value;return e&&e>0}validateBom(){if(!this.operation?.order?.productSku||this.selectedMaterials.length===0){this.bomValidationResult=null;return}let e={productSku:this.operation.order.productSku,targetQuantity:this.confirmForm.get("quantityProduced")?.value||0,materialsConsumed:this.selectedMaterials.filter(r=>r.quantityToConsume>0).map(r=>({materialId:r.materialId,quantity:r.quantityToConsume}))};this.apiService.validateBomConsumption(e).subscribe({next:r=>{this.bomValidationResult=r,this.showBomWarning=r.warnings?.length>0||r.errors?.length>0},error:r=>console.error("Error validating BOM:",r)})}getTotalSelectedByMaterial(e){return this.selectedMaterials.filter(r=>r.materialId===e).reduce((r,l)=>r+l.quantityToConsume,0)}getRequirementStatus(e){let r=this.getTotalSelectedByMaterial(e.materialId);return r>=e.quantityRequired?"met":r>0?"partial":"missing"}onSubmit(){if(this.confirmForm.invalid){this.error="Please fill in all required fields correctly.";return}if(this.getSelectedEquipmentCount()===0){this.error="Please select at least one equipment.";return}if(this.getSelectedOperatorCount()===0){this.error="Please select at least one operator.";return}let e=this.confirmForm.value;if(e.delayMinutes>0&&!e.delayReason){this.error="Please select a delay reason when delay duration is greater than 0.";return}this.submitting=!0,this.error="";let r={operationId:this.operationId,producedQty:e.quantityProduced,scrapQty:e.quantityScrapped||0,startTime:new Date(e.startTime).toISOString(),endTime:new Date(e.endTime).toISOString(),equipmentIds:this.getSelectedEquipmentIds(),operatorIds:this.getSelectedOperatorIds(),materialsConsumed:this.selectedMaterials.filter(l=>l.quantityToConsume>0).map(l=>({batchId:l.batchId,inventoryId:l.inventoryId,quantity:l.quantityToConsume})),processParameters:e.processParameters.filter(l=>l.parameterValue).reduce((l,d)=>(l[d.parameterName]=d.parameterValue,l),{}),delayMinutes:e.delayMinutes||0,delayReason:e.delayReason||null,notes:e.notes,saveAsPartial:e.saveAsPartial||!1};this.apiService.confirmProduction(r).subscribe({next:l=>{this.confirmationResult=l,this.success=!0,this.submitting=!1},error:l=>{console.error("Error confirming production:",l),this.error=l.error?.message||"Failed to confirm production",this.submitting=!1}})}goBack(){this.operation?.order?.orderId?this.router.navigate(["/orders",this.operation.order.orderId]):this.router.navigate(["/orders"])}goToBatch(e){this.router.navigate(["/batches",e])}get yieldPercentage(){let e=this.confirmForm.get("quantityProduced")?.value||0,r=this.confirmForm.get("quantityScrapped")?.value||0,l=e+r;return l===0?null:Math.round(e/l*1e4)/100}get yieldClass(){let e=this.yieldPercentage;return e===null?"":e>=95?"yield-good":e>=80?"yield-warning":"yield-critical"}get durationMinutes(){let e=this.confirmForm.get("startTime")?.value,r=this.confirmForm.get("endTime")?.value;if(!e||!r)return null;let l=new Date(e),h=new Date(r).getTime()-l.getTime();return h<=0?null:Math.round(h/6e4)}get durationFormatted(){let e=this.durationMinutes;if(e===null||e<=0)return"--";let r=Math.floor(e/60),l=e%60;return r>0?`${r}h ${l}m`:`${l}m`}get totalProduction(){let e=this.confirmForm.get("quantityProduced")?.value||0,r=this.confirmForm.get("quantityScrapped")?.value||0;return e+r}openMaterialModal(){this.showMaterialModal=!0}closeMaterialModal(){this.showMaterialModal=!1}onMaterialSelectionChange(e){this.selectedMaterials=e.map(r=>({inventoryId:r.inventoryId,batchId:r.batchId,batchNumber:r.batchNumber,materialId:r.materialId,availableQuantity:r.availableQuantity,quantityToConsume:r.quantityToConsume})),this.validateBom()}get inventoryForModal(){return this.availableInventory.map(e=>({inventoryId:e.inventoryId,batchId:e.batchId,batchNumber:e.batchNumber,materialId:e.materialId,materialName:e.materialName,quantity:e.quantity,unit:e.unit||"T",state:e.state,location:e.location}))}toggleSection(e){this.collapsedSections[e]=!this.collapsedSections[e]}isCollapsed(e){return this.collapsedSections[e]||!1}getOutputBatches(){return this.confirmationResult?this.confirmationResult.outputBatches&&this.confirmationResult.outputBatches.length>0?this.confirmationResult.outputBatches:this.confirmationResult.outputBatch?[this.confirmationResult.outputBatch]:[]:[]}hasMultipleBatches(){return this.getOutputBatches().length>1}isPartialConfirmation(){return this.confirmationResult?.isPartial===!0}getRemainingQty(){return this.confirmationResult?.remainingQty||0}continueConfirmation(){this.success=!1,this.confirmationResult=null,this.selectedMaterials=[],this.initForm(),this.loadData()}getTargetQty(){return this.operation?.targetQty||this.operation?.order?.quantity||0}getConfirmationProgress(){let e=this.getTargetQty();if(e<=0)return 0;let r=this.confirmationResult?.producedQty||0;return Math.min(100,Math.round(r/e*100))}static{this.\u0275fac=function(r){return new(r||i)(S(te),S(B),S(me),S(q))}}static{this.\u0275cmp=M({type:i,selectors:[["app-production-confirm"]],decls:12,vars:7,consts:[[1,"container"],[1,"page-header"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-arrow-left"],[1,"page-title"],["class","text-center",4,"ngIf"],["class","success-container",4,"ngIf"],[4,"ngIf"],["class","card",4,"ngIf"],[3,"close","selectionChange","isOpen","availableInventory","selectedMaterials"],[1,"text-center"],["message","Loading operation details..."],[1,"success-container"],[1,"card","success-card"],[1,"success-icon"],[1,"fas",3,"ngClass"],["class","partial-info",4,"ngIf"],[1,"result-summary"],[1,"result-row"],[1,"result-label"],[1,"result-value"],["class","result-row",4,"ngIf"],["class","output-batches-section",4,"ngIf"],[3,"status"],[1,"success-actions"],[1,"btn","btn-primary",3,"click"],["class","btn btn-success",3,"click",4,"ngIf"],["class","btn btn-secondary",3,"click",4,"ngIf"],[1,"partial-info"],[1,"partial-alert"],[1,"fas","fa-info-circle"],[1,"progress-bar-container"],[1,"progress-label"],[1,"progress-percent"],[1,"progress-bar"],[1,"progress-fill"],[1,"remaining-qty"],[1,"output-batches-section"],[1,"batches-header"],[1,"fas","fa-cubes"],[1,"batches-grid"],["class","batch-card",4,"ngFor","ngForOf"],[1,"batch-card"],[1,"batch-header"],[1,"batch-index"],[1,"batch-number"],[1,"batch-details"],[1,"batch-detail"],[1,"detail-label"],[1,"detail-value"],[1,"btn","btn-sm","btn-link","batch-link",3,"click"],[1,"fas","fa-external-link-alt"],["class","split-indicator",4,"ngIf"],[1,"split-indicator"],[1,"btn","btn-success",3,"click"],[1,"fas","fa-play"],[1,"card"],[1,"card-header","collapsible",3,"click"],[1,"card-body"],[1,"operation-info-grid"],[1,"info-item"],[1,"info-label"],[1,"info-value"],["class","batch-preview",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"card","grid-item"],[1,"row"],[1,"col-6"],[1,"form-group"],["for","startTime"],["type","datetime-local","id","startTime","formControlName","startTime",1,"form-control"],["class","field-error",4,"ngIf"],["for","endTime"],["type","datetime-local","id","endTime","formControlName","endTime",1,"form-control"],["class","duration-display",4,"ngIf"],["for","quantityProduced"],["type","number","id","quantityProduced","formControlName","quantityProduced","min","0",1,"form-control"],["for","quantityScrapped"],["type","number","id","quantityScrapped","formControlName","quantityScrapped","min","0",1,"form-control"],["class","yield-display",4,"ngIf"],[1,"card-header-with-action","collapsible",3,"click"],[1,"card-header"],[1,"header-actions"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-plus"],[1,"fas","collapse-icon",3,"ngClass"],["class","suggested-consumption",4,"ngIf"],["class","selected-materials",4,"ngIf"],[1,"available-materials"],["class","table",4,"ngIf"],["class","no-data",4,"ngIf"],["class","bom-requirements",4,"ngIf"],["class","bom-validation",4,"ngIf"],[1,"selection-count"],[1,"checkbox-group"],["class","checkbox-item",4,"ngFor","ngForOf"],["class","no-data-small",4,"ngIf"],["for","delayMinutes"],["type","number","id","delayMinutes","formControlName","delayMinutes","min","0","placeholder","0",1,"form-control"],["for","delayReason"],["class","required",4,"ngIf"],["id","delayReason","formControlName","delayReason",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","card grid-item",4,"ngIf"],["id","notes","formControlName","notes","rows","3","placeholder","Add any notes about this production confirmation...",1,"form-control"],["class","alert alert-error",4,"ngIf"],[1,"partial-option-section"],[1,"partial-checkbox"],[1,"checkbox-label"],["type","checkbox","formControlName","saveAsPartial"],[1,"checkbox-text"],[1,"checkbox-hint"],["class","partial-info-box",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-success",3,"disabled"],["class","spinner",4,"ngIf"],[1,"batch-preview"],["class","info-value batch-number-preview",4,"ngIf"],["class","info-value loading-text",4,"ngIf"],[1,"preview-note"],[1,"info-value","batch-number-preview"],[1,"info-value","loading-text"],[1,"field-error"],[1,"duration-display"],[1,"duration-label"],[1,"duration-value"],[1,"duration-detail"],[1,"yield-display"],[1,"yield-stats"],[1,"yield-stat"],[1,"stat-label"],[1,"stat-value"],[1,"yield-percentage",3,"ngClass"],[1,"yield-bar"],[1,"yield-fill",3,"ngClass"],[1,"yield-legend"],[1,"legend-item"],[1,"legend-dot","good"],[1,"legend-dot","warning"],[1,"legend-dot","critical"],[1,"suggested-consumption"],[1,"suggestion-header"],[1,"suggestion-info"],[1,"suggestion-label"],[1,"suggestion-value"],[1,"table","suggestion-table"],[3,"insufficient",4,"ngFor","ngForOf"],["class","alert alert-warning",4,"ngIf"],[1,"stock-status"],[1,"alert","alert-warning"],[1,"selected-materials"],[1,"table"],[4,"ngFor","ngForOf"],["type","number",1,"form-control","consume-qty",3,"change","value","min","max"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],["type","button",1,"btn","btn-sm",3,"click","ngClass","disabled"],[1,"no-data"],[1,"bom-requirements"],[1,"table","bom-table"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"bom-status",3,"ngClass"],[1,"bom-validation"],[1,"alert","alert-error"],[1,"checkbox-item"],["type","checkbox",3,"change","checked"],[1,"no-data-small"],[1,"required"],[3,"value"],["formArrayName","processParameters"],["class","form-group",4,"ngFor","ngForOf"],[3,"formGroupName"],["class","param-hint",4,"ngIf"],["type","number","formControlName","parameterValue","step","any",1,"form-control",3,"placeholder"],[1,"param-hint"],[1,"partial-info-box"],[1,"spinner"]],template:function(r,l){r&1&&(n(0,"div",0)(1,"div",1)(2,"button",2),_("click",function(){return l.goBack()}),f(3,"i",3),o(4," Back to Order"),t(),n(5,"h1",4),o(6,"Production Confirmation"),t()(),m(7,Ee,2,0,"div",5)(8,De,37,18,"div",6)(9,Mt,172,58,"div",7)(10,Et,3,1,"div",8),t(),n(11,"app-material-selection-modal",9),_("close",function(){return l.closeMaterialModal()})("selectionChange",function(h){return l.onMaterialSelectionChange(h)}),t()),r&2&&(a(7),c("ngIf",l.loading),a(),c("ngIf",l.success&&l.confirmationResult),a(),c("ngIf",!l.loading&&!l.success&&l.operation),a(),c("ngIf",!l.loading&&!l.operation&&!l.success),a(),c("isOpen",l.showMaterialModal)("availableInventory",l.inventoryForModal)("selectedMaterials",l.selectedMaterials))},dependencies:[E,I,w,ae,T,k,D,re,ne,Q,z,ie,pe,le,se,de,ce,fe,_e,xe,X],styles:[".form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px;margin-bottom:20px}.grid-item[_ngcontent-%COMP%]{min-width:0}.grid-full[_ngcontent-%COMP%]{grid-column:1 / -1}.card-header.collapsible[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none;transition:background-color .2s}.card-header.collapsible[_ngcontent-%COMP%]:hover{background-color:#e8e8e8}.card-header.collapsible[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px;color:#666;transition:transform .3s ease}.card-header-with-action.collapsible[_ngcontent-%COMP%]{cursor:pointer}.card-header-with-action.collapsible[_ngcontent-%COMP%]:hover{background-color:#e8e8e8}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.collapse-icon[_ngcontent-%COMP%]{font-size:14px;color:#666}.card-body[_ngcontent-%COMP%]{padding:16px;overflow:hidden;transition:max-height .3s ease,padding .3s ease,opacity .3s ease;max-height:2000px;opacity:1}.card-body.collapsed[_ngcontent-%COMP%]{max-height:0;padding-top:0;padding-bottom:0;opacity:0}.page-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:24px;margin-bottom:24px}.operation-info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:20px}.info-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.info-label[_ngcontent-%COMP%]{font-size:12px;color:#888;text-transform:uppercase}.info-value[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.available-materials[_ngcontent-%COMP%]{margin-bottom:24px}.available-materials[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .selected-materials[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px;font-weight:500;margin-bottom:12px;color:#555}.consume-qty[_ngcontent-%COMP%]{width:100px;padding:6px 8px}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:13px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px;margin-bottom:40px}.no-data[_ngcontent-%COMP%]{color:#888;text-align:center;padding:20px}.required[_ngcontent-%COMP%]{color:#d32f2f}.param-hint[_ngcontent-%COMP%]{font-size:12px;color:#888;font-weight:400}.success-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px 0}.success-card[_ngcontent-%COMP%]{text-align:center;max-width:500px;width:100%}.success-icon[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background:#4caf50;color:#fff;font-size:40px;display:flex;align-items:center;justify-content:center;margin:0 auto 24px}.success-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#2e7d32;margin-bottom:24px}.result-summary[_ngcontent-%COMP%]{background:#f5f5f5;border-radius:8px;padding:20px;margin-bottom:24px}.result-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #eee}.result-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.result-label[_ngcontent-%COMP%]{color:#666}.result-value[_ngcontent-%COMP%]{font-weight:500}.success-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:center}.spinner[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.bom-requirements[_ngcontent-%COMP%]{margin-top:24px;padding-top:24px;border-top:1px solid #e0e0e0}.bom-requirements[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14px;font-weight:500;margin-bottom:12px;color:#555}.bom-table[_ngcontent-%COMP%]   tr.bom-met[_ngcontent-%COMP%]{background-color:#e8f5e9}.bom-table[_ngcontent-%COMP%]   tr.bom-partial[_ngcontent-%COMP%]{background-color:#fff3e0}.bom-table[_ngcontent-%COMP%]   tr.bom-missing[_ngcontent-%COMP%]{background-color:#ffebee}.bom-status[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500}.bom-status.met[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.bom-status.partial[_ngcontent-%COMP%]{background-color:#ff9800;color:#fff}.bom-status.missing[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.bom-validation[_ngcontent-%COMP%]{margin-top:16px}.bom-validation[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:8px 0 0 20px;padding:0}.alert-warning[_ngcontent-%COMP%]{background-color:#fff3e0;color:#e65100;border:1px solid #ffcc80;padding:12px 16px;border-radius:4px;margin-bottom:12px}.checkbox-group[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;border:1px solid #e0e0e0;border-radius:4px;padding:12px;background:#fafafa}.checkbox-item[_ngcontent-%COMP%]{margin-bottom:8px}.checkbox-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;padding:6px 8px;border-radius:4px;transition:background-color .2s}.checkbox-label[_ngcontent-%COMP%]:hover{background-color:#e3f2fd}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-right:10px;width:18px;height:18px;cursor:pointer}.checkbox-text[_ngcontent-%COMP%]{font-size:14px;color:#333}.selection-count[_ngcontent-%COMP%]{font-size:12px;color:#666;font-weight:400}.no-data-small[_ngcontent-%COMP%]{color:#888;font-size:13px;margin:0}.field-error[_ngcontent-%COMP%]{color:#d32f2f;font-size:12px;margin-top:4px}input[type=datetime-local][_ngcontent-%COMP%]{padding:8px 12px}.suggested-consumption[_ngcontent-%COMP%]{background:#e3f2fd;border:1px solid #90caf9;border-radius:8px;padding:16px;margin-bottom:24px}.suggestion-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.suggestion-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#1565c0;font-size:14px}.suggestion-info[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:12px;font-size:14px}.suggestion-label[_ngcontent-%COMP%]{color:#666}.suggestion-value[_ngcontent-%COMP%]{font-weight:600;color:#1565c0}.suggestion-table[_ngcontent-%COMP%]{background:#fff;margin-bottom:12px}.suggestion-table[_ngcontent-%COMP%]   tr.insufficient[_ngcontent-%COMP%]{background-color:#ffebee}.stock-status[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;font-size:12px;font-weight:500}.stock-status.ok[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.stock-status.low[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.duration-display[_ngcontent-%COMP%]{margin-top:16px;padding:12px 16px;background:#f5f5f5;border-radius:8px;display:flex;align-items:center;gap:8px}.duration-label[_ngcontent-%COMP%]{color:#666;font-size:14px}.duration-value[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#1976d2}.duration-detail[_ngcontent-%COMP%]{color:#888;font-size:13px}.yield-display[_ngcontent-%COMP%]{margin-top:20px;padding:16px;background:#fafafa;border-radius:8px;border:1px solid #e0e0e0}.yield-stats[_ngcontent-%COMP%]{display:flex;gap:24px;margin-bottom:12px}.yield-stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.stat-label[_ngcontent-%COMP%]{color:#666;font-size:14px}.stat-value[_ngcontent-%COMP%]{font-weight:600;font-size:16px;color:#333}.yield-percentage[_ngcontent-%COMP%]{font-size:24px;font-weight:700;padding:4px 12px;border-radius:8px}.yield-percentage.yield-good[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.yield-percentage.yield-warning[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.yield-percentage.yield-critical[_ngcontent-%COMP%]{background:#ffebee;color:#c62828}.yield-bar[_ngcontent-%COMP%]{height:8px;background:#e0e0e0;border-radius:4px;overflow:hidden;margin-bottom:12px}.yield-fill[_ngcontent-%COMP%]{height:100%;border-radius:4px;transition:width .3s ease}.yield-fill.yield-good[_ngcontent-%COMP%]{background:linear-gradient(90deg,#4caf50,#66bb6a)}.yield-fill.yield-warning[_ngcontent-%COMP%]{background:linear-gradient(90deg,#ff9800,#ffb74d)}.yield-fill.yield-critical[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f44336,#ef5350)}.yield-legend[_ngcontent-%COMP%]{display:flex;gap:16px;font-size:12px;color:#666}.legend-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.legend-dot[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%}.legend-dot.good[_ngcontent-%COMP%]{background:#4caf50}.legend-dot.warning[_ngcontent-%COMP%]{background:#ff9800}.legend-dot.critical[_ngcontent-%COMP%]{background:#f44336}.batch-preview[_ngcontent-%COMP%]{margin-top:20px;padding-top:16px;border-top:1px dashed #e0e0e0}.batch-number-preview[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace;font-size:18px;font-weight:600;color:#1976d2;background:#e3f2fd;padding:4px 12px;border-radius:4px;display:inline-block}.preview-note[_ngcontent-%COMP%]{font-size:12px;color:#888;margin-top:8px;margin-bottom:0;font-style:italic}.loading-text[_ngcontent-%COMP%]{color:#888;font-style:italic}.card-header-with-action[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;border-bottom:1px solid #e0e0e0;background:#fafafa;margin:-16px -16px 16px;border-radius:8px 8px 0 0}.card-header-with-action[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{background:none;padding:0;margin:0;border:none}.btn-hold[_ngcontent-%COMP%]{margin-left:auto;background:#ff9800;color:#fff}.btn-hold[_ngcontent-%COMP%]:hover{background:#f57c00}.hold-badge[_ngcontent-%COMP%]{margin-left:auto;background:#ffecb3;color:#e65100;padding:8px 16px;border-radius:4px;font-weight:500;display:flex;align-items:center;gap:8px}.btn-warning[_ngcontent-%COMP%]{background:#ff9800;color:#fff}.btn-warning[_ngcontent-%COMP%]:hover{background:#f57c00}@media (max-width: 992px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.success-card.partial-card[_ngcontent-%COMP%]{border:2px solid #ff9800}.success-card.partial-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#e65100}.success-icon.partial-icon[_ngcontent-%COMP%]{background:#ff9800}.partial-info[_ngcontent-%COMP%]{margin-bottom:20px}.partial-alert[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background:#fff3e0;color:#e65100;padding:12px 16px;border-radius:8px;margin-bottom:16px;text-align:left}.partial-alert[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.progress-bar-container[_ngcontent-%COMP%]{background:#f5f5f5;padding:16px;border-radius:8px}.progress-label[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;font-size:14px;color:#333}.progress-percent[_ngcontent-%COMP%]{font-weight:600;color:#1976d2}.progress-bar[_ngcontent-%COMP%]{height:12px;background:#e0e0e0;border-radius:6px;overflow:hidden;margin-bottom:8px}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#1976d2,#42a5f5);border-radius:6px;transition:width .5s ease}.remaining-qty[_ngcontent-%COMP%]{font-size:14px;color:#666}.remaining-qty[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#e65100}.output-batches-section[_ngcontent-%COMP%]{margin-top:16px;padding-top:16px;border-top:1px solid #e0e0e0;text-align:left}.batches-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:12px;font-size:14px;font-weight:600;color:#1976d2}.batches-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.batches-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px}.batch-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e0e0e0;border-radius:8px;padding:12px;transition:box-shadow .2s}.batch-card[_ngcontent-%COMP%]:hover{box-shadow:0 2px 8px #0000001a}.batch-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:8px}.batch-index[_ngcontent-%COMP%]{background:#1976d2;color:#fff;padding:2px 6px;border-radius:4px;font-size:11px;font-weight:600}.batch-number[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace;font-weight:600;color:#333;font-size:13px}.batch-details[_ngcontent-%COMP%]{margin-bottom:8px}.batch-detail[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:12px;padding:2px 0}.detail-label[_ngcontent-%COMP%]{color:#888}.detail-value[_ngcontent-%COMP%]{font-weight:500;color:#333}.batch-link[_ngcontent-%COMP%]{padding:4px 8px;font-size:12px;color:#1976d2}.batch-link[_ngcontent-%COMP%]:hover{text-decoration:underline}.split-indicator[_ngcontent-%COMP%]{font-size:12px;color:#ff9800;font-weight:400}.partial-option-section[_ngcontent-%COMP%]{background:#f5f5f5;border-radius:8px;padding:16px;margin-bottom:20px}.partial-checkbox[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.partial-checkbox[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;cursor:pointer;padding:0}.partial-checkbox[_ngcontent-%COMP%]   .checkbox-label[_ngcontent-%COMP%]:hover{background:transparent}.partial-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-top:4px;width:20px;height:20px}.partial-checkbox[_ngcontent-%COMP%]   .checkbox-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.checkbox-hint[_ngcontent-%COMP%]{font-size:13px;color:#666;font-weight:400}.partial-info-box[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:8px;background:#e3f2fd;color:#1565c0;padding:12px 16px;border-radius:8px;margin-top:12px;font-size:13px}.partial-info-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;margin-top:2px}@media (max-width: 768px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}.operation-info-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.row[_ngcontent-%COMP%]{flex-direction:column}.col-6[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%}.checkbox-group[_ngcontent-%COMP%]{max-height:150px}.yield-stats[_ngcontent-%COMP%]{flex-direction:column;gap:12px}.yield-legend[_ngcontent-%COMP%]{flex-wrap:wrap;gap:8px}.duration-display[_ngcontent-%COMP%], .page-header[_ngcontent-%COMP%]{flex-wrap:wrap}.btn-hold[_ngcontent-%COMP%], .hold-badge[_ngcontent-%COMP%]{margin-left:0;margin-top:8px}.card-header-with-action[_ngcontent-%COMP%]{flex-direction:column;gap:12px;align-items:flex-start}.card-header-with-action.collapsible[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between}.header-actions[_ngcontent-%COMP%]{flex-wrap:wrap;gap:8px}.card-header.collapsible[_ngcontent-%COMP%]{padding:16px}.card-header.collapsible[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .collapse-icon[_ngcontent-%COMP%]{font-size:16px}.batches-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.progress-label[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:4px}.success-actions[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.success-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}"]})}}return i})();function It(i,s){if(i&1&&(n(0,"option",18),o(1),t()),i&2){let e=s.$implicit;c("value",e),a(),u(e)}}function wt(i,s){if(i&1&&(n(0,"div",19)(1,"div",20)(2,"span",21),o(3),t(),n(4,"span",22),o(5,"Total"),t()(),n(6,"div",23)(7,"span",21),o(8),t(),n(9,"span",22),o(10,"Confirmed"),t()(),n(11,"div",24)(12,"span",21),o(13),t(),n(14,"span",22),o(15,"Pending Review"),t()(),n(16,"div",25)(17,"span",21),o(18),t(),n(19,"span",22),o(20,"Rejected"),t()()()),i&2){let e=p();a(3),u(e.allConfirmations.length),a(5),u(e.countByStatus("CONFIRMED")),a(5),u(e.countByStatus("PENDING_REVIEW")),a(5),u(e.countByStatus("REJECTED"))}}function Tt(i,s){if(i&1){let e=b();n(0,"tr",31),_("click",function(){let l=x(e).$implicit,d=p(3);return v(d.toggleDetail(l))}),n(1,"td"),o(2),t(),n(3,"td"),o(4),t(),n(5,"td"),o(6),t(),n(7,"td"),o(8),t(),n(9,"td"),o(10),t(),n(11,"td"),o(12),t(),n(13,"td")(14,"span",32),o(15),t()(),n(16,"td"),o(17),t()()}if(i&2){let e=s.$implicit,r=p(3);y("selected",r.selectedConfirmation===e)("rejected-row",e.status==="REJECTED"),a(2),u(e.confirmationId),a(2),u(e.operationName||"-"),a(2),u((e.outputBatch==null?null:e.outputBatch.batchNumber)||"-"),a(2),u(e.producedQty),a(2),u(e.scrapQty||0),a(2),u(r.getDuration(e.startTime,e.endTime)),a(2),c("ngClass",r.getStatusClass(e.status)),a(),g(" ",e.status," "),a(2),u(r.formatDateTime(e.createdOn))}}function kt(i,s){if(i&1&&(n(0,"table",29)(1,"thead")(2,"tr")(3,"th"),o(4,"ID"),t(),n(5,"th"),o(6,"Operation"),t(),n(7,"th"),o(8,"Output Batch"),t(),n(9,"th"),o(10,"Produced Qty"),t(),n(11,"th"),o(12,"Scrap Qty"),t(),n(13,"th"),o(14,"Duration"),t(),n(15,"th"),o(16,"Status"),t(),n(17,"th"),o(18,"Created"),t()()(),n(19,"tbody"),m(20,Tt,18,13,"tr",30),t()()),i&2){let e=p(2);a(20),c("ngForOf",e.confirmations)}}function qt(i,s){i&1&&(n(0,"div",33)(1,"p"),o(2,"No production confirmations found."),t()())}function Nt(i,s){if(i&1&&(n(0,"div",34),o(1),t()),i&2){let e=p(2);a(),C(" Showing ",e.confirmations.length," of ",e.allConfirmations.length," confirmations ")}}function Rt(i,s){if(i&1&&(n(0,"div",26),m(1,kt,21,1,"table",27)(2,qt,3,0,"ng-template",null,1,G)(4,Nt,2,2,"div",28),t()),i&2){let e=j(3),r=p();a(),c("ngIf",r.confirmations.length>0)("ngIfElse",e),a(3),c("ngIf",r.confirmations.length>0)}}function Vt(i,s){i&1&&(n(0,"div",35),o(1,"Loading production history..."),t())}function Ft(i,s){if(i&1&&(n(0,"span"),o(1),t()),i&2){let e=p(3);a(),g(" - ",e.selectedConfirmation.delayReason,"")}}function Bt(i,s){if(i&1&&(n(0,"div",41)(1,"span",42),o(2,"Delay:"),t(),o(3),m(4,Ft,2,1,"span",46),t()),i&2){let e=p(2);a(3),g(" ",e.selectedConfirmation.delayMinutes,"min "),a(),c("ngIf",e.selectedConfirmation.delayReason)}}function Dt(i,s){if(i&1&&(n(0,"div",41)(1,"span",42),o(2,"Notes:"),t(),o(3),t()),i&2){let e=p(2);a(3),g(" ",e.selectedConfirmation.notes," ")}}function zt(i,s){if(i&1&&(n(0,"div",40)(1,"h4"),o(2,"Output Batch"),t(),n(3,"div",41)(4,"span",42),o(5,"Batch:"),t(),o(6),t(),n(7,"div",41)(8,"span",42),o(9,"Material:"),t(),o(10),t(),n(11,"div",41)(12,"span",42),o(13,"Quantity:"),t(),o(14),t()()),i&2){let e=p(2);a(6),g(" ",e.selectedConfirmation.outputBatch.batchNumber,""),a(4),g(" ",e.selectedConfirmation.outputBatch.materialName,""),a(4),C(" ",e.selectedConfirmation.outputBatch.quantity," ",e.selectedConfirmation.outputBatch.unit,"")}}function Qt(i,s){if(i&1&&(n(0,"div",41),o(1),t()),i&2){let e=s.$implicit;a(),C(" ",e.name," (",e.equipmentCode,") ")}}function At(i,s){if(i&1&&(n(0,"div",40)(1,"h4"),o(2,"Equipment"),t(),m(3,Qt,2,2,"div",47),t()),i&2){let e=p(2);a(3),c("ngForOf",e.selectedConfirmation.equipment)}}function Lt(i,s){if(i&1&&(n(0,"div",41),o(1),t()),i&2){let e=s.$implicit;a(),C(" ",e.name," (",e.operatorCode,") ")}}function jt(i,s){if(i&1&&(n(0,"div",40)(1,"h4"),o(2,"Operators"),t(),m(3,Lt,2,2,"div",47),t()),i&2){let e=p(2);a(3),c("ngForOf",e.selectedConfirmation.operators)}}function $t(i,s){if(i&1&&(n(0,"div",41),o(1),t()),i&2){let e=s.$implicit;a(),N(" ",e.materialId," - Batch ",e.batchNumber," (",e.quantityConsumed,") ")}}function Ht(i,s){if(i&1&&(n(0,"div",40)(1,"h4"),o(2,"Materials Consumed"),t(),m(3,$t,2,3,"div",47),t()),i&2){let e=p(2);a(3),c("ngForOf",e.selectedConfirmation.materialsConsumed)}}function Wt(i,s){if(i&1&&(n(0,"div",48)(1,"h4"),o(2,"Rejection"),t(),n(3,"div",41)(4,"span",42),o(5,"Reason:"),t(),o(6),t(),n(7,"div",41)(8,"span",42),o(9,"Rejected By:"),t(),o(10),t(),n(11,"div",41)(12,"span",42),o(13,"Rejected On:"),t(),o(14),t()()),i&2){let e=p(2);a(6),g(" ",e.selectedConfirmation.rejectionReason,""),a(4),g(" ",e.selectedConfirmation.rejectedBy,""),a(4),g(" ",e.formatDateTime(e.selectedConfirmation.rejectedOn),"")}}function Gt(i,s){if(i&1){let e=b();n(0,"div",36)(1,"div",37)(2,"h3"),o(3),t(),n(4,"button",38),_("click",function(){x(e);let l=p();return v(l.selectedConfirmation=null)}),o(5,"Close"),t()(),n(6,"div",39)(7,"div",40)(8,"h4"),o(9,"Production Details"),t(),n(10,"div",41)(11,"span",42),o(12,"Operation:"),t(),o(13),t(),n(14,"div",41)(15,"span",42),o(16,"Produced Qty:"),t(),o(17),t(),n(18,"div",41)(19,"span",42),o(20,"Scrap Qty:"),t(),o(21),t(),n(22,"div",41)(23,"span",42),o(24,"Start:"),t(),o(25),t(),n(26,"div",41)(27,"span",42),o(28,"End:"),t(),o(29),t(),m(30,Bt,5,2,"div",43)(31,Dt,4,1,"div",43),t(),m(32,zt,15,4,"div",44)(33,At,4,1,"div",44)(34,jt,4,1,"div",44)(35,Ht,4,1,"div",44)(36,Wt,15,3,"div",45),t()()}if(i&2){let e=p();a(3),g("Confirmation #",e.selectedConfirmation.confirmationId,""),a(10),g(" ",e.selectedConfirmation.operationName,""),a(4),g(" ",e.selectedConfirmation.producedQty,""),a(4),g(" ",e.selectedConfirmation.scrapQty||0,""),a(4),g(" ",e.formatDateTime(e.selectedConfirmation.startTime),""),a(4),g(" ",e.formatDateTime(e.selectedConfirmation.endTime),""),a(),c("ngIf",e.selectedConfirmation.delayMinutes),a(),c("ngIf",e.selectedConfirmation.notes),a(),c("ngIf",e.selectedConfirmation.outputBatch),a(),c("ngIf",e.selectedConfirmation.equipment==null?null:e.selectedConfirmation.equipment.length),a(),c("ngIf",e.selectedConfirmation.operators==null?null:e.selectedConfirmation.operators.length),a(),c("ngIf",e.selectedConfirmation.materialsConsumed==null?null:e.selectedConfirmation.materialsConsumed.length),a(),c("ngIf",e.selectedConfirmation.rejectionReason)}}var Pe=(()=>{class i{constructor(e){this.apiService=e,this.allConfirmations=[],this.confirmations=[],this.loading=!0,this.error="",this.filterStatus="all",this.searchTerm="",this.statuses=["CONFIRMED","PENDING_REVIEW","PARTIALLY_CONFIRMED","REJECTED"],this.selectedConfirmation=null}ngOnInit(){this.loadConfirmations()}loadConfirmations(){this.loading=!0,this.error="",this.allConfirmations=[];let e=0,r=this.statuses.length;this.statuses.forEach(l=>{this.apiService.getConfirmationsByStatus(l).subscribe({next:d=>{this.allConfirmations.push(...d),e++,e===r&&(this.allConfirmations.sort((h,P)=>(P.confirmationId||0)-(h.confirmationId||0)),this.applyFilters(),this.loading=!1)},error:()=>{e++,e===r&&(this.applyFilters(),this.loading=!1)}})})}applyFilters(){let e=[...this.allConfirmations];if(this.filterStatus&&this.filterStatus!=="all"&&(e=e.filter(r=>r.status===this.filterStatus)),this.searchTerm){let r=this.searchTerm.toLowerCase();e=e.filter(l=>l.operationName?.toLowerCase().includes(r)||l.outputBatch?.batchNumber?.toLowerCase().includes(r)||String(l.confirmationId).includes(r)||l.notes?.toLowerCase().includes(r))}this.confirmations=e}onFilterStatusChange(e){this.filterStatus=e,this.applyFilters()}onSearchChange(e){this.searchTerm=e,this.applyFilters()}getStatusClass(e){return e?.toLowerCase().replace(/_/g,"-")||""}countByStatus(e){return this.allConfirmations.filter(r=>r.status===e).length}formatDateTime(e){return e?new Date(e).toLocaleString():"-"}getDuration(e,r){if(!e||!r)return"-";let l=new Date(r).getTime()-new Date(e).getTime(),d=Math.round(l/6e4);return d<60?`${d}m`:`${Math.floor(d/60)}h ${d%60}m`}toggleDetail(e){this.selectedConfirmation=this.selectedConfirmation===e?null:e}static{this.\u0275fac=function(r){return new(r||i)(S(q))}}static{this.\u0275cmp=M({type:i,selectors:[["app-production-history"]],decls:22,vars:11,consts:[["loadingTpl",""],["emptyTpl",""],[1,"production-history-page"],[1,"page-header"],[1,"page-title"],[1,"card"],[1,"filters"],[1,"filter-group"],["for","status-filter"],["id","status-filter",3,"ngModelChange","change","ngModel"],["value","all"],[3,"value",4,"ngFor","ngForOf"],[1,"filter-group","search-group"],["for","search"],["type","text","id","search","placeholder","Search by operation, batch, notes...",3,"ngModelChange","input","ngModel"],["class","summary-cards",4,"ngIf"],["class","table-container",4,"ngIf","ngIfElse"],["class","detail-panel card",4,"ngIf"],[3,"value"],[1,"summary-cards"],[1,"summary-card"],[1,"count"],[1,"label"],[1,"summary-card","confirmed"],[1,"summary-card","pending"],[1,"summary-card","rejected"],[1,"table-container"],["class","data-table",4,"ngIf","ngIfElse"],["class","result-count",4,"ngIf"],[1,"data-table"],["class","clickable-row",3,"selected","rejected-row","click",4,"ngFor","ngForOf"],[1,"clickable-row",3,"click"],[1,"status-badge",3,"ngClass"],[1,"empty-state"],[1,"result-count"],[1,"loading"],[1,"detail-panel","card"],[1,"detail-header"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"detail-grid"],[1,"detail-section"],[1,"detail-row"],[1,"detail-label"],["class","detail-row",4,"ngIf"],["class","detail-section",4,"ngIf"],["class","detail-section rejection",4,"ngIf"],[4,"ngIf"],["class","detail-row",4,"ngFor","ngForOf"],[1,"detail-section","rejection"]],template:function(r,l){if(r&1){let d=b();n(0,"div",2)(1,"div",3)(2,"h1",4),o(3,"Production History"),t()(),n(4,"div",5)(5,"div",6)(6,"div",7)(7,"label",8),o(8,"Status:"),t(),n(9,"select",9),W("ngModelChange",function(P){return x(d),H(l.filterStatus,P)||(l.filterStatus=P),v(P)}),_("change",function(){return x(d),v(l.onFilterStatusChange(l.filterStatus))}),n(10,"option",10),o(11,"All Statuses"),t(),m(12,It,2,2,"option",11),t()(),n(13,"div",12)(14,"label",13),o(15,"Search:"),t(),n(16,"input",14),W("ngModelChange",function(P){return x(d),H(l.searchTerm,P)||(l.searchTerm=P),v(P)}),_("input",function(){return x(d),v(l.onSearchChange(l.searchTerm))}),t()()()(),m(17,wt,21,4,"div",15)(18,Rt,5,3,"div",16)(19,Vt,2,0,"ng-template",null,0,G)(21,Gt,37,13,"div",17),t()}if(r&2){let d=j(20);a(6),y("filter-active",l.filterStatus&&l.filterStatus!=="all"),a(3),y("filter-active",l.filterStatus&&l.filterStatus!=="all"),$("ngModel",l.filterStatus),a(3),c("ngForOf",l.statuses),a(4),$("ngModel",l.searchTerm),a(),c("ngIf",!l.loading),a(),c("ngIf",!l.loading)("ngIfElse",d),a(3),c("ngIf",l.selectedConfirmation)}},dependencies:[E,I,w,T,k,D,Q,z,oe],styles:[".production-history-page[_ngcontent-%COMP%]{padding:20px}.error-banner[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:12px 16px;border-radius:4px;margin-bottom:16px}.summary-cards[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:20px;flex-wrap:wrap}.summary-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:16px 24px;box-shadow:0 1px 3px #0000001a;text-align:center;min-width:120px;border-top:3px solid #dee2e6}.summary-card[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{display:block;font-size:24px;font-weight:700;color:#333}.summary-card[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:#666;text-transform:uppercase}.summary-card.confirmed[_ngcontent-%COMP%]{border-top-color:#388e3c}.summary-card.pending[_ngcontent-%COMP%]{border-top-color:#f57c00}.summary-card.rejected[_ngcontent-%COMP%]{border-top-color:#d32f2f}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 1px 3px #0000001a;overflow:hidden}.clickable-row[_ngcontent-%COMP%]{cursor:pointer;transition:background .15s}.clickable-row[_ngcontent-%COMP%]:hover{background:#f8f9fa}.clickable-row.selected[_ngcontent-%COMP%]{background:#e3f2fd}.rejected-row[_ngcontent-%COMP%]{background:#fff5f5}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500;text-transform:uppercase}.status-badge.confirmed[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-badge.pending-review[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.status-badge.partially-confirmed[_ngcontent-%COMP%]{background:#cce5ff;color:#004085}.status-badge.rejected[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.result-count[_ngcontent-%COMP%]{padding:12px 16px;border-top:1px solid #eee;font-size:13px;color:#666}.empty-state[_ngcontent-%COMP%], .loading[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.detail-panel[_ngcontent-%COMP%]{margin-top:20px}.detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.detail-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px}.detail-section[_ngcontent-%COMP%]{padding:12px;background:#f8f9fa;border-radius:6px}.detail-section.rejection[_ngcontent-%COMP%]{background:#fff5f5;border:1px solid #f8d7da}.detail-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;font-size:14px;color:#555;text-transform:uppercase;letter-spacing:.03em}.detail-row[_ngcontent-%COMP%]{padding:4px 0;font-size:14px}.detail-label[_ngcontent-%COMP%]{font-weight:500;color:#555}"]})}}return i})();function Yt(i,s){i&1&&(n(0,"div",7),o(1,"Loading available orders..."),t())}function Jt(i,s){if(i&1&&(n(0,"div",8),o(1),t()),i&2){let e=p();a(),u(e.error)}}function Ut(i,s){if(i&1&&(n(0,"option",22),o(1),t()),i&2){let e=s.$implicit;c("value",e.orderId),a(),C(" ",e.orderNumber," - ",e.customerName||e.customerId," ")}}function Kt(i,s){i&1&&(n(0,"span",23),o(1," No orders with ready operations available "),t())}function Xt(i,s){if(i&1&&(n(0,"option",22),o(1),t()),i&2){let e=s.$implicit;c("value",e.operationId),a(),C(" ",e.operationName," (",e.operationType||"Unknown Type",") ")}}function Zt(i,s){i&1&&(n(0,"span",23),o(1," No READY operations found for this order "),t())}function en(i,s){if(i&1){let e=b();n(0,"div",11)(1,"label",24),o(2,"Operation"),t(),n(3,"select",25),_("change",function(l){x(e);let d=p(2);return v(d.onOperationSelect(l))}),n(4,"option",14),o(5,"-- Select an Operation --"),t(),m(6,Xt,2,3,"option",15),t(),m(7,Zt,2,0,"span",16),t()}if(i&2){let e=p(2);a(6),c("ngForOf",e.readyOperations),a(),c("ngIf",e.readyOperations.length===0)}}function tn(i,s){if(i&1){let e=b();n(0,"div",26)(1,"button",27),_("click",function(){x(e);let l=p(2);return v(l.startConfirmation())}),o(2," Start Production Confirmation "),t()()}}function nn(i,s){if(i&1&&(n(0,"div",32)(1,"span",33),o(2),t(),n(3,"span",34),o(4),t()()),i&2){let e=s.$implicit;a(2),u(e.label),a(2),u(e.value)}}function on(i,s){if(i&1&&(n(0,"tr")(1,"td"),o(2),t(),n(3,"td"),o(4),t(),n(5,"td"),o(6),F(7,"date"),t(),n(8,"td")(9,"span",38),o(10),t()()()),i&2){let e=s.$implicit;a(2),u(e.productName||e.productSku),a(2),C("",e.quantity," ",e.unit,""),a(2),u(K(7,6,e.deliveryDate,"shortDate")),a(3),c("ngClass","status-"+(e.status==null?null:e.status.toLowerCase())),a(),g(" ",e.status," ")}}function an(i,s){if(i&1&&(n(0,"div",35)(1,"h4"),o(2,"Line Items"),t(),n(3,"table",36)(4,"thead")(5,"tr")(6,"th"),o(7,"Product"),t(),n(8,"th"),o(9,"Quantity"),t(),n(10,"th"),o(11,"Delivery Date"),t(),n(12,"th"),o(13,"Status"),t()()(),n(14,"tbody"),m(15,on,11,9,"tr",37),t()()()),i&2){let e=p(3);a(15),c("ngForOf",e.selectedOrder.lineItems)}}function rn(i,s){if(i&1&&(n(0,"div",28)(1,"h3"),o(2,"Order Details"),t(),n(3,"div",29),m(4,nn,5,2,"div",30),t(),m(5,an,16,1,"div",31),t()),i&2){let e=p(2);a(4),c("ngForOf",e.orderContext),a(),c("ngIf",e.selectedOrder==null||e.selectedOrder.lineItems==null?null:e.selectedOrder.lineItems.length)}}function ln(i,s){if(i&1&&(n(0,"div",41)(1,"span",42),o(2,"Operation Type"),t(),n(3,"span",43),o(4),t()()),i&2){let e=p(3);a(4),u(e.selectedOperationDetails.operationType)}}function dn(i,s){if(i&1&&(n(0,"div",41)(1,"span",42),o(2,"Operation Code"),t(),n(3,"span",43),o(4),t()()),i&2){let e=p(3);a(4),u(e.selectedOperationDetails.operationCode)}}function cn(i,s){if(i&1&&(n(0,"div",39)(1,"h3"),o(2,"Selected Operation"),t(),n(3,"div",40)(4,"div",41)(5,"span",42),o(6,"Operation Name"),t(),n(7,"span",43),o(8),t()(),m(9,ln,5,1,"div",44)(10,dn,5,1,"div",44),n(11,"div",41)(12,"span",42),o(13,"Sequence"),t(),n(14,"span",43),o(15),t()(),n(16,"div",41)(17,"span",42),o(18,"Status"),t(),n(19,"span",45),o(20,"READY"),t()()()()),i&2){let e=p(2);a(8),u(e.selectedOperationDetails.operationName),a(),c("ngIf",e.selectedOperationDetails.operationType),a(),c("ngIf",e.selectedOperationDetails.operationCode),a(5),g("#",e.selectedOperationDetails.sequenceNumber,"")}}function sn(i,s){if(i&1&&(n(0,"div",46)(1,"h3"),o(2,"Available for Production"),t(),n(3,"div",47)(4,"div",48)(5,"span",49),o(6),t(),n(7,"span",50),o(8,"Orders"),t()(),n(9,"div",48)(10,"span",49),o(11),t(),n(12,"span",50),o(13,"Ready Operations"),t()()()()),i&2){let e=p(2);a(6),u(e.availableOrders.length),a(5),u(e.getTotalReadyOperations())}}function pn(i,s){if(i&1){let e=b();n(0,"div",9)(1,"div",10)(2,"h2"),o(3,"Select Order & Operation"),t(),n(4,"div",11)(5,"label",12),o(6,"Order"),t(),n(7,"select",13),_("change",function(l){x(e);let d=p();return v(d.onOrderSelect(l))}),n(8,"option",14),o(9,"-- Select an Order --"),t(),m(10,Ut,2,3,"option",15),t(),m(11,Kt,2,0,"span",16),t(),m(12,en,8,2,"div",17)(13,tn,3,0,"div",18),t(),m(14,rn,6,2,"div",19)(15,cn,21,4,"div",20)(16,sn,14,2,"div",21),t()}if(i&2){let e=p();a(10),c("ngForOf",e.availableOrders),a(),c("ngIf",e.availableOrders.length===0),a(),c("ngIf",e.selectedOrder),a(),c("ngIf",e.selectedOperationId),a(),c("ngIf",e.selectedOrder),a(),c("ngIf",e.selectedOperationDetails),a(),c("ngIf",!e.selectedOrder)}}var Se=(()=>{class i{constructor(e,r){this.apiService=e,this.router=r,this.availableOrders=[],this.selectedOrder=null,this.readyOperations=[],this.selectedOperationId=null,this.loading=!0,this.error=""}ngOnInit(){this.loadAvailableOrders()}loadAvailableOrders(){this.loading=!0,this.apiService.getAvailableOrders().subscribe({next:e=>{this.availableOrders=e,this.loading=!1},error:e=>{this.error="Failed to load available orders",this.loading=!1,console.error("Error loading orders:",e)}})}onOrderSelect(e){let r=e.target.value;if(this.selectedOperationId=null,this.readyOperations=[],!r){this.selectedOrder=null;return}this.selectedOrder=this.availableOrders.find(l=>l.orderId===+r)||null,this.selectedOrder&&(this.readyOperations=this.extractReadyOperations(this.selectedOrder))}extractReadyOperations(e){let r=[];for(let l of e.lineItems||[])for(let d of l.operations||[])d.status==="READY"&&r.push({operationId:d.operationId,operationName:d.processName?`${d.processName} - ${d.operationName}`:d.operationName,operationCode:d.operationCode,operationType:d.operationType,sequenceNumber:d.sequenceNumber,status:d.status});return r}onOperationSelect(e){let r=e.target.value;this.selectedOperationId=r?+r:null}startConfirmation(){this.selectedOperationId&&this.router.navigate(["/production/confirm",this.selectedOperationId])}goToHistory(){this.router.navigate(["/production/history"])}get orderContext(){if(!this.selectedOrder)return[];let e=[{label:"Customer",value:this.selectedOrder.customerName||this.selectedOrder.customerId||"N/A"},{label:"Order Date",value:this.selectedOrder.orderDate?new Date(this.selectedOrder.orderDate).toLocaleDateString():"N/A"},{label:"Status",value:this.selectedOrder.status||"N/A"}],r=this.selectedOrder.lineItems||[];if(r.length>0){let l=r[0];e.push({label:"Product",value:l.productName||l.productSku||"N/A"},{label:"Quantity",value:`${l.quantity||0} ${l.unit||""}`}),l.deliveryDate&&e.push({label:"Due Date",value:new Date(l.deliveryDate).toLocaleDateString()})}return e}get selectedOperationDetails(){return this.selectedOperationId&&this.readyOperations.find(e=>e.operationId===this.selectedOperationId)||null}getTotalReadyOperations(){let e=0;for(let r of this.availableOrders)e+=this.extractReadyOperations(r).length;return e}static{this.\u0275fac=function(r){return new(r||i)(S(q),S(B))}}static{this.\u0275cmp=M({type:i,selectors:[["app-production-landing"]],decls:9,vars:3,consts:[[1,"production-landing-page"],[1,"page-header"],[1,"page-title"],[1,"btn","btn-secondary",3,"click"],["class","loading",4,"ngIf"],["class","error-banner",4,"ngIf"],["class","content",4,"ngIf"],[1,"loading"],[1,"error-banner"],[1,"content"],[1,"selection-section"],[1,"form-group"],["for","orderSelect"],["id","orderSelect",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","help-text",4,"ngIf"],["class","form-group",4,"ngIf"],["class","form-actions",4,"ngIf"],["class","context-panel",4,"ngIf"],["class","operation-panel",4,"ngIf"],["class","stats-panel",4,"ngIf"],[3,"value"],[1,"help-text"],["for","operationSelect"],["id","operationSelect",3,"change"],[1,"form-actions"],[1,"btn","btn-primary",3,"click"],[1,"context-panel"],[1,"context-grid"],["class","context-item",4,"ngFor","ngForOf"],["class","line-items-summary",4,"ngIf"],[1,"context-item"],[1,"context-label"],[1,"context-value"],[1,"line-items-summary"],[1,"summary-table"],[4,"ngFor","ngForOf"],[1,"status-badge",3,"ngClass"],[1,"operation-panel"],[1,"operation-details"],[1,"detail-row"],[1,"detail-label"],[1,"detail-value"],["class","detail-row",4,"ngIf"],[1,"status-badge","status-ready"],[1,"stats-panel"],[1,"stat-cards"],[1,"stat-card"],[1,"stat-value"],[1,"stat-label"]],template:function(r,l){r&1&&(n(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"Production Confirmation"),t(),n(4,"button",3),_("click",function(){return l.goToHistory()}),o(5," View History "),t()(),m(6,Yt,2,0,"div",4)(7,Jt,2,1,"div",5)(8,pn,17,7,"div",6),t()),r&2&&(a(6),c("ngIf",l.loading),a(),c("ngIf",l.error),a(),c("ngIf",!l.loading&&!l.error))},dependencies:[E,I,w,T,k,Z],styles:[".production-landing-page[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;color:#333}.loading[_ngcontent-%COMP%], .error-banner[_ngcontent-%COMP%]{text-align:center;padding:40px 20px}.error-banner[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border-radius:8px}.content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:24px}.selection-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 1px 3px #0000001a;padding:24px}.selection-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 20px;font-size:18px;color:#333;padding-bottom:12px;border-bottom:1px solid #eee}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500;color:#555}.form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid #ddd;border-radius:4px;font-size:14px;background:#fff;cursor:pointer}.form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#1976d2}.help-text[_ngcontent-%COMP%]{display:block;margin-top:6px;font-size:12px;color:#666;font-style:italic}.form-actions[_ngcontent-%COMP%]{margin-top:24px;padding-top:16px;border-top:1px solid #eee}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;font-size:14px;font-weight:500;transition:background .2s}.btn-primary[_ngcontent-%COMP%]{background:#1976d2;color:#fff;width:100%}.btn-primary[_ngcontent-%COMP%]:hover{background:#1565c0}.btn-secondary[_ngcontent-%COMP%]{background:#757575;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background:#616161}.context-panel[_ngcontent-%COMP%], .operation-panel[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 1px 3px #0000001a;padding:24px}.context-panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .operation-panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;color:#333;padding-bottom:12px;border-bottom:1px solid #eee}.context-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.context-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.context-label[_ngcontent-%COMP%]{font-size:12px;color:#666;text-transform:uppercase;letter-spacing:.5px}.context-value[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500}.line-items-summary[_ngcontent-%COMP%]{margin-top:20px;padding-top:16px;border-top:1px solid #eee}.line-items-summary[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:14px;color:#555}.summary-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:13px}.summary-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .summary-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 10px;text-align:left;border-bottom:1px solid #eee}.summary-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#fafafa;font-weight:600;color:#555}.operation-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.detail-label[_ngcontent-%COMP%]{font-size:13px;color:#666}.detail-value[_ngcontent-%COMP%]{font-size:14px;color:#333;font-weight:500}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;border-radius:4px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.status-ready[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.status-in_progress[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.status-completed[_ngcontent-%COMP%]{background:#f3e5f5;color:#7b1fa2}.status-created[_ngcontent-%COMP%]{background:#fff3e0;color:#ef6c00}.stats-panel[_ngcontent-%COMP%]{grid-column:2;background:#fff;border-radius:8px;box-shadow:0 1px 3px #0000001a;padding:24px}.stats-panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;color:#333}.stat-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.stat-card[_ngcontent-%COMP%]{background:#f5f5f5;border-radius:8px;padding:20px;text-align:center}.stat-value[_ngcontent-%COMP%]{display:block;font-size:32px;font-weight:700;color:#1976d2}.stat-label[_ngcontent-%COMP%]{display:block;font-size:13px;color:#666;margin-top:4px}@media (max-width: 768px){.content[_ngcontent-%COMP%], .context-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.stats-panel[_ngcontent-%COMP%]{grid-column:1}}"]})}}return i})();var mn=[{path:"",component:Se},{path:"confirm/:operationId",component:ye},{path:"history",component:Pe}],Oe=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=V({type:i})}static{this.\u0275inj=R({imports:[Y.forChild(mn),Y]})}}return i})();var Vn=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=V({type:i})}static{this.\u0275inj=R({imports:[ee,ue,ge,Oe,ve]})}}return i})();export{Vn as ProductionModule};

import{f as de,g as ce,h as T,i as me,k as pe,n as ge}from"./chunk-LMWWBC6Z.js";import{$ as N,$a as se,Aa as I,B as s,D as M,Da as Y,F as i,G as t,H as x,Ha as A,Ia as C,Ja as z,Ka as Q,L as y,La as X,M as f,Ma as ee,N as d,Na as te,Pa as ie,S as W,Sa as ne,T as n,Ta as U,U as _,Ua as R,V as h,Va as G,Wa as ae,Xa as re,Z as k,Za as oe,_ as L,_a as le,a as B,da as q,fa as $,ga as J,ia as D,ja as F,ka as P,m as w,o as E,oa as Z,p as O,qa as H,r as m,s as p,w as r,x as v,ya as V,z as u}from"./chunk-SXRLIX2W.js";function Me(a,c){if(a&1&&(i(0,"option",22),n(1),t()),a&2){let e=c.$implicit;s("value",e.value),r(),_(e.label)}}function ye(a,c){if(a&1){let e=y();i(0,"tr")(1,"td"),n(2),t(),i(3,"td"),n(4),t(),i(5,"td")(6,"span",28),n(7),t()(),i(8,"td"),n(9),t(),i(10,"td",29),n(11),t(),i(12,"td")(13,"span",30),n(14),t()(),i(15,"td",31)(16,"button",32),f("click",function(){let o=m(e).$implicit,g=d(3);return p(g.editMaterial(o))}),n(17," Edit "),t(),i(18,"button",33),f("click",function(){let o=m(e).$implicit,g=d(3);return p(g.openDeleteModal(o))}),n(19," Delete "),t()()()}if(a&2){let e=c.$implicit,l=d(3);r(2),_(e.materialCode),r(2),_(e.materialName),r(2),s("ngClass",e.materialType.toLowerCase()),r(),h(" ",l.getTypeLabel(e.materialType)," "),r(2),_(l.getUnitLabel(e.baseUnit)),r(2),_(e.description||"-"),r(2),s("ngClass",e.status.toLowerCase()),r(),h(" ",e.status," "),r(4),s("disabled",e.status==="INACTIVE")}}function Se(a,c){if(a&1&&(i(0,"table",26)(1,"thead")(2,"tr")(3,"th"),n(4,"Code"),t(),i(5,"th"),n(6,"Name"),t(),i(7,"th"),n(8,"Type"),t(),i(9,"th"),n(10,"Unit"),t(),i(11,"th"),n(12,"Description"),t(),i(13,"th"),n(14,"Status"),t(),i(15,"th"),n(16,"Actions"),t()()(),i(17,"tbody"),u(18,ye,20,9,"tr",27),t()()),a&2){let e=d(2);r(18),s("ngForOf",e.materials)}}function Ee(a,c){if(a&1){let e=y();i(0,"div",34)(1,"p"),n(2,"No materials found."),t(),i(3,"button",5),f("click",function(){m(e);let o=d(2);return p(o.createMaterial())}),n(4,"Create First Material"),t()()}}function Pe(a,c){if(a&1){let e=y();i(0,"app-pagination",35),f("pageChange",function(o){m(e);let g=d(2);return p(g.onPageChange(o))})("sizeChange",function(o){m(e);let g=d(2);return p(g.onSizeChange(o))}),t()}if(a&2){let e=d(2);s("page",e.page)("size",e.size)("totalElements",e.totalElements)("totalPages",e.totalPages)("hasNext",e.hasNext)("hasPrevious",e.hasPrevious)}}function Ie(a,c){if(a&1&&(i(0,"div",23),u(1,Se,19,1,"table",24)(2,Ee,5,0,"ng-template",null,1,J)(4,Pe,1,6,"app-pagination",25),t()),a&2){let e=W(3),l=d();r(),s("ngIf",l.materials.length>0)("ngIfElse",e),r(3),s("ngIf",l.materials.length>0)}}function Te(a,c){a&1&&(i(0,"div",36),n(1,"Loading materials..."),t())}function we(a,c){if(a&1&&(i(0,"div",48),n(1),t()),a&2){let e=d(2);r(),_(e.deleteError)}}function Oe(a,c){if(a&1){let e=y();i(0,"div",37),f("click",function(){m(e);let o=d();return p(o.closeDeleteModal())}),i(1,"div",38),f("click",function(o){return m(e),p(o.stopPropagation())}),i(2,"div",39)(3,"h2"),n(4,"Delete Material"),t(),i(5,"button",40),f("click",function(){m(e);let o=d();return p(o.closeDeleteModal())}),x(6,"i",41),t()(),i(7,"div",42)(8,"p"),n(9,"Are you sure you want to delete material "),i(10,"strong"),n(11),t(),n(12,"?"),t(),i(13,"p",43),n(14,"This will mark the material as inactive."),t(),u(15,we,2,1,"div",44),t(),i(16,"div",45)(17,"button",46),f("click",function(){m(e);let o=d();return p(o.closeDeleteModal())}),n(18," Cancel "),t(),i(19,"button",47),f("click",function(){m(e);let o=d();return p(o.confirmDelete())}),n(20),t()()()()}if(a&2){let e=d();r(11),_(e.materialToDelete==null?null:e.materialToDelete.materialName),r(4),s("ngIf",e.deleteError),r(2),s("disabled",e.deleteLoading),r(2),s("disabled",e.deleteLoading),r(),h(" ",e.deleteLoading?"Deleting...":"Delete"," ")}}var _e=(()=>{class a{constructor(e,l){this.apiService=e,this.router=l,this.materials=[],this.loading=!0,this.page=0,this.size=20,this.totalElements=0,this.totalPages=0,this.hasNext=!1,this.hasPrevious=!1,this.filterStatus="",this.filterType="",this.searchTerm="",this.showDeleteModal=!1,this.materialToDelete=null,this.deleteLoading=!1,this.deleteError="",this.materialTypes=[{value:"RM",label:"Raw Material"},{value:"IM",label:"Intermediate"},{value:"FG",label:"Finished Goods"},{value:"WIP",label:"Work In Progress"}]}ngOnInit(){this.loadMaterials()}loadMaterials(){this.loading=!0;let e={page:this.page,size:this.size,sortBy:"materialName",sortDirection:"ASC",status:this.filterStatus||void 0,type:this.filterType||void 0,search:this.searchTerm||void 0};this.apiService.getMaterialsPaged(e).subscribe({next:l=>{this.materials=l.content,this.page=l.page,this.size=l.size,this.totalElements=l.totalElements,this.totalPages=l.totalPages,this.hasNext=l.hasNext,this.hasPrevious=l.hasPrevious,this.loading=!1},error:l=>{console.error("Error loading materials:",l),this.loading=!1}})}onPageChange(e){this.page=e,this.loadMaterials()}onSizeChange(e){this.size=e,this.page=0,this.loadMaterials()}onFilterStatusChange(e){this.filterStatus=e==="all"?"":e,this.page=0,this.loadMaterials()}onFilterTypeChange(e){this.filterType=e==="all"?"":e,this.page=0,this.loadMaterials()}onSearchChange(e){this.searchTerm=e,this.page=0,this.loadMaterials()}createMaterial(){this.router.navigate(["/manage/materials/new"])}editMaterial(e){this.router.navigate(["/manage/materials",e.materialId,"edit"])}openDeleteModal(e){this.materialToDelete=e,this.deleteError="",this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1,this.materialToDelete=null,this.deleteError=""}confirmDelete(){this.materialToDelete&&(this.deleteLoading=!0,this.deleteError="",this.apiService.deleteMaterial(this.materialToDelete.materialId).subscribe({next:()=>{this.deleteLoading=!1,this.closeDeleteModal(),this.loadMaterials()},error:e=>{this.deleteLoading=!1,this.deleteError=e.error?.message||"Failed to delete material."}}))}getTypeLabel(e){let l=this.materialTypes.find(o=>o.value===e);return l?l.label:e}getUnitLabel(e){return ce(e)}static{this.\u0275fac=function(l){return new(l||a)(v(T),v(I))}}static{this.\u0275cmp=E({type:a,selectors:[["app-material-list"]],decls:33,vars:15,consts:[["loadingTpl",""],["emptyTpl",""],[1,"material-list-page"],[1,"page-header"],[1,"page-title"],[1,"btn","btn-primary",3,"click"],[1,"card"],[1,"filters"],[1,"filter-group"],["for","status-filter"],["id","status-filter",3,"ngModelChange","change","ngModel"],["value","all"],["value","ACTIVE"],["value","INACTIVE"],["for","type-filter"],["id","type-filter",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"filter-group","search-group"],["for","search"],["type","text","id","search","placeholder","Search by code or name...",3,"ngModelChange","input","ngModel"],["class","table-container",4,"ngIf","ngIfElse"],["class","modal-overlay",3,"click",4,"ngIf"],[3,"value"],[1,"table-container"],["class","data-table",4,"ngIf","ngIfElse"],[3,"page","size","totalElements","totalPages","hasNext","hasPrevious","pageChange","sizeChange",4,"ngIf"],[1,"data-table"],[4,"ngFor","ngForOf"],[1,"type-badge",3,"ngClass"],[1,"description-cell"],[1,"status-badge",3,"ngClass"],[1,"actions"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"btn","btn-sm","btn-danger",3,"click","disabled"],[1,"empty-state"],[3,"pageChange","sizeChange","page","size","totalElements","totalPages","hasNext","hasPrevious"],[1,"loading"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],[1,"fas","fa-xmark"],[1,"modal-body"],[1,"warning"],["class","error",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click","disabled"],[1,"btn","btn-danger",3,"click","disabled"],[1,"error"]],template:function(l,o){if(l&1){let g=y();i(0,"div",2)(1,"div",3)(2,"h1",4),n(3,"Materials"),t(),i(4,"button",5),f("click",function(){return m(g),p(o.createMaterial())}),n(5," + New Material "),t()(),i(6,"div",6)(7,"div",7)(8,"div",8)(9,"label",9),n(10,"Status:"),t(),i(11,"select",10),N("ngModelChange",function(b){return m(g),L(o.filterStatus,b)||(o.filterStatus=b),p(b)}),f("change",function(){return m(g),p(o.onFilterStatusChange(o.filterStatus))}),i(12,"option",11),n(13,"All Statuses"),t(),i(14,"option",12),n(15,"Active"),t(),i(16,"option",13),n(17,"Inactive"),t()()(),i(18,"div",8)(19,"label",14),n(20,"Type:"),t(),i(21,"select",15),N("ngModelChange",function(b){return m(g),L(o.filterType,b)||(o.filterType=b),p(b)}),f("change",function(){return m(g),p(o.onFilterTypeChange(o.filterType))}),i(22,"option",11),n(23,"All Types"),t(),u(24,Me,2,2,"option",16),t()(),i(25,"div",17)(26,"label",18),n(27,"Search:"),t(),i(28,"input",19),N("ngModelChange",function(b){return m(g),L(o.searchTerm,b)||(o.searchTerm=b),p(b)}),f("input",function(){return m(g),p(o.onSearchChange(o.searchTerm))}),t()()()(),u(29,Ie,5,3,"div",20)(30,Te,2,0,"ng-template",null,0,J)(32,Oe,21,5,"div",21),t()}if(l&2){let g=W(31);r(8),M("filter-active",o.filterStatus&&o.filterStatus!=="all"),r(3),M("filter-active",o.filterStatus&&o.filterStatus!=="all"),k("ngModel",o.filterStatus),r(7),M("filter-active",o.filterType&&o.filterType!=="all"),r(3),M("filter-active",o.filterType&&o.filterType!=="all"),k("ngModel",o.filterType),r(3),s("ngForOf",o.materialTypes),r(4),k("ngModel",o.searchTerm),r(),s("ngIf",!o.loading)("ngIfElse",g),r(3),s("ngIf",o.showDeleteModal)}},dependencies:[D,F,P,R,G,A,U,z,X,pe],styles:[".material-list-page[_ngcontent-%COMP%]{padding:20px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;color:#333}.table-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 1px 3px #0000001a;overflow:hidden}.description-cell[_ngcontent-%COMP%]{max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500;text-transform:uppercase}.status-badge.active[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status-badge.inactive[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24}.type-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:4px;font-size:11px;font-weight:600;text-transform:uppercase}.type-badge.rm[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.type-badge.im[_ngcontent-%COMP%]{background:#fff3e0;color:#e65100}.type-badge.fg[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.type-badge.wip[_ngcontent-%COMP%]{background:#fce4ec;color:#c2185b}.actions[_ngcontent-%COMP%]{display:flex;gap:8px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.loading[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}"]})}}return a})();function ke(a,c){a&1&&(i(0,"div",5),n(1,"Loading material..."),t())}function Le(a,c){if(a&1&&(i(0,"div",35),n(1),t()),a&2){let e=d(2);r(),_(e.error)}}function Ne(a,c){if(a&1&&(i(0,"span",36),n(1),t()),a&2){let e=d(2);r(),h(" ",e.getError("materialCode")," ")}}function De(a,c){if(a&1&&(i(0,"span",36),n(1),t()),a&2){let e=d(2);r(),h(" ",e.getError("materialName")," ")}}function Fe(a,c){if(a&1&&(i(0,"option",37),n(1),t()),a&2){let e=c.$implicit;s("value",e.value),r(),h(" ",e.label," ")}}function Ve(a,c){if(a&1&&(i(0,"span",36),n(1),t()),a&2){let e=d(2);r(),h(" ",e.getError("materialType")," ")}}function Ae(a,c){if(a&1&&(i(0,"option",37),n(1),t()),a&2){let e=c.$implicit;s("value",e.value),r(),h(" ",e.label," ")}}function ze(a,c){if(a&1&&(i(0,"span",36),n(1),t()),a&2){let e=d(2);r(),h(" ",e.getError("baseUnit")," ")}}function Ue(a,c){if(a&1&&(i(0,"option",37),n(1),t()),a&2){let e=c.$implicit;s("value",e.value),r(),h(" ",e.label," ")}}function Re(a,c){if(a&1&&(i(0,"div",38)(1,"h3",39),n(2,"Classification"),t(),i(3,"div",10)(4,"div",11)(5,"label",40),n(6,"Material Group"),t(),x(7,"input",41),t(),i(8,"div",11)(9,"label",42),n(10,"SKU"),t(),x(11,"input",43),t()(),i(12,"h3",39),n(13,"Cost Information"),t(),i(14,"div",10)(15,"div",11)(16,"label",44),n(17,"Standard Cost"),t(),x(18,"input",45),t(),i(19,"div",11)(20,"label",46),n(21,"Currency"),t(),i(22,"select",47),u(23,Ue,2,2,"option",19),t()()(),i(24,"h3",39),n(25,"Inventory Management"),t(),i(26,"div",48)(27,"div",11)(28,"label",49),n(29,"Min Stock Level"),t(),x(30,"input",50),t(),i(31,"div",11)(32,"label",51),n(33,"Max Stock Level"),t(),x(34,"input",52),t(),i(35,"div",11)(36,"label",53),n(37,"Reorder Point"),t(),x(38,"input",54),t()(),i(39,"h3",39),n(40,"Logistics & Storage"),t(),i(41,"div",10)(42,"div",11)(43,"label",55),n(44,"Lead Time (days)"),t(),x(45,"input",56),t(),i(46,"div",11)(47,"label",57),n(48,"Shelf Life (days)"),t(),x(49,"input",58),t()(),i(50,"div",23)(51,"label",59),n(52,"Storage Conditions"),t(),x(53,"input",60),t()()),a&2){let e=d(2);r(23),s("ngForOf",e.currencies)}}function Ge(a,c){a&1&&(i(0,"div",9)(1,"h2"),n(2,"Status"),t(),i(3,"div",11)(4,"label",61),n(5,"Status"),t(),i(6,"select",62)(7,"option",63),n(8,"Active"),t(),i(9,"option",64),n(10,"Inactive"),t()()()())}function je(a,c){if(a&1){let e=y();i(0,"div",6)(1,"form",7),f("ngSubmit",function(){m(e);let o=d();return p(o.onSubmit())}),u(2,Le,2,1,"div",8),i(3,"div",9)(4,"h2"),n(5,"Material Information"),t(),i(6,"div",10)(7,"div",11)(8,"label",12),n(9,"Material Code *"),t(),x(10,"input",13),u(11,Ne,2,1,"span",14),t(),i(12,"div",11)(13,"label",15),n(14,"Material Name *"),t(),x(15,"input",16),u(16,De,2,1,"span",14),t()(),i(17,"div",10)(18,"div",11)(19,"label",17),n(20,"Material Type *"),t(),i(21,"select",18),u(22,Fe,2,2,"option",19),t(),u(23,Ve,2,1,"span",14),t(),i(24,"div",11)(25,"label",20),n(26,"Unit of Measure *"),t(),i(27,"select",21)(28,"option",22),n(29,"Select a unit..."),t(),u(30,Ae,2,2,"option",19),t(),u(31,ze,2,1,"span",14),t()(),i(32,"div",23)(33,"label",24),n(34,"Description"),t(),x(35,"textarea",25),t()(),i(36,"div",26)(37,"h2",27),f("click",function(){m(e);let o=d();return p(o.toggleExtendedFields())}),i(38,"span",28),n(39),t(),n(40," Extended Properties "),i(41,"span",29),n(42,"Optional"),t()(),u(43,Re,54,1,"div",30),t(),u(44,Ge,11,0,"div",31),i(45,"div",32)(46,"button",33),f("click",function(){m(e);let o=d();return p(o.cancel())}),n(47," Cancel "),t(),i(48,"button",34),n(49),t()()()()}if(a&2){let e=d();r(),s("formGroup",e.form),r(),s("ngIf",e.error),r(8),M("error",e.hasError("materialCode")),r(),s("ngIf",e.hasError("materialCode")),r(4),M("error",e.hasError("materialName")),r(),s("ngIf",e.hasError("materialName")),r(5),M("error",e.hasError("materialType")),r(),s("ngForOf",e.materialTypes),r(),s("ngIf",e.hasError("materialType")),r(4),M("error",e.hasError("baseUnit")),r(3),s("ngForOf",e.units),r(),s("ngIf",e.hasError("baseUnit")),r(8),_(e.showExtendedFields?"\u2212":"+"),r(4),s("ngIf",e.showExtendedFields),r(),s("ngIf",e.isEditMode),r(2),s("disabled",e.saving),r(2),s("disabled",e.saving||e.form.invalid),r(),h(" ",e.saving?"Saving...":e.isEditMode?"Update Material":"Create Material"," ")}}var K=(()=>{class a{constructor(e,l,o,g){this.fb=e,this.apiService=l,this.route=o,this.router=g,this.isEditMode=!1,this.materialId=null,this.loading=!1,this.saving=!1,this.error="",this.showExtendedFields=!1,this.materialTypes=[{value:"RM",label:"Raw Material"},{value:"IM",label:"Intermediate"},{value:"FG",label:"Finished Goods"},{value:"WIP",label:"Work In Progress"}],this.currencies=[{value:"USD",label:"USD - US Dollar"},{value:"EUR",label:"EUR - Euro"},{value:"INR",label:"INR - Indian Rupee"},{value:"GBP",label:"GBP - British Pound"},{value:"JPY",label:"JPY - Japanese Yen"}],this.units=de}ngOnInit(){this.initForm();let e=this.route.snapshot.paramMap.get("id");e&&(this.isEditMode=!0,this.materialId=+e,this.form.get("materialCode")?.disable(),this.loadMaterial())}initForm(){this.form=this.fb.group({materialCode:["",[C.required,C.maxLength(50)]],materialName:["",[C.required,C.maxLength(200)]],materialType:["RM",C.required],description:["",C.maxLength(500)],baseUnit:["",[C.required,C.maxLength(20)]],status:["ACTIVE"],materialGroup:["",C.maxLength(100)],sku:["",C.maxLength(50)],standardCost:[null,[C.min(0)]],costCurrency:["USD"],minStockLevel:[null,[C.min(0)]],maxStockLevel:[null,[C.min(0)]],reorderPoint:[null,[C.min(0)]],leadTimeDays:[null,[C.min(0),C.max(365)]],shelfLifeDays:[null,[C.min(0)]],storageConditions:["",C.maxLength(200)]})}toggleExtendedFields(){this.showExtendedFields=!this.showExtendedFields}loadMaterial(){this.materialId&&(this.loading=!0,this.apiService.getMaterialById(this.materialId).subscribe({next:e=>{this.form.patchValue({materialCode:e.materialCode,materialName:e.materialName,materialType:e.materialType,description:e.description||"",baseUnit:e.baseUnit,status:e.status,materialGroup:e.materialGroup||"",sku:e.sku||"",standardCost:e.standardCost,costCurrency:e.costCurrency||"USD",minStockLevel:e.minStockLevel,maxStockLevel:e.maxStockLevel,reorderPoint:e.reorderPoint,leadTimeDays:e.leadTimeDays,shelfLifeDays:e.shelfLifeDays,storageConditions:e.storageConditions||""}),(e.materialGroup||e.sku||e.standardCost||e.minStockLevel||e.maxStockLevel||e.reorderPoint||e.leadTimeDays||e.shelfLifeDays||e.storageConditions)&&(this.showExtendedFields=!0),this.loading=!1},error:e=>{this.error=e.error?.message||"Failed to load material.",this.loading=!1}}))}onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.saving=!0,this.error="";let e=this.form.getRawValue(),l={materialGroup:e.materialGroup||void 0,sku:e.sku||void 0,standardCost:e.standardCost??void 0,costCurrency:e.standardCost?e.costCurrency:void 0,minStockLevel:e.minStockLevel??void 0,maxStockLevel:e.maxStockLevel??void 0,reorderPoint:e.reorderPoint??void 0,leadTimeDays:e.leadTimeDays??void 0,shelfLifeDays:e.shelfLifeDays??void 0,storageConditions:e.storageConditions||void 0};if(this.isEditMode&&this.materialId){let o=B({materialCode:e.materialCode,materialName:e.materialName,materialType:e.materialType,description:e.description||void 0,baseUnit:e.baseUnit,status:e.status},l);this.apiService.updateMaterial(this.materialId,o).subscribe({next:()=>{this.saving=!1,this.router.navigate(["/manage/materials"])},error:g=>{this.saving=!1,this.error=g.error?.message||"Failed to update material."}})}else{let o=B({materialCode:e.materialCode,materialName:e.materialName,materialType:e.materialType,description:e.description||void 0,baseUnit:e.baseUnit},l);this.apiService.createMaterial(o).subscribe({next:()=>{this.saving=!1,this.router.navigate(["/manage/materials"])},error:g=>{this.saving=!1,this.error=g.error?.message||"Failed to create material."}})}}cancel(){this.router.navigate(["/manage/materials"])}hasError(e){let l=this.form.get(e);return!!(l&&l.invalid&&l.touched)}getError(e){let l=this.form.get(e);return!l||!l.errors?"":l.errors.required?`${e} is required`:l.errors.maxlength?`${e} is too long`:"Invalid value"}static{this.\u0275fac=function(l){return new(l||a)(v(oe),v(T),v(V),v(I))}}static{this.\u0275cmp=E({type:a,selectors:[["app-material-form"]],decls:6,vars:3,consts:[[1,"material-form-page"],[1,"page-header"],[1,"page-title"],["class","loading",4,"ngIf"],["class","form-container",4,"ngIf"],[1,"loading"],[1,"form-container"],[3,"ngSubmit","formGroup"],["class","error-banner",4,"ngIf"],[1,"form-section"],[1,"form-row"],[1,"form-group"],["for","materialCode"],["type","text","id","materialCode","formControlName","materialCode","placeholder","e.g., MAT-001"],["class","error-text",4,"ngIf"],["for","materialName"],["type","text","id","materialName","formControlName","materialName","placeholder","Enter material name"],["for","materialType"],["id","materialType","formControlName","materialType"],[3,"value",4,"ngFor","ngForOf"],["for","baseUnit"],["id","baseUnit","formControlName","baseUnit"],["value",""],[1,"form-group","full-width"],["for","description"],["id","description","formControlName","description","rows","3","placeholder","Optional description of the material"],[1,"form-section","collapsible"],[1,"section-header",3,"click"],[1,"toggle-icon"],[1,"optional-badge"],["class","collapsible-content",4,"ngIf"],["class","form-section",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"error-banner"],[1,"error-text"],[3,"value"],[1,"collapsible-content"],[1,"subsection-header"],["for","materialGroup"],["type","text","id","materialGroup","formControlName","materialGroup","placeholder","e.g., Ferrous Metals"],["for","sku"],["type","text","id","sku","formControlName","sku","placeholder","e.g., SKU-12345"],["for","standardCost"],["type","number","id","standardCost","formControlName","standardCost","step","0.01","min","0","placeholder","e.g., 100.00"],["for","costCurrency"],["id","costCurrency","formControlName","costCurrency"],[1,"form-row","three-cols"],["for","minStockLevel"],["type","number","id","minStockLevel","formControlName","minStockLevel","step","0.01","min","0","placeholder","e.g., 100"],["for","maxStockLevel"],["type","number","id","maxStockLevel","formControlName","maxStockLevel","step","0.01","min","0","placeholder","e.g., 1000"],["for","reorderPoint"],["type","number","id","reorderPoint","formControlName","reorderPoint","step","0.01","min","0","placeholder","e.g., 200"],["for","leadTimeDays"],["type","number","id","leadTimeDays","formControlName","leadTimeDays","min","0","max","365","placeholder","e.g., 14"],["for","shelfLifeDays"],["type","number","id","shelfLifeDays","formControlName","shelfLifeDays","min","0","placeholder","e.g., 365"],["for","storageConditions"],["type","text","id","storageConditions","formControlName","storageConditions","placeholder","e.g., Store in cool, dry place"],["for","status"],["id","status","formControlName","status"],["value","ACTIVE"],["value","INACTIVE"]],template:function(l,o){l&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),n(3),t()(),u(4,ke,2,0,"div",3)(5,je,50,22,"div",4),t()),l&2&&(r(3),_(o.isEditMode?"Edit Material":"New Material"),r(),s("ngIf",o.loading),r(),s("ngIf",!o.loading))},dependencies:[F,P,ee,R,G,A,te,U,z,Q,re,ae,ie,ne],styles:[".material-form-page[_ngcontent-%COMP%]{padding:20px;max-width:800px;margin:0 auto}.page-header[_ngcontent-%COMP%]{margin-bottom:24px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;color:#333}.loading[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#666}.form-container[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 1px 3px #0000001a;padding:24px}.error-banner[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;padding:12px 16px;border-radius:4px;margin-bottom:20px}.form-section[_ngcontent-%COMP%]{margin-bottom:32px}.form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#333;margin:0 0 16px;padding-bottom:8px;border-bottom:1px solid #eee}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:16px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1 / -1}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#555;font-size:14px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #ddd;border-radius:4px;font-size:14px;transition:border-color .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#1976d2}.form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select.error[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea.error[_ngcontent-%COMP%]{border-color:#d32f2f}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled{background:#f5f5f5;cursor:not-allowed}.error-text[_ngcontent-%COMP%]{font-size:12px;color:#d32f2f}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding-top:20px;border-top:1px solid #eee}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:4px;cursor:pointer;font-size:14px;font-weight:500;transition:background .2s}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background:#1976d2;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#1565c0}.btn-secondary[_ngcontent-%COMP%]{background:#757575;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#616161}.form-section.collapsible[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:8px;padding:0;overflow:hidden}.section-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;padding:16px 20px;margin:0;background:#fafafa;border-bottom:none;-webkit-user-select:none;user-select:none;transition:background .2s}.section-header[_ngcontent-%COMP%]:hover{background:#f0f0f0}.toggle-icon[_ngcontent-%COMP%]{width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-weight:700;color:#666}.optional-badge[_ngcontent-%COMP%]{margin-left:auto;font-size:11px;font-weight:500;color:#888;background:#e8e8e8;padding:2px 8px;border-radius:10px}.collapsible-content[_ngcontent-%COMP%]{padding:20px;border-top:1px solid #e0e0e0}.subsection-header[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#666;margin:0 0 12px;text-transform:uppercase;letter-spacing:.5px}.subsection-header[_ngcontent-%COMP%]:not(:first-child){margin-top:24px}.form-row.three-cols[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr 1fr}@media (max-width: 800px){.form-row.three-cols[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}}@media (max-width: 600px){.form-row[_ngcontent-%COMP%], .form-row.three-cols[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return a})();function Be(a,c){if(a&1){let e=y();i(0,"div",10)(1,"button",11),f("click",function(){m(e);let o=d();return p(o.editMaterial())}),x(2,"i",12),n(3," Edit "),t(),i(4,"button",13),f("click",function(){m(e);let o=d();return p(o.toggleStatus())}),x(5,"i",14),n(6),t()()}if(a&2){let e=d();r(4),s("ngClass",e.material.status==="ACTIVE"?"btn-danger":"btn-success"),r(),s("ngClass",e.material.status==="ACTIVE"?"fa-ban":"fa-check"),r(),h(" ",e.material.status==="ACTIVE"?"Deactivate":"Activate"," ")}}function We(a,c){a&1&&(i(0,"div",15),x(1,"app-loading-spinner",16),t())}function qe(a,c){if(a&1&&(i(0,"div",17),n(1),t()),a&2){let e=d();r(),h(" ",e.error," ")}}function $e(a,c){if(a&1&&(i(0,"div",18)(1,"div",19)(2,"div",20)(3,"div",21)(4,"h2"),n(5),t(),i(6,"span",22),n(7),t()(),i(8,"span",23),n(9),t()(),i(10,"div",24)(11,"div",25)(12,"h3"),n(13,"Basic Information"),t(),i(14,"div",26)(15,"span",27),n(16,"Material ID"),t(),i(17,"span",28),n(18),t()(),i(19,"div",26)(20,"span",27),n(21,"Material Code"),t(),i(22,"span",28),n(23),t()(),i(24,"div",26)(25,"span",27),n(26,"Material Type"),t(),i(27,"span",28),n(28),t()(),i(29,"div",26)(30,"span",27),n(31,"Base Unit"),t(),i(32,"span",28),n(33),t()()(),i(34,"div",25)(35,"h3"),n(36,"Description"),t(),i(37,"div",29),n(38),t()(),i(39,"div",25)(40,"h3"),n(41,"Timestamps"),t(),i(42,"div",26)(43,"span",27),n(44,"Created On"),t(),i(45,"span",28),n(46),q(47,"date"),t()(),i(48,"div",26)(49,"span",27),n(50,"Updated On"),t(),i(51,"span",28),n(52),q(53,"date"),t()()()()()()),a&2){let e=d();r(5),_(e.material.materialName),r(),s("ngClass",e.getMaterialTypeClass(e.material.materialType)),r(),h(" ",e.getMaterialTypeLabel(e.material.materialType)," "),r(),s("ngClass",e.getStatusClass(e.material.status)),r(),h(" ",e.material.status," "),r(9),_(e.material.materialId),r(5),_(e.material.materialCode),r(5),_(e.getMaterialTypeLabel(e.material.materialType)),r(5),_(e.material.baseUnit),r(5),h(" ",e.material.description||"No description provided"," "),r(8),_($(47,12,e.material.createdOn,"medium")),r(6),_($(53,15,e.material.updatedOn,"medium"))}}var he=(()=>{class a{constructor(e,l,o){this.route=e,this.router=l,this.apiService=o,this.material=null,this.loading=!0,this.error=null,this.materialTypeLabels={RM:"Raw Material",IM:"Intermediate",FG:"Finished Goods",WIP:"Work In Progress"}}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e?this.loadMaterial(+e):(this.error="No material ID provided",this.loading=!1)}loadMaterial(e){this.loading=!0,this.error=null,this.apiService.getMaterialById(e).subscribe({next:l=>{this.material=l,this.loading=!1},error:l=>{console.error("Error loading material:",l),this.error="Failed to load material",this.loading=!1}})}editMaterial(){this.material&&this.router.navigate(["/manage/materials",this.material.materialId,"edit"])}goBack(){this.router.navigate(["/manage/materials"])}getStatusClass(e){switch(e?.toUpperCase()){case"ACTIVE":return"status-active";case"INACTIVE":return"status-inactive";default:return""}}getMaterialTypeLabel(e){return this.materialTypeLabels[e]||e}getMaterialTypeClass(e){switch(e){case"RM":return"type-rm";case"IM":return"type-im";case"FG":return"type-fg";case"WIP":return"type-wip";default:return""}}toggleStatus(){this.material&&(this.material.status==="ACTIVE"?confirm(`Are you sure you want to deactivate material "${this.material.materialName}"?`)&&this.apiService.deleteMaterial(this.material.materialId).subscribe({next:()=>{this.loadMaterial(this.material.materialId)},error:e=>{console.error("Error deactivating material:",e),this.error="Failed to deactivate material"}}):this.apiService.activateMaterial(this.material.materialId).subscribe({next:()=>{this.loadMaterial(this.material.materialId)},error:e=>{console.error("Error activating material:",e),this.error="Failed to activate material"}}))}static{this.\u0275fac=function(l){return new(l||a)(v(V),v(I),v(T))}}static{this.\u0275cmp=E({type:a,selectors:[["app-material-detail"]],decls:12,vars:4,consts:[[1,"detail-container"],[1,"page-header"],[1,"header-left"],[1,"btn","btn-back",3,"click"],[1,"fas","fa-arrow-left"],[1,"page-title"],["class","header-actions",4,"ngIf"],["class","loading",4,"ngIf"],["class","error-message",4,"ngIf"],["class","detail-content",4,"ngIf"],[1,"header-actions"],[1,"btn","btn-secondary",3,"click"],[1,"fas","fa-edit"],[1,"btn",3,"click","ngClass"],[1,"fas",3,"ngClass"],[1,"loading"],["message","Loading material..."],[1,"error-message"],[1,"detail-content"],[1,"detail-card"],[1,"card-header"],[1,"header-title"],[1,"type-badge",3,"ngClass"],[1,"status-badge",3,"ngClass"],[1,"detail-grid"],[1,"detail-section"],[1,"detail-row"],[1,"label"],[1,"value"],[1,"description-text"]],template:function(l,o){l&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),f("click",function(){return o.goBack()}),x(4,"i",4),n(5," Back "),t(),i(6,"h1",5),n(7,"Material Details"),t()(),u(8,Be,7,3,"div",6),t(),u(9,We,2,0,"div",7)(10,qe,2,1,"div",8)(11,$e,54,18,"div",9),t()),l&2&&(r(8),s("ngIf",o.material),r(),s("ngIf",o.loading),r(),s("ngIf",o.error),r(),s("ngIf",!o.loading&&o.material))},dependencies:[D,P,me,Z],styles:[".detail-container[_ngcontent-%COMP%]{padding:24px}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;color:#1e293b}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:48px}.error-message[_ngcontent-%COMP%]{background:#fef2f2;border:1px solid #fecaca;color:#dc2626;padding:12px 16px;border-radius:8px;margin-bottom:16px}.detail-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.detail-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e2e8f0;border-radius:8px;overflow:hidden}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;background:#f8fafc;border-bottom:1px solid #e2e8f0}.header-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600;color:#1e293b}.detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:24px;padding:24px}.detail-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.detail-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;font-weight:600;color:#64748b;text-transform:uppercase;letter-spacing:.05em}.detail-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid #f1f5f9}.detail-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.label[_ngcontent-%COMP%]{color:#64748b;font-size:14px}.value[_ngcontent-%COMP%]{color:#1e293b;font-weight:500;font-size:14px}.description-text[_ngcontent-%COMP%]{color:#475569;font-size:14px;line-height:1.6;padding:12px;background:#f8fafc;border-radius:6px}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:500;text-transform:uppercase}.status-active[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.status-inactive[_ngcontent-%COMP%]{background:#f1f5f9;color:#64748b}.type-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:6px;font-size:12px;font-weight:500}.type-rm[_ngcontent-%COMP%]{background:#dbeafe;color:#1d4ed8}.type-im[_ngcontent-%COMP%]{background:#fef3c7;color:#b45309}.type-fg[_ngcontent-%COMP%]{background:#dcfce7;color:#166534}.type-wip[_ngcontent-%COMP%]{background:#f3e8ff;color:#7c3aed}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .2s}.btn-back[_ngcontent-%COMP%]{background:transparent;color:#64748b;padding:8px 12px}.btn-back[_ngcontent-%COMP%]:hover{background:#f1f5f9;color:#1e293b}.btn-secondary[_ngcontent-%COMP%]{background:#f1f5f9;color:#475569}.btn-secondary[_ngcontent-%COMP%]:hover{background:#e2e8f0}.btn-danger[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626;border:1px solid #fecaca}.btn-danger[_ngcontent-%COMP%]:hover{background:#fee2e2}.btn-success[_ngcontent-%COMP%]{background:#dcfce7;color:#166534;border:1px solid #bbf7d0}.btn-success[_ngcontent-%COMP%]:hover{background:#bbf7d0}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}.detail-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return a})();var Je=[{path:"",component:_e},{path:"new",component:K},{path:":id",component:he},{path:":id/edit",component:K}],Ce=(()=>{class a{static{this.\u0275fac=function(l){return new(l||a)}}static{this.\u0275mod=O({type:a})}static{this.\u0275inj=w({imports:[Y.forChild(Je),Y]})}}return a})();var Ct=(()=>{class a{static{this.\u0275fac=function(l){return new(l||a)}}static{this.\u0275mod=O({type:a})}static{this.\u0275inj=w({imports:[H,le,se,Ce,ge]})}}return a})();export{Ct as MaterialsModule};

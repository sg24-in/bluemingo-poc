<div class="hold-form-page">
  <div class="page-header">
    <h1 class="page-title">Apply Hold</h1>
  </div>

  <div *ngIf="error" class="error-message">{{ error }}</div>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="form-card">
    <div class="form-group">
      <label for="entityType">Entity Type <span class="required">*</span></label>
      <select id="entityType" formControlName="entityType" [class.invalid]="hasError('entityType')">
        <option value="">-- Select Entity Type --</option>
        <option *ngFor="let type of entityTypes" [value]="type">{{ getEntityTypeLabel(type) }}</option>
      </select>
      <span *ngIf="hasError('entityType')" class="field-error">Entity type is required</span>
    </div>

    <div class="form-group">
      <label for="entityId">Entity ID <span class="required">*</span></label>
      <input type="number" id="entityId" formControlName="entityId" placeholder="Enter entity ID" min="1"
             [class.invalid]="hasError('entityId')">
      <span *ngIf="hasError('entityId')" class="field-error">Valid entity ID is required</span>
    </div>

    <div class="form-group">
      <label for="reason">Hold Reason <span class="required">*</span></label>
      <select id="reason" formControlName="reason" [class.invalid]="hasError('reason')">
        <option value="">-- Select Reason --</option>
        <option *ngFor="let r of holdReasons" [value]="r.reasonCode">{{ r.description }} ({{ r.reasonCode }})</option>
      </select>
      <span *ngIf="loadingReasons" class="loading-hint">Loading reasons...</span>
      <span *ngIf="hasError('reason')" class="field-error">Hold reason is required</span>
    </div>

    <div class="form-group">
      <label for="comments">Comments</label>
      <textarea id="comments" formControlName="comments" placeholder="Optional comments..." rows="3"></textarea>
    </div>

    <div class="hold-warning">
      <i class="fa fa-exclamation-triangle"></i>
      Applying a hold will block the selected entity from being used in production operations until released.
    </div>

    <div class="form-actions">
      <button type="button" class="btn btn-secondary" (click)="cancel()">Cancel</button>
      <button type="submit" class="btn btn-danger" [disabled]="saving || form.invalid">
        <span *ngIf="saving">Applying...</span>
        <span *ngIf="!saving"><i class="fa fa-ban"></i> Apply Hold</span>
      </button>
    </div>
  </form>
</div>

<div class="config-form-page">
  <div class="page-header"><h1 class="page-title">{{ isEditMode ? 'Edit Hold Reason' : 'New Hold Reason' }}</h1></div>
  <div class="loading" *ngIf="loading">Loading...</div>
  <div class="form-container" *ngIf="!loading">
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="error-banner" *ngIf="error">{{ error }}</div>
      <div class="form-section">
        <div class="form-row">
          <div class="form-group">
            <label for="reasonCode">Reason Code *</label>
            <input type="text" id="reasonCode" formControlName="reasonCode" [class.error]="hasError('reasonCode')" placeholder="e.g., QUALITY_HOLD" />
          </div>
          <div class="form-group">
            <label for="reasonDescription">Description *</label>
            <input type="text" id="reasonDescription" formControlName="reasonDescription" [class.error]="hasError('reasonDescription')" placeholder="Description of hold reason" />
          </div>
        </div>
        <div class="form-group applicable-to-group">
          <label>Applicable To</label>
          <div class="entity-type-actions">
            <button type="button" class="btn-link" (click)="selectAllEntityTypes()">Select All</button>
            <button type="button" class="btn-link" (click)="clearAllEntityTypes()">Clear</button>
          </div>
          <div class="entity-type-chips">
            <button
              *ngFor="let type of entityTypes"
              type="button"
              class="entity-chip"
              [class.selected]="isEntityTypeSelected(type)"
              (click)="toggleEntityType(type)"
            >
              <i [ngClass]="isEntityTypeSelected(type) ? 'fas fa-circle-check' : 'far fa-circle'"></i>
              {{ type }}
            </button>
          </div>
          <div class="selected-summary" *ngIf="selectedEntityTypes.size > 0">
            {{ selectedEntityTypes.size }} of {{ entityTypes.length }} selected
          </div>
        </div>
        <div class="form-row" *ngIf="isEditMode">
          <div class="form-group">
            <label for="status">Status</label>
            <select id="status" formControlName="status"><option value="ACTIVE">Active</option><option value="INACTIVE">Inactive</option></select>
          </div>
        </div>
      </div>
      <div class="form-actions">
        <button type="button" class="btn btn-secondary" (click)="cancel()" [disabled]="saving">Cancel</button>
        <button type="submit" class="btn btn-primary" [disabled]="saving || form.invalid">{{ saving ? 'Saving...' : (isEditMode ? 'Update' : 'Create') }}</button>
      </div>
    </form>
  </div>
</div>

<div class="config-form-page">
  <div class="page-header"><h1 class="page-title">{{ isEditMode ? 'Edit Process Parameter' : 'New Process Parameter' }}</h1></div>
  <div class="loading" *ngIf="loading">Loading...</div>
  <div class="form-container" *ngIf="!loading">
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="error-banner" *ngIf="error">{{ error }}</div>

      <div class="form-section">
        <h3>Operation & Product</h3>
        <div class="form-row">
          <div class="form-group">
            <label for="operationType">Operation Type *</label>
            <input type="text" id="operationType" formControlName="operationType" [class.error]="hasError('operationType')" placeholder="e.g., FURNACE" />
          </div>
          <div class="form-group">
            <label for="productSku">Product SKU</label>
            <input type="text" id="productSku" formControlName="productSku" placeholder="e.g., ALU-SHEET-001" />
          </div>
        </div>
      </div>

      <div class="form-section">
        <h3>Parameter Details</h3>
        <div class="form-row">
          <div class="form-group">
            <label for="parameterName">Parameter Name *</label>
            <input type="text" id="parameterName" formControlName="parameterName" [class.error]="hasError('parameterName')" placeholder="e.g., Temperature" />
          </div>
          <div class="form-group">
            <label for="parameterType">Parameter Type</label>
            <select id="parameterType" formControlName="parameterType">
              <option value="DECIMAL">Decimal</option>
              <option value="INTEGER">Integer</option>
              <option value="TEXT">Text</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="unit">Unit</label>
            <input type="text" id="unit" formControlName="unit" placeholder="e.g., Celsius, mm, kg" />
          </div>
        </div>
      </div>

      <div class="form-section">
        <h3>Value Ranges</h3>
        <div class="form-row">
          <div class="form-group">
            <label for="minValue">Min Value</label>
            <input type="number" id="minValue" formControlName="minValue" placeholder="Minimum allowed value" />
          </div>
          <div class="form-group">
            <label for="maxValue">Max Value</label>
            <input type="number" id="maxValue" formControlName="maxValue" placeholder="Maximum allowed value" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="defaultValue">Default Value</label>
            <input type="number" id="defaultValue" formControlName="defaultValue" placeholder="Default value" />
          </div>
        </div>
      </div>

      <div class="form-section">
        <h3>Settings</h3>
        <div class="form-row">
          <div class="form-group checkbox-group">
            <label><input type="checkbox" formControlName="isRequired" /> Required</label>
          </div>
          <div class="form-group">
            <label for="displayOrder">Display Order</label>
            <input type="number" id="displayOrder" formControlName="displayOrder" min="1" />
          </div>
        </div>
        <div class="form-row" *ngIf="isEditMode">
          <div class="form-group">
            <label for="status">Status</label>
            <select id="status" formControlName="status"><option value="ACTIVE">Active</option><option value="INACTIVE">Inactive</option></select>
          </div>
        </div>
      </div>

      <div class="form-actions">
        <button type="button" class="btn btn-secondary" (click)="cancel()" [disabled]="saving">Cancel</button>
        <button type="submit" class="btn btn-primary" [disabled]="saving || form.invalid">{{ saving ? 'Saving...' : (isEditMode ? 'Update' : 'Create') }}</button>
      </div>
    </form>
  </div>
</div>

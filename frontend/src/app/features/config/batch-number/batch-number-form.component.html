<div class="config-form-page">
  <div class="page-header"><h1>{{ isEditMode ? 'Edit Batch Number Config' : 'New Batch Number Config' }}</h1></div>
  <div class="loading" *ngIf="loading">Loading...</div>
  <div class="form-container" *ngIf="!loading">
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="error-banner" *ngIf="error">{{ error }}</div>

      <div class="form-section">
        <h3>Identification</h3>
        <div class="form-row">
          <div class="form-group">
            <label for="configName">Config Name *</label>
            <input type="text" id="configName" formControlName="configName" [class.error]="hasError('configName')" placeholder="e.g., Furnace Batch Format" />
          </div>
          <div class="form-group">
            <label for="operationType">Operation Type</label>
            <input type="text" id="operationType" formControlName="operationType" placeholder="e.g., FURNACE" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="productSku">Product SKU</label>
            <input type="text" id="productSku" formControlName="productSku" placeholder="e.g., ALU-SHEET-001" />
          </div>
        </div>
      </div>

      <div class="form-section">
        <h3>Number Format</h3>
        <div class="form-row">
          <div class="form-group">
            <label for="prefix">Prefix *</label>
            <input type="text" id="prefix" formControlName="prefix" [class.error]="hasError('prefix')" placeholder="e.g., BATCH" />
          </div>
          <div class="form-group">
            <label for="separator">Separator *</label>
            <input type="text" id="separator" formControlName="separator" [class.error]="hasError('separator')" placeholder="e.g., -" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group checkbox-group">
            <label><input type="checkbox" formControlName="includeOperationCode" /> Include Operation Code</label>
          </div>
          <div class="form-group">
            <label for="operationCodeLength">Operation Code Length</label>
            <input type="number" id="operationCodeLength" formControlName="operationCodeLength" min="1" max="10" />
          </div>
        </div>
      </div>

      <div class="form-section">
        <h3>Date & Sequence</h3>
        <div class="form-row">
          <div class="form-group checkbox-group">
            <label><input type="checkbox" formControlName="includeDate" /> Include Date</label>
          </div>
          <div class="form-group">
            <label for="dateFormat">Date Format</label>
            <input type="text" id="dateFormat" formControlName="dateFormat" placeholder="e.g., yyyyMMdd" />
            <small class="hint">Java date format pattern</small>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="sequenceLength">Sequence Length *</label>
            <input type="number" id="sequenceLength" formControlName="sequenceLength" [class.error]="hasError('sequenceLength')" min="1" max="10" />
          </div>
          <div class="form-group">
            <label for="sequenceReset">Sequence Reset</label>
            <select id="sequenceReset" formControlName="sequenceReset">
              <option value="DAILY">Daily</option>
              <option value="MONTHLY">Monthly</option>
              <option value="YEARLY">Yearly</option>
              <option value="NEVER">Never</option>
            </select>
          </div>
        </div>
      </div>

      <div class="form-section">
        <h3>Priority</h3>
        <div class="form-row">
          <div class="form-group">
            <label for="priority">Priority</label>
            <input type="number" id="priority" formControlName="priority" min="1" />
            <small class="hint">Lower number = higher priority</small>
          </div>
          <div class="form-group" *ngIf="isEditMode">
            <label for="status">Status</label>
            <select id="status" formControlName="status"><option value="ACTIVE">Active</option><option value="INACTIVE">Inactive</option></select>
          </div>
        </div>
      </div>

      <div class="form-actions">
        <button type="button" class="btn btn-secondary" (click)="cancel()" [disabled]="saving">Cancel</button>
        <button type="submit" class="btn btn-primary" [disabled]="saving || form.invalid">{{ saving ? 'Saving...' : (isEditMode ? 'Update' : 'Create') }}</button>
      </div>
    </form>
  </div>
</div>

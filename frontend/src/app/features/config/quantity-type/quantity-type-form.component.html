<div class="config-form-page">
  <div class="page-header"><h1 class="page-title">{{ isEditMode ? 'Edit Quantity Type Config' : 'New Quantity Type Config' }}</h1></div>
  <div class="loading" *ngIf="loading">Loading...</div>
  <div class="form-container" *ngIf="!loading">
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="error-banner" *ngIf="error">{{ error }}</div>

      <div class="form-section">
        <h3>Identification</h3>
        <div class="form-row">
          <div class="form-group">
            <label for="configName">Config Name *</label>
            <input type="text" id="configName" formControlName="configName" [class.error]="hasError('configName')" placeholder="e.g., Default Decimal Config" />
          </div>
          <div class="form-group">
            <label for="materialCode">Material Code</label>
            <input type="text" id="materialCode" formControlName="materialCode" placeholder="e.g., ALU-INGOT" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="operationType">Operation Type</label>
            <input type="text" id="operationType" formControlName="operationType" placeholder="e.g., FURNACE" />
          </div>
          <div class="form-group">
            <label for="equipmentType">Equipment Type</label>
            <input type="text" id="equipmentType" formControlName="equipmentType" placeholder="e.g., FURNACE" />
          </div>
        </div>
      </div>

      <div class="form-section">
        <h3>Quantity Settings</h3>
        <div class="form-row">
          <div class="form-group">
            <label for="quantityType">Quantity Type</label>
            <select id="quantityType" formControlName="quantityType">
              <option value="DECIMAL">Decimal</option>
              <option value="INTEGER">Integer</option>
            </select>
          </div>
          <div class="form-group">
            <label for="decimalPrecision">Decimal Precision</label>
            <input type="number" id="decimalPrecision" formControlName="decimalPrecision" [class.error]="hasError('decimalPrecision')" min="0" max="10" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="roundingRule">Rounding Rule</label>
            <select id="roundingRule" formControlName="roundingRule">
              <option value="HALF_UP">Half Up</option>
              <option value="HALF_DOWN">Half Down</option>
              <option value="CEILING">Ceiling</option>
              <option value="FLOOR">Floor</option>
              <option value="NONE">None</option>
            </select>
          </div>
        </div>
      </div>

      <div class="form-section">
        <h3>Limits</h3>
        <div class="form-row">
          <div class="form-group">
            <label for="minQuantity">Min Quantity</label>
            <input type="number" id="minQuantity" formControlName="minQuantity" placeholder="Minimum quantity" />
          </div>
          <div class="form-group">
            <label for="maxQuantity">Max Quantity</label>
            <input type="number" id="maxQuantity" formControlName="maxQuantity" placeholder="Maximum quantity" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="unit">Unit</label>
            <input type="text" id="unit" formControlName="unit" placeholder="e.g., kg, pcs, m" />
          </div>
          <div class="form-group" *ngIf="isEditMode">
            <label for="status">Status</label>
            <select id="status" formControlName="status"><option value="ACTIVE">Active</option><option value="INACTIVE">Inactive</option></select>
          </div>
        </div>
      </div>

      <div class="form-actions">
        <button type="button" class="btn btn-secondary" (click)="cancel()" [disabled]="saving">Cancel</button>
        <button type="submit" class="btn btn-primary" [disabled]="saving || form.invalid">{{ saving ? 'Saving...' : (isEditMode ? 'Update' : 'Create') }}</button>
      </div>
    </form>
  </div>
</div>
